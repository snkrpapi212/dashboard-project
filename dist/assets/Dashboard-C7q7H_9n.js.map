{"version":3,"file":"Dashboard-C7q7H_9n.js","sources":["../../src/components/feedback/ProgressBar.tsx","../../src/components/feedback/CircularProgress.tsx","../../src/components/feedback/ConfirmDialog.tsx","../../src/hooks/useMediaQuery.ts","../../src/layouts/DashboardLayout.tsx","../../src/layouts/DashboardContent.tsx","../../src/context/DashboardContext.tsx","../../src/context/ThemeContext.tsx","../../src/theme/index.ts","../../src/context/SidebarContext.tsx","../../src/components/DashboardProvider.tsx","../../src/utils/formatters.ts","../../src/components/widgets/KPICard.tsx","../../src/hooks/useChartColors.ts","../../src/components/charts/ChartTooltip.tsx","../../src/components/charts/AccessibleChartWrapper.tsx","../../src/utils/colorblind.ts","../../src/components/charts/LineChartRenderer.tsx","../../src/components/charts/AreaChartRenderer.tsx","../../src/components/charts/BarChartRenderer.tsx","../../src/components/charts/PieChartRenderer.tsx","../../src/components/widgets/ChartWidget.tsx","../../src/hooks/useDataTable.ts","../../src/utils/csvExport.ts","../../src/components/table/useVirtualScroll.ts","../../src/components/table/DataTable.tsx","../../src/components/table/transactionColumns.tsx","../../src/components/filters/AdvancedFilterPanel.tsx","../../src/components/layouts/WidgetCatalog.tsx","../../src/hooks/useSmartPolling.ts","../../src/utils/exportDashboard.ts","../../src/hooks/useDashboardFeedback.ts","../../src/pages/mockData.ts","../../src/pages/Dashboard.tsx"],"sourcesContent":["import React from 'react';\nimport type { ProgressBarProps } from '../../types/feedback';\n\n/* ==========================================================================\n   ProgressBar\n   Linear progress indicator with determinate and indeterminate modes.\n   Supports labels, percentage display, and variant colors.\n   All styling uses design tokens via CSS classes.\n   ========================================================================== */\n\nexport function ProgressBar({\n  value,\n  max = 100,\n  variant = 'default',\n  size = 'md',\n  indeterminate = false,\n  label,\n  showValue = false,\n  description,\n  ariaLabel,\n}: ProgressBarProps) {\n  const percentage = Math.min(100, Math.max(0, (value / max) * 100));\n  const roundedPercentage = Math.round(percentage);\n\n  const hasHeader = label || showValue;\n  const hasWrapper = hasHeader || description;\n\n  const bar = (\n    <div\n      className={`progress-bar progress-bar--${size}${indeterminate ? ' progress-bar--indeterminate' : ''}`}\n      role=\"progressbar\"\n      aria-valuenow={indeterminate ? undefined : roundedPercentage}\n      aria-valuemin={0}\n      aria-valuemax={100}\n      aria-label={ariaLabel || label || 'Progress'}\n    >\n      <div\n        className={`progress-bar__fill progress-bar__fill--${variant}`}\n        style={indeterminate ? undefined : { width: `${percentage}%` }}\n      />\n    </div>\n  );\n\n  if (!hasWrapper) return bar;\n\n  return (\n    <div className=\"progress-bar-wrapper\">\n      {hasHeader && (\n        <div className=\"progress-bar-wrapper__header\">\n          {label && <span className=\"progress-bar-wrapper__label\">{label}</span>}\n          {showValue && !indeterminate && (\n            <span className=\"progress-bar-wrapper__value\">{roundedPercentage}%</span>\n          )}\n        </div>\n      )}\n      {bar}\n      {description && (\n        <span className=\"progress-bar-wrapper__description\">{description}</span>\n      )}\n    </div>\n  );\n}\n\nexport default ProgressBar;\n","import React from 'react';\nimport type { CircularProgressProps } from '../../types/feedback';\n\n/* ==========================================================================\n   CircularProgress\n   Circular/ring progress indicator for exports and compact progress display.\n   Supports determinate (with percentage label) and indeterminate (spinner).\n   ========================================================================== */\n\nconst SIZE_MAP = {\n  sm: 24,\n  md: 40,\n  lg: 56,\n};\n\nexport function CircularProgress({\n  value,\n  max = 100,\n  variant = 'default',\n  size = 'md',\n  indeterminate = false,\n  showLabel = false,\n  ariaLabel,\n}: CircularProgressProps) {\n  const pixelSize = SIZE_MAP[size];\n  const radius = (pixelSize - 6) / 2; // account for stroke width\n  const circumference = 2 * Math.PI * radius;\n  const percentage = Math.min(100, Math.max(0, (value / max) * 100));\n  const offset = circumference - (percentage / 100) * circumference;\n  const roundedPercentage = Math.round(percentage);\n\n  const variantClass = variant !== 'default' ? ` progress-circular__fill--${variant}` : '';\n\n  return (\n    <div\n      className={`progress-circular progress-circular--${size}${indeterminate ? ' progress-circular--indeterminate' : ''}`}\n      role=\"progressbar\"\n      aria-valuenow={indeterminate ? undefined : roundedPercentage}\n      aria-valuemin={0}\n      aria-valuemax={100}\n      aria-label={ariaLabel || 'Progress'}\n    >\n      <svg className=\"progress-circular__svg\" viewBox={`0 0 ${pixelSize} ${pixelSize}`}>\n        <circle\n          className=\"progress-circular__track\"\n          cx={pixelSize / 2}\n          cy={pixelSize / 2}\n          r={radius}\n        />\n        <circle\n          className={`progress-circular__fill${variantClass}`}\n          cx={pixelSize / 2}\n          cy={pixelSize / 2}\n          r={radius}\n          strokeDasharray={circumference}\n          strokeDashoffset={indeterminate ? undefined : offset}\n        />\n      </svg>\n      {showLabel && !indeterminate && size !== 'sm' && (\n        <span className=\"progress-circular__label\">{roundedPercentage}%</span>\n      )}\n    </div>\n  );\n}\n\nexport default CircularProgress;\n","import React, { useEffect, useRef, useCallback, useState } from 'react';\nimport type { ConfirmDialogConfig, DialogVariant } from '../../types/feedback';\n\n/* ==========================================================================\n   ConfirmDialog\n   Modal confirmation dialog with focus trapping, keyboard navigation,\n   and accessible ARIA patterns. Used for destructive action confirmations.\n   ========================================================================== */\n\n/* --------------------------------------------------------------------------\n   Variant icons\n   -------------------------------------------------------------------------- */\n\nconst DIALOG_ICONS: Record<DialogVariant, React.ReactNode> = {\n  danger: (\n    <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" aria-hidden=\"true\">\n      <path d=\"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z\" stroke=\"currentColor\" strokeWidth=\"1.5\" fill=\"none\" />\n      <path d=\"M8 8l8 8M16 8l-8 8\" stroke=\"currentColor\" strokeWidth=\"1.5\" strokeLinecap=\"round\" />\n    </svg>\n  ),\n  warning: (\n    <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" aria-hidden=\"true\">\n      <path d=\"M12 3L1.5 21h21L12 3z\" stroke=\"currentColor\" strokeWidth=\"1.5\" strokeLinejoin=\"round\" fill=\"none\" />\n      <path d=\"M12 10v4\" stroke=\"currentColor\" strokeWidth=\"1.5\" strokeLinecap=\"round\" />\n      <circle cx=\"12\" cy=\"17\" r=\"0.75\" fill=\"currentColor\" />\n    </svg>\n  ),\n  info: (\n    <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" aria-hidden=\"true\">\n      <path d=\"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z\" stroke=\"currentColor\" strokeWidth=\"1.5\" fill=\"none\" />\n      <path d=\"M12 11v5\" stroke=\"currentColor\" strokeWidth=\"1.5\" strokeLinecap=\"round\" />\n      <circle cx=\"12\" cy=\"8\" r=\"0.75\" fill=\"currentColor\" />\n    </svg>\n  ),\n};\n\nexport interface ConfirmDialogProps extends ConfirmDialogConfig {\n  /** Whether the dialog is open */\n  isOpen: boolean;\n  /** Close the dialog */\n  onClose: () => void;\n}\n\nexport function ConfirmDialog({\n  isOpen,\n  onClose,\n  title,\n  description,\n  variant = 'danger',\n  confirmLabel = 'Confirm',\n  cancelLabel = 'Cancel',\n  onConfirm,\n  onCancel,\n}: ConfirmDialogProps) {\n  const [isExiting, setIsExiting] = useState(false);\n  const [isConfirming, setIsConfirming] = useState(false);\n  const dialogRef = useRef<HTMLDivElement>(null);\n  const previousFocusRef = useRef<HTMLElement | null>(null);\n\n  // Save previous focus on open\n  useEffect(() => {\n    if (isOpen) {\n      previousFocusRef.current = document.activeElement as HTMLElement;\n      setIsExiting(false);\n    }\n  }, [isOpen]);\n\n  // Focus the dialog when opened\n  useEffect(() => {\n    if (isOpen && dialogRef.current) {\n      const firstButton = dialogRef.current.querySelector<HTMLButtonElement>(\n        '.dialog__btn--cancel',\n      );\n      firstButton?.focus();\n    }\n  }, [isOpen]);\n\n  // Restore focus on close\n  const handleClose = useCallback(() => {\n    setIsExiting(true);\n    setTimeout(() => {\n      onClose();\n      setIsExiting(false);\n      previousFocusRef.current?.focus();\n    }, 150);\n  }, [onClose]);\n\n  // Handle confirm\n  const handleConfirm = useCallback(async () => {\n    setIsConfirming(true);\n    try {\n      await onConfirm();\n      handleClose();\n    } catch {\n      // Keep dialog open on error\n    } finally {\n      setIsConfirming(false);\n    }\n  }, [onConfirm, handleClose]);\n\n  // Handle cancel\n  const handleCancel = useCallback(() => {\n    onCancel?.();\n    handleClose();\n  }, [onCancel, handleClose]);\n\n  // Keyboard handling\n  const handleKeyDown = useCallback(\n    (e: React.KeyboardEvent) => {\n      if (e.key === 'Escape') {\n        e.preventDefault();\n        handleCancel();\n        return;\n      }\n\n      // Trap focus within dialog\n      if (e.key === 'Tab' && dialogRef.current) {\n        const focusable = dialogRef.current.querySelectorAll<HTMLElement>(\n          'button:not([disabled]), [tabindex]:not([tabindex=\"-1\"])',\n        );\n        const first = focusable[0];\n        const last = focusable[focusable.length - 1];\n\n        if (e.shiftKey && document.activeElement === first) {\n          e.preventDefault();\n          last?.focus();\n        } else if (!e.shiftKey && document.activeElement === last) {\n          e.preventDefault();\n          first?.focus();\n        }\n      }\n    },\n    [handleCancel],\n  );\n\n  if (!isOpen) return null;\n\n  return (\n    <div\n      className={`dialog-overlay${isExiting ? ' dialog-overlay--exiting' : ''}`}\n      onClick={(e) => {\n        if (e.target === e.currentTarget) handleCancel();\n      }}\n      onKeyDown={handleKeyDown}\n      role=\"presentation\"\n    >\n      <div\n        ref={dialogRef}\n        className={`dialog${isExiting ? ' dialog--exiting' : ''}`}\n        role=\"alertdialog\"\n        aria-modal=\"true\"\n        aria-labelledby=\"dialog-title\"\n        aria-describedby=\"dialog-description\"\n      >\n        <div className={`dialog__icon dialog__icon--${variant}`}>\n          {DIALOG_ICONS[variant]}\n        </div>\n\n        <h2 id=\"dialog-title\" className=\"dialog__title\">\n          {title}\n        </h2>\n\n        <p id=\"dialog-description\" className=\"dialog__description\">\n          {description}\n        </p>\n\n        <div className=\"dialog__actions\">\n          <button\n            className=\"dialog__btn dialog__btn--cancel\"\n            onClick={handleCancel}\n            disabled={isConfirming}\n          >\n            {cancelLabel}\n          </button>\n          <button\n            className={`dialog__btn ${variant === 'danger' ? 'dialog__btn--danger' : 'dialog__btn--confirm'}`}\n            onClick={handleConfirm}\n            disabled={isConfirming}\n          >\n            {isConfirming ? 'Processing...' : confirmLabel}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default ConfirmDialog;\n","import { useState, useEffect } from 'react';\n\n/**\n * Hook that listens to a CSS media query and returns whether it matches.\n * Useful for responsive behavior in JS (e.g., collapsing sidebar).\n *\n * @example\n *   const isMobile = useMediaQuery('(max-width: 768px)');\n *   const prefersDark = useMediaQuery('(prefers-color-scheme: dark)');\n */\nexport function useMediaQuery(query: string): boolean {\n  const [matches, setMatches] = useState<boolean>(() => {\n    if (typeof window === 'undefined') return false;\n    return window.matchMedia(query).matches;\n  });\n\n  useEffect(() => {\n    const mediaQuery = window.matchMedia(query);\n    const handler = (event: MediaQueryListEvent) => {\n      setMatches(event.matches);\n    };\n\n    // Set initial value\n    setMatches(mediaQuery.matches);\n\n    mediaQuery.addEventListener('change', handler);\n    return () => mediaQuery.removeEventListener('change', handler);\n  }, [query]);\n\n  return matches;\n}\n\n/**\n * Convenience hook for checking reduced motion preference.\n */\nexport function usePrefersReducedMotion(): boolean {\n  return useMediaQuery('(prefers-reduced-motion: reduce)');\n}\n","import React, { useState, useCallback, useEffect } from 'react';\nimport { useMediaQuery } from '../hooks/useMediaQuery';\n\n/* --------------------------------------------------------------------------\n   Types\n   -------------------------------------------------------------------------- */\n\nexport interface NavItem {\n  id: string;\n  label: string;\n  icon?: React.ReactNode;\n  href: string;\n  badge?: number;\n  children?: NavItem[];\n}\n\nexport interface DashboardLayoutProps {\n  /** Content rendered inside the main area */\n  children: React.ReactNode;\n  /** Navigation items for the sidebar */\n  navItems?: NavItem[];\n  /** Content or component for the header right section */\n  headerRight?: React.ReactNode;\n  /** Dashboard title displayed in the header */\n  title?: string;\n  /** Currently active path for nav highlighting */\n  activePath?: string;\n  /** Callback when a nav item is clicked */\n  onNavigate?: (href: string) => void;\n  /** Control sidebar collapsed state externally */\n  sidebarCollapsed?: boolean;\n  /** Callback when sidebar collapsed state changes */\n  onSidebarCollapsedChange?: (collapsed: boolean) => void;\n}\n\n/* --------------------------------------------------------------------------\n   Breakpoints (matching token system)\n   -------------------------------------------------------------------------- */\n\nconst BREAKPOINT_LG = '(min-width: 1024px)';\nconst BREAKPOINT_MD = '(min-width: 768px)';\n\n/* --------------------------------------------------------------------------\n   DashboardLayout Component\n   -------------------------------------------------------------------------- */\n\nexport function DashboardLayout({\n  children,\n  navItems = [],\n  headerRight,\n  title = 'Sales Dashboard',\n  activePath = '/',\n  onNavigate,\n  sidebarCollapsed: controlledCollapsed,\n  onSidebarCollapsedChange,\n}: DashboardLayoutProps) {\n  const isDesktop = useMediaQuery(BREAKPOINT_LG);\n  const isTablet = useMediaQuery(BREAKPOINT_MD);\n\n  // Sidebar state\n  const [internalCollapsed, setInternalCollapsed] = useState(false);\n  const [mobileSidebarOpen, setMobileSidebarOpen] = useState(false);\n  const [expandedGroups, setExpandedGroups] = useState<Set<string>>(new Set());\n\n  // Use controlled or internal state\n  const isCollapsed = controlledCollapsed ?? internalCollapsed;\n  const setCollapsed = useCallback(\n    (collapsed: boolean) => {\n      if (onSidebarCollapsedChange) {\n        onSidebarCollapsedChange(collapsed);\n      } else {\n        setInternalCollapsed(collapsed);\n      }\n    },\n    [onSidebarCollapsedChange],\n  );\n\n  // Auto-collapse on tablet, hide on mobile\n  useEffect(() => {\n    if (!isDesktop && isTablet) {\n      setCollapsed(true);\n    }\n    if (!isTablet) {\n      setMobileSidebarOpen(false);\n    }\n  }, [isDesktop, isTablet, setCollapsed]);\n\n  // Close mobile sidebar on Escape\n  useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if (e.key === 'Escape' && mobileSidebarOpen) {\n        setMobileSidebarOpen(false);\n      }\n    };\n    document.addEventListener('keydown', handleKeyDown);\n    return () => document.removeEventListener('keydown', handleKeyDown);\n  }, [mobileSidebarOpen]);\n\n  // Toggle sidebar\n  const handleToggleSidebar = useCallback(() => {\n    if (!isTablet) {\n      setMobileSidebarOpen((prev) => !prev);\n    } else {\n      setCollapsed(!isCollapsed);\n    }\n  }, [isTablet, isCollapsed, setCollapsed]);\n\n  // Toggle expanded group\n  const toggleGroup = useCallback((id: string) => {\n    setExpandedGroups((prev) => {\n      const next = new Set(prev);\n      if (next.has(id)) {\n        next.delete(id);\n      } else {\n        next.add(id);\n      }\n      return next;\n    });\n  }, []);\n\n  // Handle navigation\n  const handleNavClick = useCallback(\n    (item: NavItem, e: React.MouseEvent) => {\n      if (item.children && item.children.length > 0) {\n        e.preventDefault();\n        toggleGroup(item.id);\n        return;\n      }\n      if (onNavigate) {\n        e.preventDefault();\n        onNavigate(item.href);\n      }\n      // Close mobile sidebar after navigation\n      if (!isTablet) {\n        setMobileSidebarOpen(false);\n      }\n    },\n    [onNavigate, toggleGroup, isTablet],\n  );\n\n  // Build sidebar class names\n  const sidebarClasses = [\n    'layout-sidebar',\n    isCollapsed ? 'layout-sidebar--collapsed' : '',\n    mobileSidebarOpen ? 'layout-sidebar--mobile-open' : '',\n  ]\n    .filter(Boolean)\n    .join(' ');\n\n  // Build app shell class names\n  const shellClasses = [\n    'app-shell',\n    isCollapsed ? 'app-shell--sidebar-collapsed' : '',\n  ]\n    .filter(Boolean)\n    .join(' ');\n\n  return (\n    <div className={shellClasses}>\n      {/* Skip Links */}\n      <a href=\"#main-content\" className=\"skip-link\">\n        Skip to main content\n      </a>\n      <a href=\"#sidebar-nav\" className=\"skip-link\">\n        Skip to navigation\n      </a>\n\n      {/* Header */}\n      <header className=\"layout-header\" role=\"banner\">\n        <div className=\"layout-header__left\">\n          <button\n            className=\"sidebar-toggle\"\n            onClick={handleToggleSidebar}\n            aria-label={\n              mobileSidebarOpen || !isCollapsed\n                ? 'Collapse sidebar'\n                : 'Expand sidebar'\n            }\n            aria-expanded={mobileSidebarOpen || !isCollapsed}\n          >\n            <span className=\"sidebar-toggle__line\" />\n            <span className=\"sidebar-toggle__line\" />\n            <span className=\"sidebar-toggle__line\" />\n          </button>\n          <h1 className=\"layout-header__title\">{title}</h1>\n        </div>\n        <div className=\"layout-header__right\">{headerRight}</div>\n      </header>\n\n      {/* Mobile Overlay */}\n      <div\n        className={`mobile-overlay ${mobileSidebarOpen ? 'mobile-overlay--visible' : ''}`}\n        onClick={() => setMobileSidebarOpen(false)}\n        aria-hidden=\"true\"\n      />\n\n      {/* Sidebar */}\n      <aside\n        id=\"sidebar-nav\"\n        className={sidebarClasses}\n        role=\"navigation\"\n        aria-label=\"Main navigation\"\n      >\n        <nav className=\"sidebar-nav\">\n          <ul className=\"sidebar-nav__list\" role=\"list\">\n            {navItems.map((item) => (\n              <SidebarNavItem\n                key={item.id}\n                item={item}\n                activePath={activePath}\n                isCollapsed={isCollapsed && isTablet}\n                expandedGroups={expandedGroups}\n                onNavClick={handleNavClick}\n              />\n            ))}\n          </ul>\n        </nav>\n      </aside>\n\n      {/* Main Content */}\n      <main id=\"main-content\" className=\"layout-main\" role=\"main\">\n        <div className=\"layout-main__content\">{children}</div>\n      </main>\n    </div>\n  );\n}\n\n/* --------------------------------------------------------------------------\n   SidebarNavItem (internal subcomponent)\n   -------------------------------------------------------------------------- */\n\ninterface SidebarNavItemProps {\n  item: NavItem;\n  activePath: string;\n  isCollapsed: boolean;\n  expandedGroups: Set<string>;\n  onNavClick: (item: NavItem, e: React.MouseEvent) => void;\n  depth?: number;\n}\n\nfunction SidebarNavItem({\n  item,\n  activePath,\n  isCollapsed,\n  expandedGroups,\n  onNavClick,\n  depth = 0,\n}: SidebarNavItemProps) {\n  const isActive = activePath === item.href;\n  const hasChildren = item.children && item.children.length > 0;\n  const isExpanded = expandedGroups.has(item.id);\n\n  const itemClasses = [\n    'sidebar-nav__item',\n    isActive ? 'sidebar-nav__item--active' : '',\n  ]\n    .filter(Boolean)\n    .join(' ');\n\n  return (\n    <li role=\"none\">\n      <a\n        href={item.href}\n        className={itemClasses}\n        onClick={(e) => onNavClick(item, e)}\n        aria-current={isActive ? 'page' : undefined}\n        aria-expanded={hasChildren ? isExpanded : undefined}\n        title={isCollapsed ? item.label : undefined}\n      >\n        {item.icon && (\n          <span className=\"sidebar-nav__item-icon\" aria-hidden=\"true\">\n            {item.icon}\n          </span>\n        )}\n        <span className=\"sidebar-nav__item-label\">{item.label}</span>\n        {item.badge != null && item.badge > 0 && (\n          <span\n            className=\"sidebar-nav__item-badge\"\n            aria-label={`${item.badge} new`}\n          >\n            {item.badge}\n          </span>\n        )}\n        {hasChildren && (\n          <span\n            className={`sidebar-nav__item-chevron ${isExpanded ? 'sidebar-nav__item-chevron--expanded' : ''}`}\n            aria-hidden=\"true\"\n          >\n            &#8250;\n          </span>\n        )}\n      </a>\n      {hasChildren && isExpanded && (\n        <ul className=\"sidebar-nav__submenu\" role=\"group\">\n          {item.children!.map((child) => (\n            <SidebarNavItem\n              key={child.id}\n              item={child}\n              activePath={activePath}\n              isCollapsed={isCollapsed}\n              expandedGroups={expandedGroups}\n              onNavClick={onNavClick}\n              depth={depth + 1}\n            />\n          ))}\n        </ul>\n      )}\n    </li>\n  );\n}\n","import React from 'react';\n\n/* --------------------------------------------------------------------------\n   DashboardContent\n   Provides the internal CSS Grid structure for dashboard sections:\n   filter bar, KPI cards, chart grid, and data table.\n   -------------------------------------------------------------------------- */\n\nexport interface DashboardContentProps {\n  /** Optional filter bar rendered at the top */\n  filterBar?: React.ReactNode;\n  /** KPI / metric cards (auto-fit grid) */\n  kpiCards?: React.ReactNode;\n  /** Chart components (2-col grid on desktop) */\n  charts?: React.ReactNode;\n  /** Data table section (full width) */\n  dataTable?: React.ReactNode;\n  /** Any additional sections after the table */\n  children?: React.ReactNode;\n}\n\nexport function DashboardContent({\n  filterBar,\n  kpiCards,\n  charts,\n  dataTable,\n  children,\n}: DashboardContentProps) {\n  return (\n    <div className=\"dashboard-grid\">\n      {filterBar && (\n        <section\n          className=\"dashboard-grid__filter-bar\"\n          aria-label=\"Dashboard filters\"\n        >\n          {filterBar}\n        </section>\n      )}\n\n      {kpiCards && (\n        <section\n          className=\"dashboard-grid__kpi-row\"\n          aria-label=\"Key performance indicators\"\n        >\n          {kpiCards}\n        </section>\n      )}\n\n      {charts && (\n        <section\n          className=\"dashboard-grid__chart-area\"\n          aria-label=\"Charts and visualizations\"\n        >\n          {charts}\n        </section>\n      )}\n\n      {dataTable && (\n        <section\n          className=\"dashboard-grid__table-section\"\n          aria-label=\"Data table\"\n        >\n          {dataTable}\n        </section>\n      )}\n\n      {children}\n    </div>\n  );\n}\n\n/* --------------------------------------------------------------------------\n   Section Header\n   Reusable header for dashboard sections (title + optional actions)\n   -------------------------------------------------------------------------- */\n\nexport interface SectionHeaderProps {\n  title: string;\n  subtitle?: string;\n  actions?: React.ReactNode;\n}\n\nexport function SectionHeader({ title, subtitle, actions }: SectionHeaderProps) {\n  return (\n    <div className=\"layout-section__header\">\n      <div>\n        <h2 className=\"layout-section__title\">{title}</h2>\n        {subtitle && (\n          <p className=\"layout-section__subtitle\">{subtitle}</p>\n        )}\n      </div>\n      {actions && <div className=\"layout-row layout-row--sm\">{actions}</div>}\n    </div>\n  );\n}\n","import React, {\n  createContext,\n  useContext,\n  useReducer,\n  useCallback,\n  useEffect,\n  useMemo,\n  useState,\n  type ReactNode,\n} from 'react';\nimport type {\n  DashboardFilters,\n  DateRange,\n  DatePreset,\n  WidgetConfig,\n} from '../types/dashboard';\n\n/* --------------------------------------------------------------------------\n   Default Filter Values\n   -------------------------------------------------------------------------- */\n\nfunction getDefaultDateRange(): DateRange {\n  const end = new Date();\n  const start = new Date();\n  start.setDate(start.getDate() - 30);\n  return { start, end, preset: '30d' };\n}\n\nconst DEFAULT_FILTERS: DashboardFilters = {\n  dateRange: getDefaultDateRange(),\n  categories: [],\n  regions: [],\n  search: '',\n  comparison: { enabled: false, period: 'previous' },\n  granularity: 'day',\n};\n\n/* --------------------------------------------------------------------------\n   Actions\n   -------------------------------------------------------------------------- */\n\ntype FilterAction =\n  | { type: 'SET_DATE_RANGE'; payload: DateRange }\n  | { type: 'SET_DATE_PRESET'; payload: DatePreset }\n  | { type: 'SET_CATEGORIES'; payload: string[] }\n  | { type: 'TOGGLE_CATEGORY'; payload: string }\n  | { type: 'SET_REGIONS'; payload: string[] }\n  | { type: 'SET_SEARCH'; payload: string }\n  | { type: 'SET_COMPARISON'; payload: { enabled: boolean; period: 'previous' | 'year-ago' } }\n  | { type: 'SET_GRANULARITY'; payload: 'hour' | 'day' | 'week' | 'month' }\n  | { type: 'RESET_FILTERS' };\n\n/* --------------------------------------------------------------------------\n   Reducer\n   -------------------------------------------------------------------------- */\n\nfunction calculateDateRange(preset: DatePreset): DateRange {\n  const end = new Date();\n  const start = new Date();\n\n  switch (preset) {\n    case 'today':\n      start.setHours(0, 0, 0, 0);\n      break;\n    case '7d':\n      start.setDate(start.getDate() - 7);\n      break;\n    case '30d':\n      start.setDate(start.getDate() - 30);\n      break;\n    case '90d':\n      start.setDate(start.getDate() - 90);\n      break;\n    case 'quarter':\n      start.setMonth(start.getMonth() - 3);\n      break;\n    case 'year':\n      start.setFullYear(start.getFullYear() - 1);\n      break;\n    default:\n      start.setDate(start.getDate() - 30);\n  }\n\n  return { start, end, preset };\n}\n\nfunction filterReducer(\n  state: DashboardFilters,\n  action: FilterAction,\n): DashboardFilters {\n  switch (action.type) {\n    case 'SET_DATE_RANGE':\n      return { ...state, dateRange: action.payload };\n    case 'SET_DATE_PRESET':\n      return { ...state, dateRange: calculateDateRange(action.payload) };\n    case 'SET_CATEGORIES':\n      return { ...state, categories: action.payload };\n    case 'TOGGLE_CATEGORY': {\n      const cat = action.payload;\n      const categories = state.categories.includes(cat)\n        ? state.categories.filter((c) => c !== cat)\n        : [...state.categories, cat];\n      return { ...state, categories };\n    }\n    case 'SET_REGIONS':\n      return { ...state, regions: action.payload };\n    case 'SET_SEARCH':\n      return { ...state, search: action.payload };\n    case 'SET_COMPARISON':\n      return { ...state, comparison: action.payload };\n    case 'SET_GRANULARITY':\n      return { ...state, granularity: action.payload };\n    case 'RESET_FILTERS':\n      return { ...DEFAULT_FILTERS, dateRange: getDefaultDateRange() };\n    default:\n      return state;\n  }\n}\n\n/* --------------------------------------------------------------------------\n   Context Shape\n   -------------------------------------------------------------------------- */\n\nexport interface DashboardContextType {\n  /** Current filter state */\n  filters: DashboardFilters;\n  /** Dispatch filter actions */\n  dispatch: React.Dispatch<FilterAction>;\n  /** Convenience: set the date range */\n  setDateRange: (range: DateRange) => void;\n  /** Convenience: apply a date preset */\n  setDatePreset: (preset: DatePreset) => void;\n  /** Convenience: set categories */\n  setCategories: (categories: string[]) => void;\n  /** Convenience: toggle a single category */\n  toggleCategory: (category: string) => void;\n  /** Convenience: set search */\n  setSearch: (search: string) => void;\n  /** Reset all filters to defaults */\n  resetFilters: () => void;\n  /** Number of currently active filters */\n  activeFilterCount: number;\n  /** Auto-refresh toggle */\n  autoRefresh: boolean;\n  /** Set auto-refresh */\n  setAutoRefresh: (enabled: boolean) => void;\n  /** Refresh interval in ms */\n  refreshInterval: number;\n  /** Set refresh interval */\n  setRefreshInterval: (ms: number) => void;\n  /** Last full data refresh timestamp */\n  lastRefreshed: number;\n  /** Trigger a manual refresh */\n  triggerRefresh: () => void;\n}\n\nconst DashboardContext = createContext<DashboardContextType | null>(null);\n\n/* --------------------------------------------------------------------------\n   Provider\n   -------------------------------------------------------------------------- */\n\nexport interface DashboardProviderProps {\n  children: ReactNode;\n  /** Override default filters */\n  defaultFilters?: Partial<DashboardFilters>;\n  /** Initial auto-refresh state */\n  defaultAutoRefresh?: boolean;\n  /** Default refresh interval in ms */\n  defaultRefreshInterval?: number;\n}\n\nexport function DashboardProvider({\n  children,\n  defaultFilters,\n  defaultAutoRefresh = true,\n  defaultRefreshInterval = 30_000,\n}: DashboardProviderProps) {\n  const initialFilters: DashboardFilters = {\n    ...DEFAULT_FILTERS,\n    ...defaultFilters,\n    dateRange: defaultFilters?.dateRange ?? getDefaultDateRange(),\n  };\n\n  const [filters, dispatch] = useReducer(filterReducer, initialFilters);\n  const [autoRefresh, setAutoRefresh] = useState(defaultAutoRefresh);\n  const [refreshInterval, setRefreshInterval] = useState(defaultRefreshInterval);\n  const [lastRefreshed, setLastRefreshed] = useState(Date.now());\n\n  // Count active filters\n  const activeFilterCount = useMemo(() => {\n    let count = 0;\n    if (filters.dateRange.preset !== '30d') count++;\n    count += filters.categories.length;\n    count += filters.regions.length;\n    if (filters.search) count++;\n    if (filters.comparison.enabled) count++;\n    if (filters.granularity !== 'day') count++;\n    return count;\n  }, [filters]);\n\n  // Convenience dispatchers\n  const setDateRange = useCallback(\n    (range: DateRange) => dispatch({ type: 'SET_DATE_RANGE', payload: range }),\n    [],\n  );\n  const setDatePreset = useCallback(\n    (preset: DatePreset) => dispatch({ type: 'SET_DATE_PRESET', payload: preset }),\n    [],\n  );\n  const setCategories = useCallback(\n    (categories: string[]) => dispatch({ type: 'SET_CATEGORIES', payload: categories }),\n    [],\n  );\n  const toggleCategory = useCallback(\n    (category: string) => dispatch({ type: 'TOGGLE_CATEGORY', payload: category }),\n    [],\n  );\n  const setSearch = useCallback(\n    (search: string) => dispatch({ type: 'SET_SEARCH', payload: search }),\n    [],\n  );\n  const resetFilters = useCallback(\n    () => dispatch({ type: 'RESET_FILTERS' }),\n    [],\n  );\n  const triggerRefresh = useCallback(() => {\n    setLastRefreshed(Date.now());\n  }, []);\n\n  // Persist filters to localStorage\n  useEffect(() => {\n    try {\n      const serializable = {\n        ...filters,\n        dateRange: {\n          start: filters.dateRange.start.toISOString(),\n          end: filters.dateRange.end.toISOString(),\n          preset: filters.dateRange.preset,\n        },\n      };\n      localStorage.setItem('dashboard-filters', JSON.stringify(serializable));\n    } catch {\n      // Silently fail if localStorage unavailable\n    }\n  }, [filters]);\n\n  const value: DashboardContextType = {\n    filters,\n    dispatch,\n    setDateRange,\n    setDatePreset,\n    setCategories,\n    toggleCategory,\n    setSearch,\n    resetFilters,\n    activeFilterCount,\n    autoRefresh,\n    setAutoRefresh,\n    refreshInterval,\n    setRefreshInterval,\n    lastRefreshed,\n    triggerRefresh,\n  };\n\n  return (\n    <DashboardContext.Provider value={value}>\n      {children}\n    </DashboardContext.Provider>\n  );\n}\n\n/* --------------------------------------------------------------------------\n   Hook\n   -------------------------------------------------------------------------- */\n\nexport function useDashboard(): DashboardContextType {\n  const context = useContext(DashboardContext);\n  if (!context) {\n    throw new Error('useDashboard must be used within a DashboardProvider');\n  }\n  return context;\n}\n","import {\n  createContext,\n  useContext,\n  useState,\n  useEffect,\n  useCallback,\n  type ReactNode,\n} from 'react';\n\n/* --------------------------------------------------------------------------\n   Types\n   -------------------------------------------------------------------------- */\n\nexport type ThemeMode = 'light' | 'dark' | 'high-contrast';\n\nexport interface ThemeContextType {\n  /** Current active theme */\n  theme: ThemeMode;\n  /** Set a specific theme */\n  setTheme: (theme: ThemeMode) => void;\n  /** Toggle between light and dark */\n  toggleTheme: () => void;\n  /** Whether current theme is dark mode */\n  isDark: boolean;\n}\n\n/* --------------------------------------------------------------------------\n   Constants\n   -------------------------------------------------------------------------- */\n\nconst STORAGE_KEY = 'dashboard-theme';\nconst THEME_ATTRIBUTE = 'data-theme';\n\nconst VALID_THEMES: ThemeMode[] = ['light', 'dark', 'high-contrast'];\n\n/* --------------------------------------------------------------------------\n   Context\n   -------------------------------------------------------------------------- */\n\nconst ThemeContext = createContext<ThemeContextType>({\n  theme: 'light',\n  setTheme: () => {},\n  toggleTheme: () => {},\n  isDark: false,\n});\n\n/* --------------------------------------------------------------------------\n   Helper: detect system preference\n   -------------------------------------------------------------------------- */\n\nfunction getSystemPreference(): ThemeMode {\n  if (typeof window === 'undefined') return 'light';\n  return window.matchMedia('(prefers-color-scheme: dark)').matches\n    ? 'dark'\n    : 'light';\n}\n\nfunction getSavedTheme(): ThemeMode | null {\n  if (typeof window === 'undefined') return null;\n  const saved = localStorage.getItem(STORAGE_KEY);\n  if (saved && VALID_THEMES.includes(saved as ThemeMode)) {\n    return saved as ThemeMode;\n  }\n  return null;\n}\n\n/* --------------------------------------------------------------------------\n   Provider\n   -------------------------------------------------------------------------- */\n\nexport interface ThemeProviderProps {\n  children: ReactNode;\n  /** Override the default theme */\n  defaultTheme?: ThemeMode;\n}\n\nexport function ThemeProvider({ children, defaultTheme }: ThemeProviderProps) {\n  const [theme, setThemeState] = useState<ThemeMode>(() => {\n    // Priority: saved > default > system preference\n    return getSavedTheme() ?? defaultTheme ?? getSystemPreference();\n  });\n\n  // Apply theme attribute and persist\n  useEffect(() => {\n    document.documentElement.setAttribute(THEME_ATTRIBUTE, theme);\n    localStorage.setItem(STORAGE_KEY, theme);\n  }, [theme]);\n\n  // Listen for system preference changes (only if no manual override)\n  useEffect(() => {\n    const mediaQuery = window.matchMedia('(prefers-color-scheme: dark)');\n\n    const handleChange = (e: MediaQueryListEvent) => {\n      // Only auto-switch if user has not manually selected a theme\n      if (!getSavedTheme()) {\n        setThemeState(e.matches ? 'dark' : 'light');\n      }\n    };\n\n    mediaQuery.addEventListener('change', handleChange);\n    return () => mediaQuery.removeEventListener('change', handleChange);\n  }, []);\n\n  const setTheme = useCallback((newTheme: ThemeMode) => {\n    if (VALID_THEMES.includes(newTheme)) {\n      setThemeState(newTheme);\n    }\n  }, []);\n\n  const toggleTheme = useCallback(() => {\n    setThemeState((prev) => (prev === 'dark' ? 'light' : 'dark'));\n  }, []);\n\n  const isDark = theme === 'dark';\n\n  return (\n    <ThemeContext.Provider value={{ theme, setTheme, toggleTheme, isDark }}>\n      {children}\n    </ThemeContext.Provider>\n  );\n}\n\n/* --------------------------------------------------------------------------\n   Hook\n   -------------------------------------------------------------------------- */\n\nexport function useTheme(): ThemeContextType {\n  const context = useContext(ThemeContext);\n  if (!context) {\n    throw new Error('useTheme must be used within a ThemeProvider');\n  }\n  return context;\n}\n\n/* --------------------------------------------------------------------------\n   FOUC Prevention Script\n   Inline this in <head> before CSS loads to prevent flash of wrong theme\n   -------------------------------------------------------------------------- */\n\nexport const themeInitScript = `\n(function() {\n  try {\n    var saved = localStorage.getItem('${STORAGE_KEY}');\n    var theme = saved || (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');\n    document.documentElement.setAttribute('${THEME_ATTRIBUTE}', theme);\n  } catch (e) {}\n})();\n`;\n","/**\n * Theme System - Public API\n *\n * Import this module to access the theme provider, hook, and utilities.\n * CSS imports should be done via globals.css in your app entry point.\n *\n * Usage:\n *   import { ThemeProvider, useTheme } from './theme';\n *   import './theme/globals.css';\n */\n\nexport {\n  ThemeProvider,\n  useTheme,\n  themeInitScript,\n  type ThemeMode,\n  type ThemeContextType,\n  type ThemeProviderProps,\n} from '../context/ThemeContext';\n\n/**\n * CSS Custom Property helper for reading token values at runtime.\n * Useful for chart libraries (Recharts, D3) that need JS color values.\n */\nexport function getTokenValue(tokenName: string): string {\n  if (typeof window === 'undefined') return '';\n  return getComputedStyle(document.documentElement)\n    .getPropertyValue(tokenName)\n    .trim();\n}\n\n/**\n * Retrieve all chart series colors as an array.\n * Returns resolved CSS values for --chart-color-1 through --chart-color-8.\n */\nexport function getChartColors(count: number = 8): string[] {\n  const colors: string[] = [];\n  for (let i = 1; i <= count; i++) {\n    const value = getTokenValue(`--chart-color-${i}`);\n    if (value) colors.push(value);\n  }\n  return colors;\n}\n\n/**\n * Spacing scale as JS values (in pixels) for non-CSS contexts.\n * Based on 8px grid system.\n */\nexport const spacing = {\n  xs: 4,\n  sm: 8,\n  md: 16,\n  lg: 24,\n  xl: 32,\n  '2xl': 48,\n  '3xl': 64,\n} as const;\n\n/**\n * Breakpoints for responsive design.\n */\nexport const breakpoints = {\n  sm: 640,\n  md: 768,\n  lg: 1024,\n  xl: 1280,\n  '2xl': 1536,\n} as const;\n","import {\n  createContext,\n  useContext,\n  useState,\n  useCallback,\n  type ReactNode,\n} from 'react';\n\n/* --------------------------------------------------------------------------\n   Types\n   -------------------------------------------------------------------------- */\n\nexport interface SidebarContextType {\n  /** Whether the sidebar is collapsed (icon-only mode) */\n  isCollapsed: boolean;\n  /** Toggle between collapsed and expanded */\n  toggleCollapsed: () => void;\n  /** Explicitly set collapsed state */\n  setCollapsed: (collapsed: boolean) => void;\n  /** Whether the mobile sidebar overlay is open */\n  isMobileOpen: boolean;\n  /** Toggle mobile overlay sidebar */\n  toggleMobileOpen: () => void;\n  /** Explicitly set mobile open state */\n  setMobileOpen: (open: boolean) => void;\n}\n\n/* --------------------------------------------------------------------------\n   Context\n   -------------------------------------------------------------------------- */\n\nconst SidebarContext = createContext<SidebarContextType | null>(null);\n\n/* --------------------------------------------------------------------------\n   Provider\n   -------------------------------------------------------------------------- */\n\nexport interface SidebarProviderProps {\n  children: ReactNode;\n  /** Initial collapsed state */\n  defaultCollapsed?: boolean;\n}\n\nexport function SidebarProvider({\n  children,\n  defaultCollapsed = false,\n}: SidebarProviderProps) {\n  const [isCollapsed, setIsCollapsed] = useState(defaultCollapsed);\n  const [isMobileOpen, setIsMobileOpen] = useState(false);\n\n  const toggleCollapsed = useCallback(() => {\n    setIsCollapsed((prev) => !prev);\n  }, []);\n\n  const setCollapsed = useCallback((collapsed: boolean) => {\n    setIsCollapsed(collapsed);\n  }, []);\n\n  const toggleMobileOpen = useCallback(() => {\n    setIsMobileOpen((prev) => !prev);\n  }, []);\n\n  const setMobileOpen = useCallback((open: boolean) => {\n    setIsMobileOpen(open);\n  }, []);\n\n  return (\n    <SidebarContext.Provider\n      value={{\n        isCollapsed,\n        toggleCollapsed,\n        setCollapsed,\n        isMobileOpen,\n        toggleMobileOpen,\n        setMobileOpen,\n      }}\n    >\n      {children}\n    </SidebarContext.Provider>\n  );\n}\n\n/* --------------------------------------------------------------------------\n   Hook\n   -------------------------------------------------------------------------- */\n\nexport function useSidebar(): SidebarContextType {\n  const context = useContext(SidebarContext);\n  if (!context) {\n    throw new Error('useSidebar must be used within a SidebarProvider');\n  }\n  return context;\n}\n","import React, { createContext, useContext, useState, useEffect, type ReactNode } from 'react';\nimport { DashboardProvider as FilterProvider } from '../context/DashboardContext';\nimport { ThemeProvider } from '../theme';\nimport { SidebarProvider } from '../context/SidebarContext';\nimport { ToastProvider } from './feedback/ToastProvider';\n\n/* ==========================================================================\n   DashboardProvider\n   Composes all context providers (Theme, Sidebar, Dashboard/Filters, Toast)\n   into a single wrapper for the dashboard application.\n   ========================================================================== */\n\nexport interface DashboardAppProviderProps {\n  children: ReactNode;\n  /** Whether auto-refresh is enabled by default */\n  defaultAutoRefresh?: boolean;\n  /** Default refresh interval in ms */\n  defaultRefreshInterval?: number;\n}\n\nexport function DashboardAppProvider({\n  children,\n  defaultAutoRefresh = true,\n  defaultRefreshInterval = 30_000,\n}: DashboardAppProviderProps) {\n  return (\n    <ThemeProvider>\n      <SidebarProvider>\n        <FilterProvider\n          defaultAutoRefresh={defaultAutoRefresh}\n          defaultRefreshInterval={defaultRefreshInterval}\n        >\n          <ToastProvider>\n            {children}\n          </ToastProvider>\n        </FilterProvider>\n      </SidebarProvider>\n    </ThemeProvider>\n  );\n}\n\nexport default DashboardAppProvider;\n","/* ==========================================================================\n   Number & Data Formatting Utilities\n   Consistent formatting for KPI values, currencies, percentages, etc.\n   ========================================================================== */\n\n/**\n * Format a large number with abbreviated suffixes (K, M, B).\n * @example formatLargeNumber(1245832) => \"1.25M\"\n */\nexport function formatLargeNumber(value: number, decimals = 2): string {\n  if (value === 0) return '0';\n\n  const absValue = Math.abs(value);\n  const sign = value < 0 ? '-' : '';\n\n  if (absValue >= 1_000_000_000) {\n    return `${sign}${(absValue / 1_000_000_000).toFixed(decimals)}B`;\n  }\n  if (absValue >= 1_000_000) {\n    return `${sign}${(absValue / 1_000_000).toFixed(decimals)}M`;\n  }\n  if (absValue >= 1_000) {\n    return `${sign}${(absValue / 1_000).toFixed(decimals)}K`;\n  }\n  return `${sign}${absValue.toFixed(decimals)}`;\n}\n\n/**\n * Format a number as currency (USD by default).\n * @example formatCurrency(1245832) => \"$1,245,832\"\n */\nexport function formatCurrency(\n  value: number,\n  options: { currency?: string; compact?: boolean; decimals?: number } = {},\n): string {\n  const { currency = 'USD', compact = false, decimals } = options;\n\n  if (compact) {\n    const prefix = currency === 'USD' ? '$' : '';\n    return `${prefix}${formatLargeNumber(value, decimals ?? 1)}`;\n  }\n\n  return new Intl.NumberFormat('en-US', {\n    style: 'currency',\n    currency,\n    minimumFractionDigits: decimals ?? 0,\n    maximumFractionDigits: decimals ?? 0,\n  }).format(value);\n}\n\n/**\n * Format a number as a percentage.\n * @example formatPercentage(15.3) => \"+15.3%\"\n */\nexport function formatPercentage(\n  value: number,\n  options: { showSign?: boolean; decimals?: number } = {},\n): string {\n  const { showSign = false, decimals = 1 } = options;\n  const formatted = value.toFixed(decimals);\n  const sign = showSign && value > 0 ? '+' : '';\n  return `${sign}${formatted}%`;\n}\n\n/**\n * Format a number with locale-aware thousands separators.\n * @example formatNumber(3421) => \"3,421\"\n */\nexport function formatNumber(\n  value: number,\n  options: { decimals?: number; compact?: boolean } = {},\n): string {\n  const { decimals = 0, compact = false } = options;\n\n  if (compact) {\n    return formatLargeNumber(value, decimals);\n  }\n\n  return new Intl.NumberFormat('en-US', {\n    minimumFractionDigits: decimals,\n    maximumFractionDigits: decimals,\n  }).format(value);\n}\n\n/**\n * Format a decimal value (e.g., AOV).\n * @example formatDecimal(64.32) => \"64.32\"\n */\nexport function formatDecimal(value: number, decimals = 2): string {\n  return value.toFixed(decimals);\n}\n\n/**\n * Format a date string for display.\n * @example formatDate(\"2026-02-15\") => \"Feb 15, 2026\"\n */\nexport function formatDate(\n  dateString: string | Date,\n  format: 'short' | 'medium' | 'long' = 'medium',\n): string {\n  const date = typeof dateString === 'string' ? new Date(dateString) : dateString;\n\n  const options: Intl.DateTimeFormatOptions = {\n    short: { month: 'numeric', day: 'numeric' },\n    medium: { month: 'short', day: 'numeric', year: 'numeric' },\n    long: { month: 'long', day: 'numeric', year: 'numeric' },\n  }[format] as Intl.DateTimeFormatOptions;\n\n  return date.toLocaleDateString('en-US', options);\n}\n\n/**\n * Format a KPI value based on its format type.\n */\nexport function formatKPIValue(\n  value: number,\n  format: 'currency' | 'number' | 'percentage' | 'decimal',\n  compact = true,\n): string {\n  switch (format) {\n    case 'currency':\n      return formatCurrency(value, { compact });\n    case 'percentage':\n      return formatPercentage(value);\n    case 'decimal':\n      return formatDecimal(value);\n    case 'number':\n    default:\n      return formatNumber(value, { compact });\n  }\n}\n\n/**\n * Get relative time string.\n * @example getRelativeTime(Date.now() - 60000) => \"1 minute ago\"\n */\nexport function getRelativeTime(timestamp: number): string {\n  const now = Date.now();\n  const diff = now - timestamp;\n\n  if (diff < 60_000) return 'just now';\n  if (diff < 3_600_000) return `${Math.floor(diff / 60_000)}m ago`;\n  if (diff < 86_400_000) return `${Math.floor(diff / 3_600_000)}h ago`;\n  return `${Math.floor(diff / 86_400_000)}d ago`;\n}\n","import React from 'react';\nimport type { KPIData, KPIStatus } from '../../types/dashboard';\nimport { formatKPIValue, formatPercentage } from '../../utils/formatters';\n\n/* ==========================================================================\n   KPICard Component\n   Full-featured KPI card with value, trend, sparkline, comparison,\n   status indicator, and icon support.\n   Uses dashboard design tokens for consistent styling.\n   ========================================================================== */\n\nexport interface KPICardProps {\n  /** KPI data to display */\n  data: KPIData;\n  /** Click handler for drill-down */\n  onClick?: (kpi: KPIData) => void;\n  /** Whether the card is in a loading state */\n  loading?: boolean;\n  /** Compact mode for smaller viewports */\n  compact?: boolean;\n}\n\n/* --------------------------------------------------------------------------\n   Status Helpers\n   -------------------------------------------------------------------------- */\n\nconst STATUS_ICON_MAP: Record<KPIStatus, string> = {\n  positive: 'kpi-icon--success',\n  negative: 'kpi-icon--danger',\n  neutral: 'kpi-icon--primary',\n  warning: 'kpi-icon--warning',\n};\n\nconst TREND_ARROW: Record<string, string> = {\n  up: '\\u2191',   // arrow up\n  down: '\\u2193', // arrow down\n  neutral: '\\u2192', // arrow right\n};\n\n/* --------------------------------------------------------------------------\n   Sparkline Sub-Component\n   -------------------------------------------------------------------------- */\n\ninterface SparklineProps {\n  data: number[];\n  status: KPIStatus;\n  width?: number;\n  height?: number;\n}\n\nfunction Sparkline({ data, status, width = 100, height = 32 }: SparklineProps) {\n  if (!data || data.length < 2) return null;\n\n  const min = Math.min(...data);\n  const max = Math.max(...data);\n  const range = max - min || 1;\n\n  const points = data\n    .map((value, index) => {\n      const x = (index / (data.length - 1)) * width;\n      const y = height - ((value - min) / range) * height;\n      return `${x},${y}`;\n    })\n    .join(' ');\n\n  const colorVar =\n    status === 'positive'\n      ? 'var(--kpi-trend-positive)'\n      : status === 'negative'\n        ? 'var(--kpi-trend-negative)'\n        : 'var(--kpi-trend-neutral)';\n\n  return (\n    <svg\n      className=\"kpi-card__sparkline\"\n      viewBox={`0 0 ${width} ${height}`}\n      preserveAspectRatio=\"none\"\n      aria-hidden=\"true\"\n      role=\"img\"\n    >\n      <polyline\n        points={points}\n        fill=\"none\"\n        stroke={colorVar}\n        strokeWidth=\"2\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n      />\n    </svg>\n  );\n}\n\n/* --------------------------------------------------------------------------\n   KPICard\n   -------------------------------------------------------------------------- */\n\nexport function KPICard({ data, onClick, loading = false, compact = false }: KPICardProps) {\n  const {\n    label,\n    value,\n    trend,\n    trendDirection,\n    status,\n    format,\n    sparkline,\n    icon,\n    comparisonLabel = 'vs last period',\n    target,\n  } = data;\n\n  if (loading) {\n    return <KPICardSkeleton />;\n  }\n\n  const trendClass = `kpi-card__trend kpi-card__trend--${status}`;\n  const iconClass = `kpi-card__icon ${STATUS_ICON_MAP[status]}`;\n  const cardClass = [\n    'kpi-card',\n    compact ? 'kpi-card--compact' : '',\n    onClick ? 'kpi-card--clickable' : '',\n  ]\n    .filter(Boolean)\n    .join(' ');\n\n  const formattedValue = formatKPIValue(value, format);\n  const formattedTrend = formatPercentage(Math.abs(trend), { showSign: false });\n  const progressPercent = target ? Math.min((value / target) * 100, 100) : null;\n\n  return (\n    <article\n      className={cardClass}\n      onClick={onClick ? () => onClick(data) : undefined}\n      role={onClick ? 'button' : undefined}\n      tabIndex={onClick ? 0 : undefined}\n      onKeyDown={\n        onClick\n          ? (e) => {\n              if (e.key === 'Enter' || e.key === ' ') {\n                e.preventDefault();\n                onClick(data);\n              }\n            }\n          : undefined\n      }\n      aria-label={`${label}: ${formattedValue}, ${trendDirection} ${formattedTrend}`}\n    >\n      {/* Header row: label + icon */}\n      <div className=\"kpi-card__header\">\n        <span className=\"kpi-card__label\">{label}</span>\n        {icon && (\n          <span className={iconClass} aria-hidden=\"true\">\n            {icon}\n          </span>\n        )}\n      </div>\n\n      {/* Primary metric */}\n      <div className=\"kpi-card__value\">{formattedValue}</div>\n\n      {/* Trend indicator */}\n      <div className={trendClass}>\n        <span className=\"kpi-card__trend-arrow\" aria-hidden=\"true\">\n          {TREND_ARROW[trendDirection]}\n        </span>\n        <span className=\"kpi-card__trend-value\">{formattedTrend}</span>\n        <span className=\"kpi-card__comparison\">{comparisonLabel}</span>\n      </div>\n\n      {/* Target progress bar */}\n      {progressPercent !== null && (\n        <div className=\"kpi-card__progress\">\n          <div className=\"kpi-card__progress-bar\">\n            <div\n              className=\"kpi-card__progress-fill\"\n              style={{ width: `${progressPercent}%` }}\n              role=\"progressbar\"\n              aria-valuenow={progressPercent}\n              aria-valuemin={0}\n              aria-valuemax={100}\n            />\n          </div>\n          <span className=\"kpi-card__progress-label\">\n            {progressPercent.toFixed(0)}% of target\n          </span>\n        </div>\n      )}\n\n      {/* Sparkline */}\n      {sparkline && sparkline.length > 0 && (\n        <Sparkline data={sparkline} status={status} />\n      )}\n    </article>\n  );\n}\n\n/* --------------------------------------------------------------------------\n   Skeleton Loader\n   -------------------------------------------------------------------------- */\n\nfunction KPICardSkeleton() {\n  return (\n    <div className=\"kpi-card kpi-card--skeleton\" aria-busy=\"true\" aria-label=\"Loading metric\">\n      <div className=\"kpi-card__header\">\n        <span className=\"skeleton skeleton--text skeleton--w-50\" />\n        <span className=\"skeleton skeleton--circle skeleton--sm\" />\n      </div>\n      <div className=\"skeleton skeleton--text skeleton--w-75 skeleton--lg\" />\n      <div className=\"skeleton skeleton--text skeleton--w-40\" />\n      <div className=\"skeleton skeleton--rect skeleton--sparkline\" />\n    </div>\n  );\n}\n\nexport default KPICard;\n","/**\n * useChartColors Hook\n *\n * Provides theme-aware chart colors by reading CSS custom properties.\n * Re-reads colors when theme changes so charts automatically adapt\n * between light/dark/high-contrast modes.\n *\n * Uses the --chart-color-1 through --chart-color-8 design tokens\n * and the getChartColors() helper from the theme system.\n */\n\nimport { useState, useEffect, useCallback } from 'react';\nimport { getChartColors, getTokenValue } from '../theme';\n\nexport interface ChartColorSet {\n  /** Ordered array of series colors (resolved CSS values) */\n  colors: string[];\n  /** Get a specific color by index (wraps around) */\n  getColor: (index: number) => string;\n  /** Chart grid line color */\n  gridColor: string;\n  /** Chart axis line color */\n  axisColor: string;\n  /** Chart axis text color */\n  axisTextColor: string;\n  /** Tooltip background color */\n  tooltipBg: string;\n  /** Tooltip text color */\n  tooltipText: string;\n  /** Card background (for pie stroke separation) */\n  cardBg: string;\n}\n\n/** Fallback colors matching the light-mode design tokens */\nconst FALLBACK_COLORS = [\n  '#3B82F6', // Blue\n  '#10B981', // Green\n  '#F59E0B', // Amber\n  '#8B5CF6', // Purple\n  '#EC4899', // Pink\n  '#14B8A6', // Teal\n  '#F97316', // Orange\n  '#6366F1', // Indigo\n];\n\nexport function useChartColors(count: number = 8): ChartColorSet {\n  const [colorSet, setColorSet] = useState<ChartColorSet>(() =>\n    buildColorSet(count),\n  );\n\n  // Re-read colors when the theme attribute changes\n  useEffect(() => {\n    const observer = new MutationObserver(() => {\n      // Small delay to let CSS variables resolve after theme switch\n      requestAnimationFrame(() => {\n        setColorSet(buildColorSet(count));\n      });\n    });\n\n    observer.observe(document.documentElement, {\n      attributes: true,\n      attributeFilter: ['data-theme'],\n    });\n\n    // Also set initial\n    setColorSet(buildColorSet(count));\n\n    return () => observer.disconnect();\n  }, [count]);\n\n  return colorSet;\n}\n\nfunction buildColorSet(count: number): ChartColorSet {\n  const resolved = getChartColors(count);\n  const colors =\n    resolved.length >= count ? resolved : [...resolved, ...FALLBACK_COLORS].slice(0, count);\n\n  const getColor = (index: number) => colors[index % colors.length];\n\n  return {\n    colors,\n    getColor,\n    gridColor: getTokenValue('--chart-grid-color') || '#f3f4f6',\n    axisColor: getTokenValue('--chart-axis-color') || '#d1d5db',\n    axisTextColor: getTokenValue('--chart-axis-text-color') || '#9ca3af',\n    tooltipBg: getTokenValue('--chart-tooltip-bg') || '#111827',\n    tooltipText: getTokenValue('--chart-tooltip-text') || '#ffffff',\n    cardBg: getTokenValue('--card-bg') || '#ffffff',\n  };\n}\n\nexport default useChartColors;\n","/**\n * ChartTooltip\n *\n * Custom tooltip component for Recharts that uses design tokens\n * for consistent styling across light and dark themes.\n * Supports currency, number, and percentage formatting.\n */\n\nimport React from 'react';\nimport type { TooltipProps } from 'recharts';\nimport { formatCurrency, formatNumber, formatPercentage } from '../../utils/formatters';\n\nexport type TooltipFormatType = 'currency' | 'number' | 'percentage' | 'default';\n\nexport interface ChartTooltipProps extends TooltipProps<number, string> {\n  /** Format type applied to values */\n  formatType?: TooltipFormatType;\n  /** Custom value formatter (overrides formatType) */\n  valueFormatter?: (value: number) => string;\n  /** Custom label formatter for the header line */\n  labelFormatter?: (label: string) => string;\n}\n\nexport function ChartTooltip({\n  active,\n  payload,\n  label,\n  formatType = 'default',\n  valueFormatter,\n  labelFormatter,\n}: ChartTooltipProps) {\n  if (!active || !payload || payload.length === 0) {\n    return null;\n  }\n\n  const formattedLabel = labelFormatter ? labelFormatter(String(label)) : String(label);\n\n  return (\n    <div className=\"recharts-custom-tooltip\" role=\"tooltip\">\n      <p className=\"recharts-custom-tooltip__label\">{formattedLabel}</p>\n      <ul className=\"recharts-custom-tooltip__list\">\n        {payload.map((entry, index) => {\n          const value = entry.value as number;\n          const formattedValue = valueFormatter\n            ? valueFormatter(value)\n            : formatByType(value, formatType);\n\n          return (\n            <li key={index} className=\"recharts-custom-tooltip__item\">\n              <span\n                className=\"recharts-custom-tooltip__dot\"\n                style={{ backgroundColor: entry.color }}\n                aria-hidden=\"true\"\n              />\n              <span className=\"recharts-custom-tooltip__name\">{entry.name}</span>\n              <span className=\"recharts-custom-tooltip__value\">{formattedValue}</span>\n            </li>\n          );\n        })}\n      </ul>\n    </div>\n  );\n}\n\nfunction formatByType(value: number, type: TooltipFormatType): string {\n  switch (type) {\n    case 'currency':\n      return formatCurrency(value);\n    case 'number':\n      return formatNumber(value);\n    case 'percentage':\n      return formatPercentage(value);\n    default:\n      return typeof value === 'number' ? value.toLocaleString() : String(value);\n  }\n}\n\nexport default ChartTooltip;\n","/**\n * AccessibleChartWrapper\n *\n * WCAG 2.1 AA compliant wrapper for all chart components. Provides:\n * - Semantic HTML structure with role=\"img\" and aria-label\n * - A visually-hidden data table fallback for screen readers\n * - Keyboard navigation support\n * - Reduced-motion detection for disabling animations\n * - Announces data updates via aria-live region\n *\n * Usage:\n *   <AccessibleChartWrapper\n *     title=\"Revenue Trend\"\n *     description=\"Monthly revenue from Jan to Dec 2025\"\n *     data={chartData}\n *     columns={['Month', 'Revenue', 'Target']}\n *     dataKeys={['month', 'revenue', 'target']}\n *   >\n *     <LineChart ... />\n *   </AccessibleChartWrapper>\n */\n\nimport React, { useId, useState, useCallback, useEffect } from 'react';\n\nexport interface AccessibleChartWrapperProps {\n  /** Accessible label describing the chart */\n  title: string;\n  /** Extended description of what the chart shows */\n  description?: string;\n  /** Raw chart data for the data table fallback */\n  data: Record<string, any>[];\n  /** Column headers for the data table */\n  columns: string[];\n  /** Data keys matching the columns */\n  dataKeys: string[];\n  /** Value formatter per column (optional) */\n  formatters?: Record<string, (value: any) => string>;\n  /** Chart content */\n  children: React.ReactNode;\n  /** Additional className */\n  className?: string;\n  /** Whether to show the data table toggle button */\n  showTableToggle?: boolean;\n}\n\nexport function AccessibleChartWrapper({\n  title,\n  description,\n  data,\n  columns,\n  dataKeys,\n  formatters = {},\n  children,\n  className = '',\n  showTableToggle = true,\n}: AccessibleChartWrapperProps) {\n  const id = useId();\n  const labelId = `${id}-label`;\n  const descId = `${id}-desc`;\n  const tableId = `${id}-table`;\n  const liveId = `${id}-live`;\n\n  const [showTable, setShowTable] = useState(false);\n  const [prefersReducedMotion, setPrefersReducedMotion] = useState(false);\n\n  // Detect reduced motion preference\n  useEffect(() => {\n    const mq = window.matchMedia('(prefers-reduced-motion: reduce)');\n    setPrefersReducedMotion(mq.matches);\n\n    const handler = (e: MediaQueryListEvent) => setPrefersReducedMotion(e.matches);\n    mq.addEventListener('change', handler);\n    return () => mq.removeEventListener('change', handler);\n  }, []);\n\n  const toggleTable = useCallback(() => {\n    setShowTable((prev) => !prev);\n  }, []);\n\n  const formatValue = useCallback(\n    (key: string, value: any) => {\n      if (formatters[key]) {\n        return formatters[key](value);\n      }\n      if (typeof value === 'number') {\n        return value.toLocaleString();\n      }\n      return String(value ?? '');\n    },\n    [formatters],\n  );\n\n  return (\n    <figure\n      className={`accessible-chart ${className}`.trim()}\n      role=\"img\"\n      aria-labelledby={labelId}\n      aria-describedby={description ? descId : undefined}\n      data-reduced-motion={prefersReducedMotion ? 'true' : undefined}\n    >\n      {/* Visually hidden label for screen readers */}\n      <figcaption className=\"sr-only\" id={labelId}>\n        {title}\n      </figcaption>\n\n      {description && (\n        <p className=\"sr-only\" id={descId}>\n          {description}\n        </p>\n      )}\n\n      {/* Live region for dynamic data updates */}\n      <div\n        id={liveId}\n        className=\"sr-only\"\n        aria-live=\"polite\"\n        aria-atomic=\"true\"\n        role=\"status\"\n      >\n        {title}: {data.length} data points\n      </div>\n\n      {/* Chart visualization */}\n      <div className=\"accessible-chart__visual\">\n        {children}\n      </div>\n\n      {/* Data table toggle */}\n      {showTableToggle && (\n        <div className=\"accessible-chart__controls\">\n          <button\n            className=\"accessible-chart__table-toggle\"\n            onClick={toggleTable}\n            aria-expanded={showTable}\n            aria-controls={tableId}\n          >\n            {showTable ? 'Hide data table' : 'Show data table'}\n          </button>\n        </div>\n      )}\n\n      {/* Accessible data table fallback */}\n      {showTable && (\n        <div className=\"accessible-chart__table-container\" id={tableId}>\n          <table className=\"accessible-chart__table\" role=\"table\">\n            <caption className=\"sr-only\">{title} - Data Table</caption>\n            <thead>\n              <tr>\n                {columns.map((col, i) => (\n                  <th key={i} scope=\"col\">\n                    {col}\n                  </th>\n                ))}\n              </tr>\n            </thead>\n            <tbody>\n              {data.map((row, rowIdx) => (\n                <tr key={rowIdx}>\n                  {dataKeys.map((key, colIdx) => (\n                    <td key={colIdx}>{formatValue(key, row[key])}</td>\n                  ))}\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      )}\n    </figure>\n  );\n}\n\nexport default AccessibleChartWrapper;\n","/**\n * Colorblind-Safe Palette Utilities\n *\n * Provides multiple colorblind-safe palettes and utility functions\n * for accessible data visualization. All palettes avoid red/green\n * combinations and have been validated against common forms of\n * color vision deficiency (deuteranopia, protanopia, tritanopia).\n *\n * Reference: IBM Design Color Blind Safe palette, Wong (2011),\n * and Paul Tol's qualitative color schemes.\n */\n\n/* --------------------------------------------------------------------------\n   Palette Definitions\n   -------------------------------------------------------------------------- */\n\n/** IBM Design colorblind-safe palette */\nexport const IBM_PALETTE = [\n  '#648FFF', // Blue\n  '#785EF0', // Purple\n  '#DC267F', // Magenta\n  '#FE6100', // Orange\n  '#FFB000', // Yellow\n] as const;\n\n/** Wong (2011) colorblind-safe palette - widely used in scientific publications */\nexport const WONG_PALETTE = [\n  '#0072B2', // Blue\n  '#E69F00', // Orange\n  '#009E73', // Bluish Green\n  '#F0E442', // Yellow\n  '#56B4E9', // Sky Blue\n  '#D55E00', // Vermillion\n  '#CC79A7', // Reddish Purple\n  '#000000', // Black\n] as const;\n\n/** Paul Tol's qualitative scheme - optimized for colorblindness */\nexport const TOL_PALETTE = [\n  '#332288', // Indigo\n  '#88CCEE', // Cyan\n  '#44AA99', // Teal\n  '#117733', // Green\n  '#999933', // Olive\n  '#DDCC77', // Sand\n  '#CC6677', // Rose\n  '#882255', // Wine\n  '#AA4499', // Purple\n] as const;\n\n/** Dashboard default: designed to work with both light and dark themes */\nexport const DASHBOARD_PALETTE = [\n  '#3B82F6', // Blue\n  '#10B981', // Emerald\n  '#F59E0B', // Amber\n  '#8B5CF6', // Violet\n  '#EC4899', // Pink\n  '#14B8A6', // Teal\n  '#F97316', // Orange\n  '#6366F1', // Indigo\n] as const;\n\n/** Dashboard dark mode variant with higher luminance */\nexport const DASHBOARD_PALETTE_DARK = [\n  '#60A5FA', // Blue\n  '#34D399', // Emerald\n  '#FBBF24', // Amber\n  '#A78BFA', // Violet\n  '#F472B6', // Pink\n  '#2DD4BF', // Teal\n  '#FB923C', // Orange\n  '#818CF8', // Indigo\n] as const;\n\nexport type PaletteName = 'ibm' | 'wong' | 'tol' | 'dashboard' | 'dashboard-dark';\n\nconst PALETTES: Record<PaletteName, readonly string[]> = {\n  ibm: IBM_PALETTE,\n  wong: WONG_PALETTE,\n  tol: TOL_PALETTE,\n  dashboard: DASHBOARD_PALETTE,\n  'dashboard-dark': DASHBOARD_PALETTE_DARK,\n};\n\n/* --------------------------------------------------------------------------\n   Utility Functions\n   -------------------------------------------------------------------------- */\n\n/**\n * Get a named palette.\n */\nexport function getPalette(name: PaletteName): readonly string[] {\n  return PALETTES[name] ?? DASHBOARD_PALETTE;\n}\n\n/**\n * Generate N distinct colors from a palette, cycling if necessary.\n */\nexport function getDistinctColors(count: number, palette: PaletteName = 'dashboard'): string[] {\n  const base = PALETTES[palette] ?? DASHBOARD_PALETTE;\n  const result: string[] = [];\n  for (let i = 0; i < count; i++) {\n    result.push(base[i % base.length] as string);\n  }\n  return result;\n}\n\n/**\n * Calculate relative luminance of a hex color (WCAG 2.1 formula).\n */\nexport function relativeLuminance(hex: string): number {\n  const rgb = hexToRgb(hex);\n  if (!rgb) return 0;\n\n  const [r, g, b] = [rgb.r / 255, rgb.g / 255, rgb.b / 255].map((c) =>\n    c <= 0.03928 ? c / 12.92 : Math.pow((c + 0.055) / 1.055, 2.4),\n  );\n  return 0.2126 * r + 0.7152 * g + 0.0722 * b;\n}\n\n/**\n * Calculate contrast ratio between two hex colors (WCAG 2.1).\n * Returns a value between 1 and 21.\n */\nexport function contrastRatio(hex1: string, hex2: string): number {\n  const lum1 = relativeLuminance(hex1);\n  const lum2 = relativeLuminance(hex2);\n  const lighter = Math.max(lum1, lum2);\n  const darker = Math.min(lum1, lum2);\n  return (lighter + 0.05) / (darker + 0.05);\n}\n\n/**\n * Check if a color meets WCAG 2.1 AA contrast against a background.\n * Non-text UI components require 3:1, text requires 4.5:1.\n */\nexport function meetsContrastAA(\n  foreground: string,\n  background: string,\n  isText: boolean = false,\n): boolean {\n  const ratio = contrastRatio(foreground, background);\n  return isText ? ratio >= 4.5 : ratio >= 3;\n}\n\n/**\n * Generate a pattern identifier for a series index.\n * Patterns provide a secondary visual channel beyond color.\n */\nexport type PatternType = 'solid' | 'dashed' | 'dotted' | 'dash-dot' | 'long-dash';\n\nexport function getSeriesPattern(index: number): PatternType {\n  const patterns: PatternType[] = ['solid', 'dashed', 'dotted', 'dash-dot', 'long-dash'];\n  return patterns[index % patterns.length];\n}\n\n/**\n * Get the SVG stroke-dasharray value for a pattern type.\n */\nexport function getStrokeDasharray(pattern: PatternType): string {\n  switch (pattern) {\n    case 'solid':\n      return 'none';\n    case 'dashed':\n      return '8 4';\n    case 'dotted':\n      return '2 4';\n    case 'dash-dot':\n      return '8 4 2 4';\n    case 'long-dash':\n      return '16 6';\n    default:\n      return 'none';\n  }\n}\n\n/* --------------------------------------------------------------------------\n   Internal Helpers\n   -------------------------------------------------------------------------- */\n\nfunction hexToRgb(hex: string): { r: number; g: number; b: number } | null {\n  const clean = hex.replace('#', '');\n  if (clean.length !== 6) return null;\n\n  return {\n    r: parseInt(clean.substring(0, 2), 16),\n    g: parseInt(clean.substring(2, 4), 16),\n    b: parseInt(clean.substring(4, 6), 16),\n  };\n}\n","/**\n * LineChartRenderer\n *\n * Recharts-based line chart with theme-aware colors, accessible tooltips,\n * responsive sizing, and smooth animations. Supports multiple series\n * with colorblind-safe differentiation via dash patterns.\n */\n\nimport React, { useCallback } from 'react';\nimport {\n  LineChart,\n  Line,\n  XAxis,\n  YAxis,\n  CartesianGrid,\n  Tooltip,\n  Legend,\n  ResponsiveContainer,\n  ReferenceLine,\n} from 'recharts';\nimport { useChartColors } from '../../hooks/useChartColors';\nimport { ChartTooltip } from './ChartTooltip';\nimport { AccessibleChartWrapper } from './AccessibleChartWrapper';\nimport { getStrokeDasharray, getSeriesPattern } from '../../utils/colorblind';\nimport type { ChartSeries, ChartDataPoint } from '../../types/dashboard';\nimport type { TooltipFormatType } from './ChartTooltip';\n\nexport interface LineChartRendererProps {\n  /** Chart data points */\n  data: ChartDataPoint[];\n  /** Data series definitions */\n  series: ChartSeries[];\n  /** X-axis data key */\n  xAxisKey: string;\n  /** Chart height in pixels */\n  height?: number;\n  /** Show grid lines */\n  showGrid?: boolean;\n  /** Show legend */\n  showLegend?: boolean;\n  /** Value format type for tooltips */\n  formatType?: TooltipFormatType;\n  /** Custom value formatter */\n  valueFormatter?: (value: number) => string;\n  /** Custom label formatter for x-axis tooltip display */\n  labelFormatter?: (label: string) => string;\n  /** Chart title for accessibility */\n  title?: string;\n  /** Chart description for accessibility */\n  description?: string;\n  /** Whether to show colorblind patterns on lines */\n  usePatterns?: boolean;\n  /** Animate transitions */\n  animate?: boolean;\n  /** Reference line value (e.g., target) */\n  referenceLine?: { value: number; label: string; color?: string };\n  /** Click handler for data points */\n  onDataPointClick?: (data: any, index: number) => void;\n}\n\nexport function LineChartRenderer({\n  data,\n  series,\n  xAxisKey,\n  height = 300,\n  showGrid = true,\n  showLegend = true,\n  formatType = 'default',\n  valueFormatter,\n  labelFormatter,\n  title = 'Line Chart',\n  description,\n  usePatterns = true,\n  animate = true,\n  referenceLine,\n  onDataPointClick,\n}: LineChartRendererProps) {\n  const chartColors = useChartColors(series.length);\n\n  const handleClick = useCallback(\n    (data: any, index: number) => {\n      onDataPointClick?.(data, index);\n    },\n    [onDataPointClick],\n  );\n\n  // Build accessible data table columns\n  const columns = [xAxisKey, ...series.map((s) => s.name)];\n  const dataKeys = [xAxisKey, ...series.map((s) => s.dataKey)];\n  const formatters: Record<string, (v: any) => string> = {};\n  if (valueFormatter) {\n    series.forEach((s) => {\n      formatters[s.dataKey] = valueFormatter;\n    });\n  }\n\n  return (\n    <AccessibleChartWrapper\n      title={title}\n      description={description}\n      data={data}\n      columns={columns}\n      dataKeys={dataKeys}\n      formatters={formatters}\n    >\n      <ResponsiveContainer width=\"100%\" height={height}>\n        <LineChart\n          data={data}\n          margin={{ top: 8, right: 16, left: 0, bottom: 0 }}\n          onClick={(e) => {\n            if (e?.activePayload && onDataPointClick) {\n              handleClick(e.activePayload[0]?.payload, e.activeTooltipIndex ?? 0);\n            }\n          }}\n        >\n          {showGrid && (\n            <CartesianGrid\n              strokeDasharray=\"3 3\"\n              stroke={chartColors.gridColor}\n              vertical={false}\n            />\n          )}\n\n          <XAxis\n            dataKey={xAxisKey}\n            stroke={chartColors.axisColor}\n            tick={{ fill: chartColors.axisTextColor, fontSize: 12 }}\n            tickLine={false}\n            axisLine={{ stroke: chartColors.axisColor }}\n          />\n\n          <YAxis\n            stroke={chartColors.axisColor}\n            tick={{ fill: chartColors.axisTextColor, fontSize: 12 }}\n            tickLine={false}\n            axisLine={false}\n            tickFormatter={valueFormatter}\n          />\n\n          <Tooltip\n            content={\n              <ChartTooltip\n                formatType={formatType}\n                valueFormatter={valueFormatter}\n                labelFormatter={labelFormatter}\n              />\n            }\n          />\n\n          {showLegend && (\n            <Legend\n              wrapperStyle={{ paddingTop: 16, fontSize: 12 }}\n            />\n          )}\n\n          {referenceLine && (\n            <ReferenceLine\n              y={referenceLine.value}\n              stroke={referenceLine.color || chartColors.getColor(series.length)}\n              strokeDasharray=\"8 4\"\n              label={{\n                value: referenceLine.label,\n                fill: chartColors.axisTextColor,\n                fontSize: 11,\n              }}\n            />\n          )}\n\n          {series.map((s, i) => {\n            const color = s.color || chartColors.getColor(i);\n            const pattern = usePatterns ? getSeriesPattern(i) : 'solid';\n            const dashArray = getStrokeDasharray(pattern);\n\n            return (\n              <Line\n                key={s.dataKey}\n                type=\"monotone\"\n                dataKey={s.dataKey}\n                name={s.name}\n                stroke={color}\n                strokeWidth={2}\n                strokeDasharray={dashArray !== 'none' ? dashArray : undefined}\n                dot={{ r: 3, fill: color, strokeWidth: 0 }}\n                activeDot={{\n                  r: 6,\n                  fill: color,\n                  stroke: chartColors.cardBg,\n                  strokeWidth: 2,\n                }}\n                isAnimationActive={animate}\n                animationDuration={800}\n                animationEasing=\"ease-out\"\n              />\n            );\n          })}\n        </LineChart>\n      </ResponsiveContainer>\n    </AccessibleChartWrapper>\n  );\n}\n\nexport default LineChartRenderer;\n","/**\n * AreaChartRenderer\n *\n * Recharts-based area chart with gradient fills, theme-aware colors,\n * accessible tooltips, and responsive sizing. Ideal for showing\n * magnitude and trends over time.\n */\n\nimport React, { useCallback, useId } from 'react';\nimport {\n  AreaChart,\n  Area,\n  XAxis,\n  YAxis,\n  CartesianGrid,\n  Tooltip,\n  Legend,\n  ResponsiveContainer,\n  ReferenceLine,\n} from 'recharts';\nimport { useChartColors } from '../../hooks/useChartColors';\nimport { ChartTooltip } from './ChartTooltip';\nimport { AccessibleChartWrapper } from './AccessibleChartWrapper';\nimport type { ChartSeries, ChartDataPoint } from '../../types/dashboard';\nimport type { TooltipFormatType } from './ChartTooltip';\n\nexport interface AreaChartRendererProps {\n  /** Chart data points */\n  data: ChartDataPoint[];\n  /** Data series definitions */\n  series: ChartSeries[];\n  /** X-axis data key */\n  xAxisKey: string;\n  /** Chart height in pixels */\n  height?: number;\n  /** Show grid lines */\n  showGrid?: boolean;\n  /** Show legend */\n  showLegend?: boolean;\n  /** Stack areas */\n  stacked?: boolean;\n  /** Value format type for tooltips */\n  formatType?: TooltipFormatType;\n  /** Custom value formatter */\n  valueFormatter?: (value: number) => string;\n  /** Custom label formatter */\n  labelFormatter?: (label: string) => string;\n  /** Chart title for accessibility */\n  title?: string;\n  /** Chart description for accessibility */\n  description?: string;\n  /** Animate transitions */\n  animate?: boolean;\n  /** Gradient fill opacity */\n  fillOpacity?: number;\n  /** Reference line */\n  referenceLine?: { value: number; label: string; color?: string };\n  /** Click handler */\n  onDataPointClick?: (data: any, index: number) => void;\n}\n\nexport function AreaChartRenderer({\n  data,\n  series,\n  xAxisKey,\n  height = 300,\n  showGrid = true,\n  showLegend = true,\n  stacked = false,\n  formatType = 'default',\n  valueFormatter,\n  labelFormatter,\n  title = 'Area Chart',\n  description,\n  animate = true,\n  fillOpacity = 0.15,\n  referenceLine,\n  onDataPointClick,\n}: AreaChartRendererProps) {\n  const chartColors = useChartColors(series.length);\n  const gradientId = useId();\n\n  const handleClick = useCallback(\n    (data: any, index: number) => {\n      onDataPointClick?.(data, index);\n    },\n    [onDataPointClick],\n  );\n\n  const columns = [xAxisKey, ...series.map((s) => s.name)];\n  const dataKeys = [xAxisKey, ...series.map((s) => s.dataKey)];\n  const formatters: Record<string, (v: any) => string> = {};\n  if (valueFormatter) {\n    series.forEach((s) => {\n      formatters[s.dataKey] = valueFormatter;\n    });\n  }\n\n  return (\n    <AccessibleChartWrapper\n      title={title}\n      description={description}\n      data={data}\n      columns={columns}\n      dataKeys={dataKeys}\n      formatters={formatters}\n    >\n      <ResponsiveContainer width=\"100%\" height={height}>\n        <AreaChart\n          data={data}\n          margin={{ top: 8, right: 16, left: 0, bottom: 0 }}\n          onClick={(e) => {\n            if (e?.activePayload && onDataPointClick) {\n              handleClick(e.activePayload[0]?.payload, e.activeTooltipIndex ?? 0);\n            }\n          }}\n        >\n          <defs>\n            {series.map((s, i) => {\n              const color = s.color || chartColors.getColor(i);\n              const gid = `${gradientId}-gradient-${i}`;\n              return (\n                <linearGradient key={gid} id={gid} x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                  <stop offset=\"0%\" stopColor={color} stopOpacity={fillOpacity * 2.5} />\n                  <stop offset=\"95%\" stopColor={color} stopOpacity={0.02} />\n                </linearGradient>\n              );\n            })}\n          </defs>\n\n          {showGrid && (\n            <CartesianGrid\n              strokeDasharray=\"3 3\"\n              stroke={chartColors.gridColor}\n              vertical={false}\n            />\n          )}\n\n          <XAxis\n            dataKey={xAxisKey}\n            stroke={chartColors.axisColor}\n            tick={{ fill: chartColors.axisTextColor, fontSize: 12 }}\n            tickLine={false}\n            axisLine={{ stroke: chartColors.axisColor }}\n          />\n\n          <YAxis\n            stroke={chartColors.axisColor}\n            tick={{ fill: chartColors.axisTextColor, fontSize: 12 }}\n            tickLine={false}\n            axisLine={false}\n            tickFormatter={valueFormatter}\n          />\n\n          <Tooltip\n            content={\n              <ChartTooltip\n                formatType={formatType}\n                valueFormatter={valueFormatter}\n                labelFormatter={labelFormatter}\n              />\n            }\n          />\n\n          {showLegend && (\n            <Legend wrapperStyle={{ paddingTop: 16, fontSize: 12 }} />\n          )}\n\n          {referenceLine && (\n            <ReferenceLine\n              y={referenceLine.value}\n              stroke={referenceLine.color || chartColors.getColor(series.length)}\n              strokeDasharray=\"8 4\"\n              label={{\n                value: referenceLine.label,\n                fill: chartColors.axisTextColor,\n                fontSize: 11,\n              }}\n            />\n          )}\n\n          {series.map((s, i) => {\n            const color = s.color || chartColors.getColor(i);\n            const gid = `${gradientId}-gradient-${i}`;\n\n            return (\n              <Area\n                key={s.dataKey}\n                type=\"monotone\"\n                dataKey={s.dataKey}\n                name={s.name}\n                stroke={color}\n                strokeWidth={2}\n                fill={`url(#${gid})`}\n                fillOpacity={1}\n                stackId={stacked ? 'stack' : undefined}\n                dot={false}\n                activeDot={{\n                  r: 5,\n                  fill: color,\n                  stroke: chartColors.cardBg,\n                  strokeWidth: 2,\n                }}\n                isAnimationActive={animate}\n                animationDuration={800}\n                animationEasing=\"ease-out\"\n              />\n            );\n          })}\n        </AreaChart>\n      </ResponsiveContainer>\n    </AccessibleChartWrapper>\n  );\n}\n\nexport default AreaChartRenderer;\n","/**\n * BarChartRenderer\n *\n * Recharts-based bar chart for comparing categorical data.\n * Supports grouped and stacked modes, theme-aware colors,\n * accessible tooltips, colorblind-safe patterns, and click interactions.\n */\n\nimport React, { useCallback, useState } from 'react';\nimport {\n  BarChart,\n  Bar,\n  XAxis,\n  YAxis,\n  CartesianGrid,\n  Tooltip,\n  Legend,\n  ResponsiveContainer,\n  Cell,\n} from 'recharts';\nimport { useChartColors } from '../../hooks/useChartColors';\nimport { ChartTooltip } from './ChartTooltip';\nimport { AccessibleChartWrapper } from './AccessibleChartWrapper';\nimport type { ChartSeries, ChartDataPoint } from '../../types/dashboard';\nimport type { TooltipFormatType } from './ChartTooltip';\n\nexport interface BarChartRendererProps {\n  /** Chart data points */\n  data: ChartDataPoint[];\n  /** Data series definitions */\n  series: ChartSeries[];\n  /** X-axis data key (category axis) */\n  xAxisKey: string;\n  /** Chart height in pixels */\n  height?: number;\n  /** Show grid lines */\n  showGrid?: boolean;\n  /** Show legend */\n  showLegend?: boolean;\n  /** Stack bars instead of grouping */\n  stacked?: boolean;\n  /** Horizontal bar layout */\n  horizontal?: boolean;\n  /** Value format type for tooltips */\n  formatType?: TooltipFormatType;\n  /** Custom value formatter */\n  valueFormatter?: (value: number) => string;\n  /** Custom label formatter */\n  labelFormatter?: (label: string) => string;\n  /** Chart title for accessibility */\n  title?: string;\n  /** Chart description for accessibility */\n  description?: string;\n  /** Animate transitions */\n  animate?: boolean;\n  /** Bar corner radius */\n  barRadius?: number;\n  /** Bar gap ratio (0-1) */\n  barGap?: number;\n  /** Click handler */\n  onBarClick?: (data: any, index: number, seriesKey: string) => void;\n}\n\nexport function BarChartRenderer({\n  data,\n  series,\n  xAxisKey,\n  height = 300,\n  showGrid = true,\n  showLegend = true,\n  stacked = false,\n  horizontal = false,\n  formatType = 'default',\n  valueFormatter,\n  labelFormatter,\n  title = 'Bar Chart',\n  description,\n  animate = true,\n  barRadius = 4,\n  barGap = 0.1,\n  onBarClick,\n}: BarChartRendererProps) {\n  const chartColors = useChartColors(series.length);\n  const [activeBarIndex, setActiveBarIndex] = useState<number | null>(null);\n\n  const handleBarClick = useCallback(\n    (data: any, index: number, seriesKey: string) => {\n      onBarClick?.(data, index, seriesKey);\n    },\n    [onBarClick],\n  );\n\n  const columns = [xAxisKey, ...series.map((s) => s.name)];\n  const dataKeys = [xAxisKey, ...series.map((s) => s.dataKey)];\n  const formatters: Record<string, (v: any) => string> = {};\n  if (valueFormatter) {\n    series.forEach((s) => {\n      formatters[s.dataKey] = valueFormatter;\n    });\n  }\n\n  // For layout direction\n  const ChartComponent = BarChart;\n  const categoryAxis = horizontal ? (\n    <YAxis\n      type=\"category\"\n      dataKey={xAxisKey}\n      stroke={chartColors.axisColor}\n      tick={{ fill: chartColors.axisTextColor, fontSize: 12 }}\n      tickLine={false}\n      axisLine={false}\n      width={120}\n    />\n  ) : (\n    <XAxis\n      dataKey={xAxisKey}\n      stroke={chartColors.axisColor}\n      tick={{ fill: chartColors.axisTextColor, fontSize: 12 }}\n      tickLine={false}\n      axisLine={{ stroke: chartColors.axisColor }}\n      interval={0}\n      angle={data.length > 6 ? -35 : 0}\n      textAnchor={data.length > 6 ? 'end' : 'middle'}\n      height={data.length > 6 ? 60 : 30}\n    />\n  );\n\n  const valueAxis = horizontal ? (\n    <XAxis\n      type=\"number\"\n      stroke={chartColors.axisColor}\n      tick={{ fill: chartColors.axisTextColor, fontSize: 12 }}\n      tickLine={false}\n      axisLine={false}\n      tickFormatter={valueFormatter}\n    />\n  ) : (\n    <YAxis\n      stroke={chartColors.axisColor}\n      tick={{ fill: chartColors.axisTextColor, fontSize: 12 }}\n      tickLine={false}\n      axisLine={false}\n      tickFormatter={valueFormatter}\n    />\n  );\n\n  return (\n    <AccessibleChartWrapper\n      title={title}\n      description={description}\n      data={data}\n      columns={columns}\n      dataKeys={dataKeys}\n      formatters={formatters}\n    >\n      <ResponsiveContainer width=\"100%\" height={height}>\n        <ChartComponent\n          data={data}\n          layout={horizontal ? 'vertical' : 'horizontal'}\n          margin={{ top: 8, right: 16, left: 0, bottom: data.length > 6 && !horizontal ? 24 : 0 }}\n          barGap={barGap}\n        >\n          {showGrid && (\n            <CartesianGrid\n              strokeDasharray=\"3 3\"\n              stroke={chartColors.gridColor}\n              horizontal={!horizontal}\n              vertical={horizontal}\n            />\n          )}\n\n          {categoryAxis}\n          {valueAxis}\n\n          <Tooltip\n            content={\n              <ChartTooltip\n                formatType={formatType}\n                valueFormatter={valueFormatter}\n                labelFormatter={labelFormatter}\n              />\n            }\n            cursor={{ fill: chartColors.gridColor, opacity: 0.3 }}\n          />\n\n          {showLegend && (\n            <Legend wrapperStyle={{ paddingTop: 16, fontSize: 12 }} />\n          )}\n\n          {series.map((s, i) => {\n            const color = s.color || chartColors.getColor(i);\n            const radius: [number, number, number, number] = stacked\n              ? i === series.length - 1\n                ? [barRadius, barRadius, 0, 0]\n                : [0, 0, 0, 0]\n              : [barRadius, barRadius, 0, 0];\n\n            return (\n              <Bar\n                key={s.dataKey}\n                dataKey={s.dataKey}\n                name={s.name}\n                fill={color}\n                stackId={stacked ? 'stack' : undefined}\n                radius={horizontal ? [0, barRadius, barRadius, 0] : radius}\n                isAnimationActive={animate}\n                animationDuration={600}\n                animationEasing=\"ease-out\"\n                cursor={onBarClick ? 'pointer' : undefined}\n                onClick={(data, index) => handleBarClick(data, index, s.dataKey)}\n                onMouseEnter={(_, index) => setActiveBarIndex(index)}\n                onMouseLeave={() => setActiveBarIndex(null)}\n              >\n                {data.map((_, idx) => (\n                  <Cell\n                    key={idx}\n                    fill={color}\n                    opacity={activeBarIndex !== null && activeBarIndex !== idx ? 0.5 : 0.85}\n                  />\n                ))}\n              </Bar>\n            );\n          })}\n        </ChartComponent>\n      </ResponsiveContainer>\n    </AccessibleChartWrapper>\n  );\n}\n\nexport default BarChartRenderer;\n","/**\n * PieChartRenderer\n *\n * Recharts-based pie/donut chart for part-to-whole composition.\n * Features interactive hover states, label rendering, theme-aware\n * colors, and accessible data table fallback. Supports max 6-8\n * slices per accessibility best practices.\n */\n\nimport React, { useCallback, useState } from 'react';\nimport {\n  PieChart,\n  Pie,\n  Cell,\n  Tooltip,\n  Legend,\n  ResponsiveContainer,\n  Sector,\n} from 'recharts';\nimport { useChartColors } from '../../hooks/useChartColors';\nimport { ChartTooltip } from './ChartTooltip';\nimport { AccessibleChartWrapper } from './AccessibleChartWrapper';\nimport type { ChartSeries, ChartDataPoint } from '../../types/dashboard';\nimport type { TooltipFormatType } from './ChartTooltip';\n\nexport interface PieChartRendererProps {\n  /** Chart data points */\n  data: ChartDataPoint[];\n  /** Series definition (uses first series for value key) */\n  series: ChartSeries[];\n  /** Label key for each slice */\n  labelKey: string;\n  /** Chart height in pixels */\n  height?: number;\n  /** Show legend */\n  showLegend?: boolean;\n  /** Donut mode (inner radius > 0) */\n  donut?: boolean;\n  /** Value format type for tooltips */\n  formatType?: TooltipFormatType;\n  /** Custom value formatter */\n  valueFormatter?: (value: number) => string;\n  /** Chart title for accessibility */\n  title?: string;\n  /** Chart description for accessibility */\n  description?: string;\n  /** Animate transitions */\n  animate?: boolean;\n  /** Show percentage labels on slices */\n  showLabels?: boolean;\n  /** Show percentage in labels */\n  showPercentage?: boolean;\n  /** Click handler */\n  onSliceClick?: (data: any, index: number) => void;\n}\n\nexport function PieChartRenderer({\n  data,\n  series,\n  labelKey,\n  height = 300,\n  showLegend = true,\n  donut = false,\n  formatType = 'default',\n  valueFormatter,\n  title = 'Pie Chart',\n  description,\n  animate = true,\n  showLabels = true,\n  showPercentage = true,\n  onSliceClick,\n}: PieChartRendererProps) {\n  const maxSlices = 8;\n  const chartColors = useChartColors(maxSlices);\n  const [activeIndex, setActiveIndex] = useState<number | undefined>(undefined);\n\n  const dataKey = series[0]?.dataKey;\n  if (!dataKey) return null;\n\n  // Limit slices and aggregate remainder as \"Other\"\n  let chartData = [...data];\n  if (chartData.length > maxSlices) {\n    const top = chartData.slice(0, maxSlices - 1);\n    const rest = chartData.slice(maxSlices - 1);\n    const otherValue = rest.reduce((sum, d) => sum + (Number(d[dataKey]) || 0), 0);\n    chartData = [...top, { [labelKey]: 'Other', [dataKey]: otherValue }];\n  }\n\n  // Calculate total for percentage display\n  const total = chartData.reduce((sum, d) => sum + (Number(d[dataKey]) || 0), 0);\n\n  const handleSliceClick = useCallback(\n    (data: any, index: number) => {\n      onSliceClick?.(data, index);\n    },\n    [onSliceClick],\n  );\n\n  const onPieEnter = useCallback((_: any, index: number) => {\n    setActiveIndex(index);\n  }, []);\n\n  const onPieLeave = useCallback(() => {\n    setActiveIndex(undefined);\n  }, []);\n\n  // Outer label renderer\n  const renderLabel = useCallback(\n    (props: any) => {\n      if (!showLabels) return null;\n\n      const { cx, cy, midAngle, outerRadius, index, value } = props;\n      const RADIAN = Math.PI / 180;\n      const radius = outerRadius + 20;\n      const x = cx + radius * Math.cos(-midAngle * RADIAN);\n      const y = cy + radius * Math.sin(-midAngle * RADIAN);\n\n      const percent = total > 0 ? ((value / total) * 100).toFixed(1) : '0';\n      const labelName = String(chartData[index]?.[labelKey] ?? '');\n\n      // Only show label if slice is large enough (> 5%)\n      if (total > 0 && (value / total) < 0.05) return null;\n\n      return (\n        <text\n          x={x}\n          y={y}\n          fill={chartColors.axisTextColor}\n          textAnchor={x > cx ? 'start' : 'end'}\n          dominantBaseline=\"central\"\n          fontSize={11}\n        >\n          {labelName}{showPercentage ? ` (${percent}%)` : ''}\n        </text>\n      );\n    },\n    [chartData, chartColors.axisTextColor, labelKey, showLabels, showPercentage, total],\n  );\n\n  // Active shape for hover highlight\n  const renderActiveShape = useCallback(\n    (props: any) => {\n      const {\n        cx, cy, innerRadius, outerRadius, startAngle, endAngle,\n        fill, payload, value,\n      } = props;\n\n      const percent = total > 0 ? ((value / total) * 100).toFixed(1) : '0';\n\n      return (\n        <g>\n          <Sector\n            cx={cx}\n            cy={cy}\n            innerRadius={innerRadius}\n            outerRadius={outerRadius + 6}\n            startAngle={startAngle}\n            endAngle={endAngle}\n            fill={fill}\n          />\n          {donut && (\n            <>\n              <text\n                x={cx}\n                y={cy - 8}\n                textAnchor=\"middle\"\n                fill={chartColors.axisTextColor}\n                fontSize={14}\n                fontWeight=\"600\"\n              >\n                {payload[labelKey]}\n              </text>\n              <text\n                x={cx}\n                y={cy + 12}\n                textAnchor=\"middle\"\n                fill={chartColors.axisTextColor}\n                fontSize={12}\n              >\n                {percent}%\n              </text>\n            </>\n          )}\n        </g>\n      );\n    },\n    [chartColors.axisTextColor, donut, labelKey, total],\n  );\n\n  // Accessible columns\n  const columns = [labelKey, series[0]?.name || 'Value', 'Percentage'];\n  const accessDataKeys = [labelKey, dataKey, '__percent__'];\n  const accessData = chartData.map((d) => ({\n    ...d,\n    __percent__: total > 0 ? `${((Number(d[dataKey]) / total) * 100).toFixed(1)}%` : '0%',\n  }));\n\n  const innerRadius = donut ? '55%' : 0;\n  const outerRadius = '80%';\n\n  return (\n    <AccessibleChartWrapper\n      title={title}\n      description={description}\n      data={accessData}\n      columns={columns}\n      dataKeys={accessDataKeys}\n      formatters={valueFormatter ? { [dataKey]: valueFormatter } : {}}\n    >\n      <ResponsiveContainer width=\"100%\" height={height}>\n        <PieChart>\n          <Pie\n            data={chartData}\n            dataKey={dataKey}\n            nameKey={labelKey}\n            cx=\"50%\"\n            cy=\"50%\"\n            innerRadius={innerRadius}\n            outerRadius={outerRadius}\n            paddingAngle={2}\n            stroke={chartColors.cardBg}\n            strokeWidth={2}\n            label={activeIndex === undefined ? renderLabel : undefined}\n            labelLine={showLabels}\n            activeIndex={activeIndex}\n            activeShape={renderActiveShape}\n            onMouseEnter={onPieEnter}\n            onMouseLeave={onPieLeave}\n            onClick={(data, index) => handleSliceClick(data, index)}\n            cursor={onSliceClick ? 'pointer' : undefined}\n            isAnimationActive={animate}\n            animationDuration={600}\n            animationEasing=\"ease-out\"\n          >\n            {chartData.map((_, i) => (\n              <Cell\n                key={i}\n                fill={chartColors.getColor(i)}\n              />\n            ))}\n          </Pie>\n\n          <Tooltip\n            content={\n              <ChartTooltip\n                formatType={formatType}\n                valueFormatter={valueFormatter}\n              />\n            }\n          />\n\n          {showLegend && (\n            <Legend\n              layout=\"vertical\"\n              verticalAlign=\"middle\"\n              align=\"right\"\n              wrapperStyle={{ fontSize: 12, paddingLeft: 16 }}\n              formatter={(value: string, entry: any) => {\n                const idx = chartData.findIndex((d) => d[labelKey] === value);\n                const val = idx >= 0 ? Number(chartData[idx][dataKey]) : 0;\n                const pct = total > 0 ? ((val / total) * 100).toFixed(1) : '0';\n                return `${value} (${pct}%)`;\n              }}\n            />\n          )}\n        </PieChart>\n      </ResponsiveContainer>\n    </AccessibleChartWrapper>\n  );\n}\n\nexport default PieChartRenderer;\n","import React, { useState, useCallback } from 'react';\nimport type { ChartConfig, ChartType, ExportFormat } from '../../types/dashboard';\nimport { LineChartRenderer } from '../charts/LineChartRenderer';\nimport { AreaChartRenderer } from '../charts/AreaChartRenderer';\nimport { BarChartRenderer } from '../charts/BarChartRenderer';\nimport { PieChartRenderer } from '../charts/PieChartRenderer';\nimport type { TooltipFormatType } from '../charts/ChartTooltip';\n\n/* ==========================================================================\n   ChartWidget Component\n   Multi-type chart widget (AreaChart, BarChart, LineChart, Pie) with\n   loading/error states, chart type switching, and export capability.\n\n   Renders real Recharts visualizations via dedicated chart renderers,\n   with theme-aware colors, WCAG 2.1 AA accessibility, and\n   colorblind-safe palettes.\n   ========================================================================== */\n\nexport interface ChartWidgetProps {\n  /** Chart configuration */\n  config: ChartConfig;\n  /** Whether data is loading */\n  loading?: boolean;\n  /** Error message */\n  error?: string | null;\n  /** Available chart types the user can switch between */\n  allowedTypes?: ChartType[];\n  /** Export handler */\n  onExport?: (format: ExportFormat) => void;\n  /** Retry handler for error state */\n  onRetry?: () => void;\n  /** Full-width spanning */\n  fullWidth?: boolean;\n  /** Chart height in pixels */\n  height?: number;\n  /** Tooltip value format type */\n  formatType?: TooltipFormatType;\n  /** Custom value formatter for tooltips and axes */\n  valueFormatter?: (value: number) => string;\n  /** Custom label formatter for tooltip headers */\n  labelFormatter?: (label: string) => string;\n  /** Click handler for data interactions */\n  onDataClick?: (data: any, index: number) => void;\n}\n\nexport function ChartWidget({\n  config,\n  loading = false,\n  error = null,\n  allowedTypes = ['line', 'bar', 'area'],\n  onExport,\n  onRetry,\n  fullWidth = false,\n  height = 300,\n  formatType = 'default',\n  valueFormatter,\n  labelFormatter,\n  onDataClick,\n}: ChartWidgetProps) {\n  const [activeType, setActiveType] = useState<ChartType>(config.type);\n  const [showExportMenu, setShowExportMenu] = useState(false);\n\n  const cardClass = [\n    'chart-widget',\n    fullWidth ? 'chart-card--full-width' : 'chart-card--half-width',\n  ]\n    .filter(Boolean)\n    .join(' ');\n\n  const handleExport = useCallback(\n    (format: ExportFormat) => {\n      onExport?.(format);\n      setShowExportMenu(false);\n    },\n    [onExport],\n  );\n\n  return (\n    <div className={cardClass}>\n      {/* Widget header */}\n      <div className=\"chart-widget__header\">\n        <div className=\"chart-widget__title-group\">\n          <h3 className=\"chart-widget__title\">{config.title}</h3>\n          {config.subtitle && (\n            <p className=\"chart-widget__subtitle\">{config.subtitle}</p>\n          )}\n        </div>\n\n        <div className=\"chart-widget__actions\">\n          {/* Chart type switcher */}\n          {allowedTypes.length > 1 && (\n            <div className=\"chart-widget__type-switcher\" role=\"radiogroup\" aria-label=\"Chart type\">\n              {allowedTypes.map((type) => (\n                <button\n                  key={type}\n                  className={`chart-widget__type-btn ${activeType === type ? 'chart-widget__type-btn--active' : ''}`}\n                  onClick={() => setActiveType(type)}\n                  role=\"radio\"\n                  aria-checked={activeType === type}\n                  title={`${type} chart`}\n                >\n                  {chartTypeIcon(type)}\n                </button>\n              ))}\n            </div>\n          )}\n\n          {/* Export menu */}\n          {onExport && (\n            <div className=\"chart-widget__export-wrapper\">\n              <button\n                className=\"chart-widget__action-btn\"\n                onClick={() => setShowExportMenu(!showExportMenu)}\n                aria-haspopup=\"menu\"\n                aria-expanded={showExportMenu}\n                title=\"Export chart\"\n              >\n                <ExportIcon />\n              </button>\n              {showExportMenu && (\n                <div className=\"chart-widget__export-menu\" role=\"menu\">\n                  <button role=\"menuitem\" onClick={() => handleExport('pdf')}>\n                    Export as PDF\n                  </button>\n                  <button role=\"menuitem\" onClick={() => handleExport('csv')}>\n                    Export as CSV\n                  </button>\n                  <button role=\"menuitem\" onClick={() => handleExport('image')}>\n                    Export as Image\n                  </button>\n                </div>\n              )}\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Chart body */}\n      <div\n        className=\"chart-widget__body\"\n        style={{ height: `${height}px` }}\n        aria-label={`${config.title} chart`}\n      >\n        {loading && <ChartSkeleton height={height} />}\n\n        {error && (\n          <div className=\"chart-widget__error\" role=\"alert\">\n            <span className=\"chart-widget__error-icon\" aria-hidden=\"true\">!</span>\n            <p className=\"chart-widget__error-message\">Failed to load chart data</p>\n            <p className=\"chart-widget__error-detail\">{error}</p>\n            {onRetry && (\n              <button className=\"chart-widget__retry-btn\" onClick={onRetry}>\n                Retry\n              </button>\n            )}\n          </div>\n        )}\n\n        {!loading && !error && (\n          <ChartRenderer\n            type={activeType}\n            config={config}\n            height={height}\n            formatType={formatType}\n            valueFormatter={valueFormatter || config.valueFormatter}\n            labelFormatter={labelFormatter}\n            onDataClick={onDataClick}\n          />\n        )}\n      </div>\n\n      {/* Legend - handled internally by Recharts renderers, but keep widget\n          legend for non-chart states or when chart legend is disabled */}\n    </div>\n  );\n}\n\n/* --------------------------------------------------------------------------\n   Chart Renderer - Routes to the correct Recharts component\n   -------------------------------------------------------------------------- */\n\ninterface ChartRendererProps {\n  type: ChartType;\n  config: ChartConfig;\n  height: number;\n  formatType?: TooltipFormatType;\n  valueFormatter?: (value: number) => string;\n  labelFormatter?: (label: string) => string;\n  onDataClick?: (data: any, index: number) => void;\n}\n\nfunction ChartRenderer({\n  type,\n  config,\n  height,\n  formatType,\n  valueFormatter,\n  labelFormatter,\n  onDataClick,\n}: ChartRendererProps) {\n  if (!config.data || config.data.length === 0) {\n    return (\n      <div className=\"chart-widget__empty\">\n        <p>No data available for the selected period.</p>\n      </div>\n    );\n  }\n\n  const commonProps = {\n    data: config.data,\n    series: config.series,\n    height: height,\n    showGrid: config.showGrid !== false,\n    showLegend: config.showLegend !== false,\n    formatType: formatType,\n    valueFormatter: valueFormatter,\n    labelFormatter: labelFormatter,\n    title: config.title,\n    description: config.subtitle,\n    animate: true,\n  };\n\n  switch (type) {\n    case 'line':\n      return (\n        <LineChartRenderer\n          {...commonProps}\n          xAxisKey={config.xAxisKey}\n          onDataPointClick={onDataClick}\n          usePatterns={config.series.length > 1}\n        />\n      );\n\n    case 'area':\n      return (\n        <AreaChartRenderer\n          {...commonProps}\n          xAxisKey={config.xAxisKey}\n          onDataPointClick={onDataClick}\n        />\n      );\n\n    case 'bar':\n      return (\n        <BarChartRenderer\n          {...commonProps}\n          xAxisKey={config.xAxisKey}\n          onBarClick={onDataClick ? (data, index) => onDataClick(data, index) : undefined}\n        />\n      );\n\n    case 'pie':\n    case 'donut':\n      return (\n        <PieChartRenderer\n          {...commonProps}\n          labelKey={config.xAxisKey}\n          donut={type === 'donut'}\n          onSliceClick={onDataClick}\n        />\n      );\n\n    default:\n      return (\n        <LineChartRenderer\n          {...commonProps}\n          xAxisKey={config.xAxisKey}\n          onDataPointClick={onDataClick}\n        />\n      );\n  }\n}\n\n/* --------------------------------------------------------------------------\n   Skeleton\n   -------------------------------------------------------------------------- */\n\nfunction ChartSkeleton({ height }: { height: number }) {\n  return (\n    <div\n      className=\"chart-widget__skeleton\"\n      style={{ height: `${height}px` }}\n      aria-busy=\"true\"\n      aria-label=\"Loading chart\"\n    >\n      <div className=\"skeleton skeleton--rect\" style={{ width: '100%', height: '100%' }} />\n    </div>\n  );\n}\n\n/* --------------------------------------------------------------------------\n   Icons\n   -------------------------------------------------------------------------- */\n\nfunction chartTypeIcon(type: ChartType): string {\n  switch (type) {\n    case 'line': return '\\u2571'; // diagonal\n    case 'area': return '\\u25B3'; // triangle\n    case 'bar': return '\\u2503'; // vertical bar\n    case 'pie':\n    case 'donut': return '\\u25CB'; // circle\n    default: return '\\u2571';\n  }\n}\n\nfunction ExportIcon() {\n  return (\n    <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" aria-hidden=\"true\">\n      <path\n        d=\"M8 1v9M4 6l4-4 4 4M2 11v2a2 2 0 002 2h8a2 2 0 002-2v-2\"\n        stroke=\"currentColor\"\n        strokeWidth=\"1.5\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n      />\n    </svg>\n  );\n}\n\nexport default ChartWidget;\n","/* ==========================================================================\n   useDataTable Hook\n   Encapsulates TanStack Table configuration for advanced data tables\n   with sorting, filtering, pagination, selection, and virtual scrolling.\n   ========================================================================== */\n\nimport { useState, useMemo, useCallback } from 'react';\nimport {\n  useReactTable,\n  getCoreRowModel,\n  getSortedRowModel,\n  getFilteredRowModel,\n  getPaginationRowModel,\n  type ColumnDef,\n  type SortingState,\n  type ColumnFiltersState,\n  type RowSelectionState,\n  type PaginationState,\n  type FilterFn,\n  type Table,\n} from '@tanstack/react-table';\n\n/* --------------------------------------------------------------------------\n   Types\n   -------------------------------------------------------------------------- */\n\nexport interface UseDataTableOptions<T> {\n  /** Data array */\n  data: T[];\n  /** TanStack column definitions */\n  columns: ColumnDef<T, any>[];\n  /** Enable sorting (default: true) */\n  enableSorting?: boolean;\n  /** Enable multi-column sort with shift-click (default: true) */\n  enableMultiSort?: boolean;\n  /** Enable column filters (default: true) */\n  enableColumnFilters?: boolean;\n  /** Enable global filter / search (default: true) */\n  enableGlobalFilter?: boolean;\n  /** Enable row selection (default: false) */\n  enableRowSelection?: boolean;\n  /** Enable pagination (default: true) */\n  enablePagination?: boolean;\n  /** Initial page size (default: 10) */\n  initialPageSize?: number;\n  /** Page size options (default: [10, 25, 50, 100]) */\n  pageSizeOptions?: number[];\n  /** Unique row id accessor (default: 'id') */\n  getRowId?: (row: T) => string;\n}\n\nexport interface UseDataTableReturn<T> {\n  /** The TanStack table instance */\n  table: Table<T>;\n  /** Global filter/search value */\n  globalFilter: string;\n  /** Set global filter/search value */\n  setGlobalFilter: (value: string) => void;\n  /** Current sorting state */\n  sorting: SortingState;\n  /** Current column filters state */\n  columnFilters: ColumnFiltersState;\n  /** Current row selection state */\n  rowSelection: RowSelectionState;\n  /** Current pagination state */\n  pagination: PaginationState;\n  /** Available page size options */\n  pageSizeOptions: number[];\n  /** Selected row data objects */\n  selectedRows: T[];\n  /** Total number of filtered rows */\n  filteredRowCount: number;\n  /** Total number of all rows */\n  totalRowCount: number;\n  /** Clear all selections */\n  clearSelection: () => void;\n  /** Clear all filters */\n  clearAllFilters: () => void;\n  /** Whether any filters are active */\n  hasActiveFilters: boolean;\n}\n\n/* --------------------------------------------------------------------------\n   Global fuzzy/contains filter function\n   -------------------------------------------------------------------------- */\n\nconst globalFilterFn: FilterFn<any> = (row, columnId, filterValue) => {\n  const search = String(filterValue).toLowerCase();\n  if (!search) return true;\n\n  // Search across all column values\n  const rowValues = row.getAllCells().map((cell) => {\n    const value = cell.getValue();\n    return value != null ? String(value).toLowerCase() : '';\n  });\n\n  return rowValues.some((val) => val.includes(search));\n};\n\n/* --------------------------------------------------------------------------\n   Hook Implementation\n   -------------------------------------------------------------------------- */\n\nexport function useDataTable<T>(options: UseDataTableOptions<T>): UseDataTableReturn<T> {\n  const {\n    data,\n    columns,\n    enableSorting = true,\n    enableMultiSort = true,\n    enableColumnFilters = true,\n    enableGlobalFilter = true,\n    enableRowSelection = false,\n    enablePagination = true,\n    initialPageSize = 10,\n    pageSizeOptions = [10, 25, 50, 100],\n    getRowId,\n  } = options;\n\n  // State\n  const [sorting, setSorting] = useState<SortingState>([]);\n  const [columnFilters, setColumnFilters] = useState<ColumnFiltersState>([]);\n  const [globalFilter, setGlobalFilter] = useState('');\n  const [rowSelection, setRowSelection] = useState<RowSelectionState>({});\n  const [pagination, setPagination] = useState<PaginationState>({\n    pageIndex: 0,\n    pageSize: initialPageSize,\n  });\n\n  // Create table instance\n  const table = useReactTable({\n    data,\n    columns,\n    state: {\n      sorting,\n      columnFilters,\n      globalFilter,\n      rowSelection,\n      pagination,\n    },\n    onSortingChange: setSorting,\n    onColumnFiltersChange: setColumnFilters,\n    onGlobalFilterChange: setGlobalFilter,\n    onRowSelectionChange: setRowSelection,\n    onPaginationChange: setPagination,\n    getCoreRowModel: getCoreRowModel(),\n    getSortedRowModel: enableSorting ? getSortedRowModel() : undefined,\n    getFilteredRowModel:\n      enableColumnFilters || enableGlobalFilter ? getFilteredRowModel() : undefined,\n    getPaginationRowModel: enablePagination ? getPaginationRowModel() : undefined,\n    enableSorting,\n    enableMultiSort,\n    enableColumnFilters,\n    enableGlobalFilter,\n    enableRowSelection,\n    globalFilterFn,\n    getRowId: getRowId ? (row) => getRowId(row) : undefined,\n  });\n\n  // Derived values\n  const selectedRows = useMemo(() => {\n    if (!enableRowSelection) return [];\n    return table.getSelectedRowModel().rows.map((row) => row.original);\n  }, [table, rowSelection, enableRowSelection]);\n\n  const filteredRowCount = table.getFilteredRowModel().rows.length;\n  const totalRowCount = data.length;\n\n  const hasActiveFilters = globalFilter !== '' || columnFilters.length > 0;\n\n  // Actions\n  const clearSelection = useCallback(() => {\n    setRowSelection({});\n  }, []);\n\n  const clearAllFilters = useCallback(() => {\n    setGlobalFilter('');\n    setColumnFilters([]);\n    setPagination((prev) => ({ ...prev, pageIndex: 0 }));\n  }, []);\n\n  return {\n    table,\n    globalFilter,\n    setGlobalFilter,\n    sorting,\n    columnFilters,\n    rowSelection,\n    pagination,\n    pageSizeOptions,\n    selectedRows,\n    filteredRowCount,\n    totalRowCount,\n    clearSelection,\n    clearAllFilters,\n    hasActiveFilters,\n  };\n}\n","/* ==========================================================================\n   CSV Export Utility\n   Exports table data to CSV format respecting active filters, sorting,\n   and row selection.\n   ========================================================================== */\n\nexport interface CSVExportOptions<T> {\n  /** Column definitions for header names and value extraction */\n  columns: {\n    id: string;\n    header: string;\n    accessor: keyof T | ((row: T) => any);\n  }[];\n  /** Data rows to export */\n  data: T[];\n  /** Optional filename (without extension) */\n  filename?: string;\n  /** Include timestamp in filename */\n  includeTimestamp?: boolean;\n  /** BOM for Excel UTF-8 support */\n  includeBOM?: boolean;\n}\n\n/**\n * Extract a cell value from a row using an accessor (key or function).\n */\nfunction getCellValue<T>(row: T, accessor: keyof T | ((row: T) => any)): any {\n  if (typeof accessor === 'function') return accessor(row);\n  return (row as any)[accessor];\n}\n\n/**\n * Escape a CSV cell value (wrap in quotes if it contains commas, quotes, or newlines).\n */\nfunction escapeCSV(value: any): string {\n  if (value == null) return '';\n  const str = String(value);\n  if (str.includes(',') || str.includes('\"') || str.includes('\\n') || str.includes('\\r')) {\n    return `\"${str.replace(/\"/g, '\"\"')}\"`;\n  }\n  return str;\n}\n\n/**\n * Generate CSV string from data and column definitions.\n */\nexport function generateCSV<T>(options: CSVExportOptions<T>): string {\n  const { columns, data } = options;\n\n  // Header row\n  const header = columns.map((col) => escapeCSV(col.header)).join(',');\n\n  // Data rows\n  const rows = data.map((row) =>\n    columns.map((col) => escapeCSV(getCellValue(row, col.accessor))).join(','),\n  );\n\n  return [header, ...rows].join('\\r\\n');\n}\n\n/**\n * Trigger a CSV file download in the browser.\n */\nexport function downloadCSV<T>(options: CSVExportOptions<T>): void {\n  const {\n    filename = 'export',\n    includeTimestamp = true,\n    includeBOM = true,\n  } = options;\n\n  const csv = generateCSV(options);\n\n  // Build filename\n  const timestamp = includeTimestamp\n    ? `_${new Date().toISOString().slice(0, 19).replace(/[T:]/g, '-')}`\n    : '';\n  const fullFilename = `${filename}${timestamp}.csv`;\n\n  // Create blob and download\n  const bom = includeBOM ? '\\uFEFF' : '';\n  const blob = new Blob([bom + csv], { type: 'text/csv;charset=utf-8;' });\n  const url = URL.createObjectURL(blob);\n\n  const link = document.createElement('a');\n  link.href = url;\n  link.download = fullFilename;\n  link.style.display = 'none';\n  document.body.appendChild(link);\n  link.click();\n\n  // Cleanup\n  setTimeout(() => {\n    document.body.removeChild(link);\n    URL.revokeObjectURL(url);\n  }, 100);\n}\n","/* ==========================================================================\n   useVirtualScroll Hook\n   Lightweight virtual scrolling for large datasets (1000+ rows).\n   Renders only visible rows plus overscan buffer for smooth scrolling.\n   ========================================================================== */\n\nimport { useState, useRef, useCallback, useEffect, useMemo } from 'react';\n\nexport interface VirtualScrollOptions {\n  /** Total number of items */\n  count: number;\n  /** Estimated row height in px */\n  estimateSize: number;\n  /** Number of extra rows to render above/below viewport */\n  overscan?: number;\n  /** Container height in px */\n  containerHeight: number;\n  /** Whether virtual scrolling is enabled */\n  enabled: boolean;\n}\n\nexport interface VirtualItem {\n  index: number;\n  start: number;\n  end: number;\n  size: number;\n}\n\nexport interface UseVirtualScrollReturn {\n  /** Virtual rows to render */\n  virtualRows: VirtualItem[];\n  /** Total height of all items (for scroll area) */\n  totalHeight: number;\n  /** Ref to attach to the scroll container */\n  containerRef: React.RefObject<HTMLDivElement | null>;\n  /** Row height used */\n  rowHeight: number;\n}\n\nexport function useVirtualScroll(options: VirtualScrollOptions): UseVirtualScrollReturn {\n  const { count, estimateSize, overscan = 10, containerHeight, enabled } = options;\n  const containerRef = useRef<HTMLDivElement>(null);\n  const [scrollTop, setScrollTop] = useState(0);\n\n  // Total height of all items\n  const totalHeight = count * estimateSize;\n\n  // Handle scroll events\n  const handleScroll = useCallback(() => {\n    if (containerRef.current) {\n      setScrollTop(containerRef.current.scrollTop);\n    }\n  }, []);\n\n  // Attach scroll listener\n  useEffect(() => {\n    const container = containerRef.current;\n    if (!container || !enabled) return;\n\n    container.addEventListener('scroll', handleScroll, { passive: true });\n    return () => container.removeEventListener('scroll', handleScroll);\n  }, [handleScroll, enabled]);\n\n  // Calculate visible items\n  const virtualRows = useMemo<VirtualItem[]>(() => {\n    if (!enabled || count === 0) return [];\n\n    const startIndex = Math.max(0, Math.floor(scrollTop / estimateSize) - overscan);\n    const visibleCount = Math.ceil(containerHeight / estimateSize);\n    const endIndex = Math.min(count - 1, startIndex + visibleCount + overscan * 2);\n\n    const items: VirtualItem[] = [];\n    for (let i = startIndex; i <= endIndex; i++) {\n      items.push({\n        index: i,\n        start: i * estimateSize,\n        end: (i + 1) * estimateSize,\n        size: estimateSize,\n      });\n    }\n\n    return items;\n  }, [count, estimateSize, overscan, containerHeight, scrollTop, enabled]);\n\n  return {\n    virtualRows,\n    totalHeight,\n    containerRef,\n    rowHeight: estimateSize,\n  };\n}\n","import React, { useCallback, useRef, useMemo } from 'react';\nimport {\n  flexRender,\n  type ColumnDef,\n  type Table,\n  type Header,\n  type Row,\n} from '@tanstack/react-table';\nimport { useDataTable, type UseDataTableOptions } from '../../hooks/useDataTable';\nimport { downloadCSV } from '../../utils/csvExport';\nimport { useVirtualScroll } from './useVirtualScroll';\n\n/* ==========================================================================\n   DataTable Component\n   Full-featured data table powered by TanStack Table v8 with:\n   - Multi-column sorting (click + shift-click)\n   - Column-level filters + global search\n   - Configurable pagination (10, 25, 50, 100)\n   - Row selection with checkbox column\n   - CSV export (respects filters/sorting/selection)\n   - Virtual scrolling for 1000+ rows\n   - Responsive horizontal scroll with priority columns\n   - Full WCAG accessibility (ARIA grid pattern, keyboard nav)\n   ========================================================================== */\n\nexport interface DataTableProps<T> {\n  /** Table title */\n  title?: string;\n  /** Subtitle / description */\n  subtitle?: string;\n  /** Row data */\n  data: T[];\n  /** TanStack column definitions */\n  columns: ColumnDef<T, any>[];\n  /** Enable sorting (default: true) */\n  enableSorting?: boolean;\n  /** Enable multi-column sort (default: true) */\n  enableMultiSort?: boolean;\n  /** Enable column filters (default: true) */\n  enableColumnFilters?: boolean;\n  /** Enable global search (default: true) */\n  enableGlobalFilter?: boolean;\n  /** Enable row selection checkboxes (default: false) */\n  enableRowSelection?: boolean;\n  /** Enable CSV export (default: true) */\n  enableExport?: boolean;\n  /** Enable pagination (default: true) */\n  enablePagination?: boolean;\n  /** Enable virtual scrolling for large datasets (default: false) */\n  enableVirtualScrolling?: boolean;\n  /** Height for virtual scrolling container in px (default: 500) */\n  virtualScrollHeight?: number;\n  /** Initial page size (default: 10) */\n  initialPageSize?: number;\n  /** Page size options */\n  pageSizeOptions?: number[];\n  /** Unique row id accessor */\n  getRowId?: (row: T) => string;\n  /** Row click handler */\n  onRowClick?: (row: T) => void;\n  /** Batch action handler (called with selected rows) */\n  onBatchAction?: (action: string, rows: T[]) => void;\n  /** Custom batch actions */\n  batchActions?: { id: string; label: string; variant?: 'default' | 'danger' }[];\n  /** Loading state */\n  loading?: boolean;\n  /** Error message */\n  error?: string | null;\n  /** Retry handler */\n  onRetry?: () => void;\n  /** CSS class name */\n  className?: string;\n  /** Export filename */\n  exportFilename?: string;\n  /** Columns hidden on mobile (by id) for responsive priority */\n  mobileHiddenColumns?: string[];\n  /** Striped rows */\n  striped?: boolean;\n  /** Compact density */\n  compact?: boolean;\n  /** Empty state message */\n  emptyMessage?: string;\n}\n\n/* --------------------------------------------------------------------------\n   Main Component\n   -------------------------------------------------------------------------- */\n\nexport function DataTable<T extends Record<string, any>>({\n  title,\n  subtitle,\n  data,\n  columns,\n  enableSorting = true,\n  enableMultiSort = true,\n  enableColumnFilters = true,\n  enableGlobalFilter = true,\n  enableRowSelection = false,\n  enableExport = true,\n  enablePagination = true,\n  enableVirtualScrolling = false,\n  virtualScrollHeight = 500,\n  initialPageSize = 10,\n  pageSizeOptions = [10, 25, 50, 100],\n  getRowId,\n  onRowClick,\n  onBatchAction,\n  batchActions = [],\n  loading = false,\n  error = null,\n  onRetry,\n  className = '',\n  exportFilename = 'table-export',\n  mobileHiddenColumns = [],\n  striped = false,\n  compact = false,\n  emptyMessage = 'No data found',\n}: DataTableProps<T>) {\n  const scrollContainerRef = useRef<HTMLDivElement>(null!);\n\n\n  // Build selection column if needed\n  const tableColumns = useMemo(() => {\n    if (!enableRowSelection) return columns;\n\n    const selectionColumn: ColumnDef<T, any> = {\n      id: '_select',\n      header: ({ table }) => (\n        <input\n          type=\"checkbox\"\n          className=\"dt-checkbox\"\n          checked={table.getIsAllPageRowsSelected()}\n          ref={(el) => {\n            if (el) el.indeterminate = table.getIsSomePageRowsSelected();\n          }}\n          onChange={table.getToggleAllPageRowsSelectedHandler()}\n          aria-label=\"Select all rows on this page\"\n        />\n      ),\n      cell: ({ row }) => (\n        <input\n          type=\"checkbox\"\n          className=\"dt-checkbox\"\n          checked={row.getIsSelected()}\n          disabled={!row.getCanSelect()}\n          onChange={row.getToggleSelectedHandler()}\n          onClick={(e) => e.stopPropagation()}\n          aria-label={`Select row ${row.id}`}\n        />\n      ),\n      size: 44,\n      enableSorting: false,\n      enableColumnFilter: false,\n    };\n\n    return [selectionColumn, ...columns];\n  }, [columns, enableRowSelection]);\n\n  // Use the hook\n  const {\n    table,\n    globalFilter,\n    setGlobalFilter,\n    selectedRows,\n    filteredRowCount,\n    totalRowCount,\n    clearSelection,\n    clearAllFilters,\n    hasActiveFilters,\n    pageSizeOptions: resolvedPageSizeOptions,\n  } = useDataTable<T>({\n    data,\n    columns: tableColumns,\n    enableSorting,\n    enableMultiSort,\n    enableColumnFilters,\n    enableGlobalFilter,\n    enableRowSelection,\n    enablePagination: enablePagination && !enableVirtualScrolling,\n    initialPageSize,\n    pageSizeOptions,\n    getRowId,\n  });\n\n  // Virtual scrolling\n  const allRows = table.getRowModel().rows;\n  const { virtualRows, totalHeight, containerRef, rowHeight } = useVirtualScroll({\n    count: enableVirtualScrolling ? allRows.length : 0,\n    estimateSize: compact ? 36 : 44,\n    overscan: 10,\n    containerHeight: virtualScrollHeight,\n    enabled: enableVirtualScrolling,\n  });\n\n  // CSV Export handler\n  const handleCSVExport = useCallback(() => {\n    const exportColumns = columns\n      .filter((col) => col.id !== '_select')\n      .map((col) => ({\n        id: String(col.id ?? ''),\n        header: typeof col.header === 'string' ? col.header : String(col.id ?? ''),\n        accessor: (col as any).accessorKey\n          ? (col as any).accessorKey\n          : (col as any).accessorFn\n            ? (col as any).accessorFn\n            : (row: T) => (row as any)[(col as any).accessorKey ?? col.id ?? ''],\n      }));\n\n    // Export selected rows if any, otherwise export all visible/filtered rows\n    const exportData =\n      selectedRows.length > 0\n        ? selectedRows\n        : table.getFilteredRowModel().rows.map((r) => r.original);\n\n    downloadCSV({\n      columns: exportColumns,\n      data: exportData,\n      filename: exportFilename,\n      includeTimestamp: true,\n    });\n  }, [columns, selectedRows, table, exportFilename]);\n\n  // Batch action handler\n  const handleBatchAction = useCallback(\n    (actionId: string) => {\n      if (onBatchAction && selectedRows.length > 0) {\n        onBatchAction(actionId, selectedRows);\n      }\n    },\n    [onBatchAction, selectedRows],\n  );\n\n  // ---- Loading State ----\n  if (loading) {\n    return (\n      <div\n        className={`dt ${compact ? 'dt--compact' : ''} dt--loading ${className}`}\n        aria-busy=\"true\"\n        aria-label=\"Loading table data\"\n      >\n        {title && <div className=\"dt__header\"><h3 className=\"dt__title\">{title}</h3></div>}\n        <div className=\"dt__skeleton\">\n          {Array.from({ length: 6 }, (_, i) => (\n            <div key={i} className=\"dt__skeleton-row\">\n              {Array.from({ length: Math.min(columns.length, 5) }, (_, j) => (\n                <div key={j} className=\"dt__skeleton-cell\" />\n              ))}\n            </div>\n          ))}\n        </div>\n      </div>\n    );\n  }\n\n  // ---- Error State ----\n  if (error) {\n    return (\n      <div className={`dt dt--error ${className}`}>\n        {title && <div className=\"dt__header\"><h3 className=\"dt__title\">{title}</h3></div>}\n        <div className=\"dt__error\" role=\"alert\">\n          <p className=\"dt__error-title\">Failed to load data</p>\n          <p className=\"dt__error-detail\">{error}</p>\n          {onRetry && (\n            <button className=\"dt__error-retry\" onClick={onRetry}>\n              Retry\n            </button>\n          )}\n        </div>\n      </div>\n    );\n  }\n\n  // ---- Render ----\n  const headerGroups = table.getHeaderGroups();\n  const rows = enableVirtualScrolling ? allRows : table.getRowModel().rows;\n\n  return (\n    <div\n      className={`dt ${compact ? 'dt--compact' : ''} ${striped ? 'dt--striped' : ''} ${className}`}\n      role=\"region\"\n      aria-label={title || 'Data table'}\n    >\n      {/* ---- Toolbar ---- */}\n      <div className=\"dt__toolbar\">\n        <div className=\"dt__toolbar-left\">\n          {title && (\n            <div className=\"dt__title-group\">\n              <h3 className=\"dt__title\">{title}</h3>\n              {subtitle && <p className=\"dt__subtitle\">{subtitle}</p>}\n            </div>\n          )}\n        </div>\n        <div className=\"dt__toolbar-right\">\n          {/* Global Search */}\n          {enableGlobalFilter && (\n            <div className=\"dt__search\">\n              <input\n                type=\"search\"\n                className=\"dt__search-input\"\n                placeholder=\"Search all columns...\"\n                value={globalFilter}\n                onChange={(e) => setGlobalFilter(e.target.value)}\n                aria-label=\"Search table\"\n              />\n              {globalFilter && (\n                <button\n                  className=\"dt__search-clear\"\n                  onClick={() => setGlobalFilter('')}\n                  aria-label=\"Clear search\"\n                >\n                  &times;\n                </button>\n              )}\n            </div>\n          )}\n\n          {/* Clear Filters */}\n          {hasActiveFilters && (\n            <button className=\"dt__btn dt__btn--ghost\" onClick={clearAllFilters}>\n              Clear filters\n            </button>\n          )}\n\n          {/* CSV Export */}\n          {enableExport && (\n            <button className=\"dt__btn dt__btn--secondary\" onClick={handleCSVExport}>\n              <span className=\"dt__btn-icon\" aria-hidden=\"true\">&#8615;</span>\n              Export CSV\n              {selectedRows.length > 0 && ` (${selectedRows.length})`}\n            </button>\n          )}\n        </div>\n      </div>\n\n      {/* ---- Batch Actions Bar ---- */}\n      {enableRowSelection && selectedRows.length > 0 && (\n        <div className=\"dt__batch-bar\" role=\"toolbar\" aria-label=\"Batch actions\">\n          <span className=\"dt__batch-count\">\n            {selectedRows.length} row{selectedRows.length !== 1 ? 's' : ''} selected\n          </span>\n          <div className=\"dt__batch-actions\">\n            {batchActions.map((action) => (\n              <button\n                key={action.id}\n                className={`dt__btn ${action.variant === 'danger' ? 'dt__btn--danger' : 'dt__btn--secondary'}`}\n                onClick={() => handleBatchAction(action.id)}\n              >\n                {action.label}\n              </button>\n            ))}\n            <button className=\"dt__btn dt__btn--ghost\" onClick={clearSelection}>\n              Clear selection\n            </button>\n          </div>\n        </div>\n      )}\n\n      {/* ---- Table ---- */}\n      <div\n        className=\"dt__scroll-container\"\n        ref={(enableVirtualScrolling ? containerRef : scrollContainerRef) as React.RefObject<HTMLDivElement>}\n        style={\n          enableVirtualScrolling\n            ? { height: virtualScrollHeight, overflow: 'auto' }\n            : undefined\n        }\n        tabIndex={0}\n      >\n        <table\n          className=\"dt__table\"\n          role=\"grid\"\n          aria-rowcount={filteredRowCount}\n          aria-colcount={tableColumns.length}\n        >\n          {/* ---- Head ---- */}\n          <thead className=\"dt__thead\">\n            {headerGroups.map((headerGroup) => (\n              <tr key={headerGroup.id} role=\"row\">\n                {headerGroup.headers.map((header) => (\n                  <HeaderCell\n                    key={header.id}\n                    header={header}\n                    mobileHiddenColumns={mobileHiddenColumns}\n                    enableColumnFilters={enableColumnFilters}\n                  />\n                ))}\n              </tr>\n            ))}\n          </thead>\n\n          {/* ---- Body ---- */}\n          <tbody className=\"dt__tbody\">\n            {enableVirtualScrolling ? (\n              <>\n                {/* Spacer for virtual scroll */}\n                {totalHeight > 0 && (\n                  <tr style={{ height: virtualRows[0]?.start ?? 0 }}>\n                    <td colSpan={tableColumns.length} style={{ padding: 0, border: 'none' }} />\n                  </tr>\n                )}\n                {virtualRows.map((virtualRow) => {\n                  const row = allRows[virtualRow.index];\n                  if (!row) return null;\n                  return (\n                    <DataRow\n                      key={row.id}\n                      row={row}\n                      onRowClick={onRowClick}\n                      mobileHiddenColumns={mobileHiddenColumns}\n                      style={{ height: rowHeight }}\n                    />\n                  );\n                })}\n                {/* Bottom spacer */}\n                {totalHeight > 0 && (\n                  <tr\n                    style={{\n                      height: Math.max(\n                        0,\n                        totalHeight -\n                          (virtualRows[virtualRows.length - 1]?.end ?? 0),\n                      ),\n                    }}\n                  >\n                    <td colSpan={tableColumns.length} style={{ padding: 0, border: 'none' }} />\n                  </tr>\n                )}\n              </>\n            ) : rows.length === 0 ? (\n              <tr>\n                <td\n                  colSpan={tableColumns.length}\n                  className=\"dt__empty-cell\"\n                >\n                  {emptyMessage}\n                </td>\n              </tr>\n            ) : (\n              rows.map((row) => (\n                <DataRow\n                  key={row.id}\n                  row={row}\n                  onRowClick={onRowClick}\n                  mobileHiddenColumns={mobileHiddenColumns}\n                />\n              ))\n            )}\n          </tbody>\n        </table>\n      </div>\n\n      {/* ---- Pagination ---- */}\n      {enablePagination && !enableVirtualScrolling && (\n        <Pagination\n          table={table}\n          pageSizeOptions={resolvedPageSizeOptions}\n          filteredRowCount={filteredRowCount}\n          totalRowCount={totalRowCount}\n        />\n      )}\n\n      {/* ---- Virtual Scroll Info ---- */}\n      {enableVirtualScrolling && (\n        <div className=\"dt__virtual-info\">\n          <span className=\"dt__page-info\">\n            Showing {allRows.length.toLocaleString()} of{' '}\n            {totalRowCount.toLocaleString()} rows\n            {hasActiveFilters ? ' (filtered)' : ''}\n          </span>\n        </div>\n      )}\n    </div>\n  );\n}\n\n/* --------------------------------------------------------------------------\n   HeaderCell Sub-component\n   -------------------------------------------------------------------------- */\n\nfunction HeaderCell<T>({\n  header,\n  mobileHiddenColumns,\n  enableColumnFilters,\n}: {\n  header: Header<T, unknown>;\n  mobileHiddenColumns: string[];\n  enableColumnFilters: boolean;\n}) {\n  const isSortable = header.column.getCanSort();\n  const sortDirection = header.column.getIsSorted();\n  const isHiddenMobile = mobileHiddenColumns.includes(header.column.id);\n\n  return (\n    <th\n      className={`dt__th ${isSortable ? 'dt__th--sortable' : ''} ${isHiddenMobile ? 'dt__th--mobile-hidden' : ''} ${header.column.id === '_select' ? 'dt__th--checkbox' : ''}`}\n      style={{ width: header.getSize() !== 150 ? header.getSize() : undefined }}\n      onClick={isSortable ? header.column.getToggleSortingHandler() : undefined}\n      aria-sort={\n        sortDirection === 'asc'\n          ? 'ascending'\n          : sortDirection === 'desc'\n            ? 'descending'\n            : 'none'\n      }\n      role=\"columnheader\"\n      tabIndex={isSortable ? 0 : undefined}\n      onKeyDown={\n        isSortable\n          ? (e) => {\n              if (e.key === 'Enter' || e.key === ' ') {\n                e.preventDefault();\n                header.column.toggleSorting(undefined, e.shiftKey);\n              }\n            }\n          : undefined\n      }\n    >\n      <div className=\"dt__th-content\">\n        {header.isPlaceholder\n          ? null\n          : flexRender(header.column.columnDef.header, header.getContext())}\n        {isSortable && (\n          <span className=\"dt__sort-indicator\" aria-hidden=\"true\">\n            {sortDirection === 'asc' ? (\n              <span className=\"dt__sort-icon dt__sort-icon--active\">{'\\u25B2'}</span>\n            ) : sortDirection === 'desc' ? (\n              <span className=\"dt__sort-icon dt__sort-icon--active\">{'\\u25BC'}</span>\n            ) : (\n              <span className=\"dt__sort-icon\">{'\\u25B2\\u25BC'}</span>\n            )}\n          </span>\n        )}\n      </div>\n\n      {/* Column filter */}\n      {enableColumnFilters && header.column.getCanFilter() && header.column.id !== '_select' && (\n        <div className=\"dt__column-filter\" onClick={(e) => e.stopPropagation()}>\n          <input\n            type=\"text\"\n            className=\"dt__filter-input\"\n            placeholder={`Filter...`}\n            value={(header.column.getFilterValue() as string) ?? ''}\n            onChange={(e) => header.column.setFilterValue(e.target.value || undefined)}\n            aria-label={`Filter ${typeof header.column.columnDef.header === 'string' ? header.column.columnDef.header : header.column.id}`}\n          />\n        </div>\n      )}\n    </th>\n  );\n}\n\n/* --------------------------------------------------------------------------\n   DataRow Sub-component\n   -------------------------------------------------------------------------- */\n\nfunction DataRow<T>({\n  row,\n  onRowClick,\n  mobileHiddenColumns,\n  style,\n}: {\n  row: Row<T>;\n  onRowClick?: (row: T) => void;\n  mobileHiddenColumns: string[];\n  style?: React.CSSProperties;\n}) {\n  return (\n    <tr\n      className={`dt__tr ${row.getIsSelected() ? 'dt__tr--selected' : ''} ${onRowClick ? 'dt__tr--clickable' : ''}`}\n      onClick={onRowClick ? () => onRowClick(row.original) : undefined}\n      style={style}\n      role=\"row\"\n      aria-selected={row.getIsSelected() || undefined}\n      tabIndex={onRowClick ? 0 : undefined}\n      onKeyDown={\n        onRowClick\n          ? (e) => {\n              if (e.key === 'Enter') onRowClick(row.original);\n            }\n          : undefined\n      }\n    >\n      {row.getVisibleCells().map((cell) => {\n        const isHiddenMobile = mobileHiddenColumns.includes(cell.column.id);\n        return (\n          <td\n            key={cell.id}\n            className={`dt__td ${isHiddenMobile ? 'dt__td--mobile-hidden' : ''} ${cell.column.id === '_select' ? 'dt__td--checkbox' : ''}`}\n            role=\"gridcell\"\n          >\n            {flexRender(cell.column.columnDef.cell, cell.getContext())}\n          </td>\n        );\n      })}\n    </tr>\n  );\n}\n\n/* --------------------------------------------------------------------------\n   Pagination Sub-component\n   -------------------------------------------------------------------------- */\n\nfunction Pagination<T>({\n  table,\n  pageSizeOptions,\n  filteredRowCount,\n  totalRowCount,\n}: {\n  table: Table<T>;\n  pageSizeOptions: number[];\n  filteredRowCount: number;\n  totalRowCount: number;\n}) {\n  const pageIndex = table.getState().pagination.pageIndex;\n  const pageSize = table.getState().pagination.pageSize;\n  const pageCount = table.getPageCount();\n  const startRow = pageIndex * pageSize + 1;\n  const endRow = Math.min((pageIndex + 1) * pageSize, filteredRowCount);\n\n  // Generate page numbers with ellipsis\n  const getPageNumbers = (): (number | 'ellipsis')[] => {\n    if (pageCount <= 7) {\n      return Array.from({ length: pageCount }, (_, i) => i);\n    }\n    const pages: (number | 'ellipsis')[] = [0];\n    if (pageIndex > 2) pages.push('ellipsis');\n    for (\n      let i = Math.max(1, pageIndex - 1);\n      i <= Math.min(pageCount - 2, pageIndex + 1);\n      i++\n    ) {\n      pages.push(i);\n    }\n    if (pageIndex < pageCount - 3) pages.push('ellipsis');\n    pages.push(pageCount - 1);\n    return pages;\n  };\n\n  return (\n    <div className=\"dt__pagination\" role=\"navigation\" aria-label=\"Table pagination\">\n      {/* Left: row info */}\n      <div className=\"dt__pagination-info\">\n        <span className=\"dt__page-info\">\n          {filteredRowCount > 0\n            ? `${startRow}--${endRow} of ${filteredRowCount.toLocaleString()}`\n            : '0 results'}\n          {filteredRowCount !== totalRowCount && (\n            <span className=\"dt__page-info-filtered\">\n              {' '}\n              (filtered from {totalRowCount.toLocaleString()})\n            </span>\n          )}\n        </span>\n      </div>\n\n      {/* Center: page buttons */}\n      <div className=\"dt__pagination-pages\">\n        <button\n          className=\"dt__page-btn\"\n          onClick={() => table.setPageIndex(0)}\n          disabled={!table.getCanPreviousPage()}\n          aria-label=\"First page\"\n        >\n          &laquo;\n        </button>\n        <button\n          className=\"dt__page-btn\"\n          onClick={() => table.previousPage()}\n          disabled={!table.getCanPreviousPage()}\n          aria-label=\"Previous page\"\n        >\n          &lsaquo;\n        </button>\n\n        {getPageNumbers().map((pageNum, i) =>\n          pageNum === 'ellipsis' ? (\n            <span key={`ellipsis-${i}`} className=\"dt__page-ellipsis\">\n              &hellip;\n            </span>\n          ) : (\n            <button\n              key={pageNum}\n              className={`dt__page-btn ${pageNum === pageIndex ? 'dt__page-btn--active' : ''}`}\n              onClick={() => table.setPageIndex(pageNum)}\n              aria-label={`Page ${pageNum + 1}`}\n              aria-current={pageNum === pageIndex ? 'page' : undefined}\n            >\n              {pageNum + 1}\n            </button>\n          ),\n        )}\n\n        <button\n          className=\"dt__page-btn\"\n          onClick={() => table.nextPage()}\n          disabled={!table.getCanNextPage()}\n          aria-label=\"Next page\"\n        >\n          &rsaquo;\n        </button>\n        <button\n          className=\"dt__page-btn\"\n          onClick={() => table.setPageIndex(pageCount - 1)}\n          disabled={!table.getCanNextPage()}\n          aria-label=\"Last page\"\n        >\n          &raquo;\n        </button>\n      </div>\n\n      {/* Right: page size selector */}\n      <div className=\"dt__pagination-size\">\n        <label htmlFor=\"dt-page-size\" className=\"dt__page-size-label\">\n          Rows per page:\n        </label>\n        <select\n          id=\"dt-page-size\"\n          className=\"dt__page-size-select\"\n          value={pageSize}\n          onChange={(e) => table.setPageSize(Number(e.target.value))}\n        >\n          {pageSizeOptions.map((size) => (\n            <option key={size} value={size}>\n              {size}\n            </option>\n          ))}\n        </select>\n      </div>\n    </div>\n  );\n}\n\nexport default DataTable;\n","/* ==========================================================================\n   Transaction Column Definitions for TanStack Table\n   Reusable column configs for the sales Transaction type.\n   ========================================================================== */\n\nimport React from 'react';\nimport { createColumnHelper } from '@tanstack/react-table';\nimport type { Transaction } from '../../types/dashboard';\nimport { formatCurrency, formatDate } from '../../utils/formatters';\n\nconst columnHelper = createColumnHelper<Transaction>();\n\n/* --------------------------------------------------------------------------\n   Status Badge Renderer\n   -------------------------------------------------------------------------- */\n\nfunction StatusBadge({ status }: { status: Transaction['status'] }) {\n  const variantMap: Record<Transaction['status'], string> = {\n    completed: 'success',\n    pending: 'warning',\n    refunded: 'danger',\n    cancelled: 'danger',\n  };\n  const variant = variantMap[status] || 'default';\n\n  return (\n    <span className={`badge badge--${variant}`}>\n      {status.charAt(0).toUpperCase() + status.slice(1)}\n    </span>\n  );\n}\n\n/* --------------------------------------------------------------------------\n   Full Column Set (Desktop)\n   -------------------------------------------------------------------------- */\n\nexport const transactionColumns = [\n  columnHelper.accessor('id', {\n    header: 'Transaction ID',\n    cell: (info) => (\n      <span className=\"dt__cell-mono\">{info.getValue()}</span>\n    ),\n    size: 140,\n    enableColumnFilter: true,\n  }),\n  columnHelper.accessor('date', {\n    header: 'Date',\n    cell: (info) => formatDate(info.getValue(), 'medium'),\n    sortingFn: 'datetime',\n    enableColumnFilter: true,\n    size: 130,\n  }),\n  columnHelper.accessor('customer', {\n    header: 'Customer',\n    enableColumnFilter: true,\n    size: 160,\n  }),\n  columnHelper.accessor('product', {\n    header: 'Product',\n    enableColumnFilter: true,\n    size: 160,\n  }),\n  columnHelper.accessor('category', {\n    header: 'Category',\n    enableColumnFilter: true,\n    size: 130,\n  }),\n  columnHelper.accessor('amount', {\n    header: 'Amount',\n    cell: (info) => (\n      <span className=\"dt__cell-currency\">{formatCurrency(info.getValue())}</span>\n    ),\n    enableColumnFilter: false,\n    size: 120,\n    meta: { align: 'right' },\n  }),\n  columnHelper.accessor('quantity', {\n    header: 'Qty',\n    enableColumnFilter: false,\n    size: 70,\n    meta: { align: 'right' },\n  }),\n  columnHelper.accessor('status', {\n    header: 'Status',\n    cell: (info) => <StatusBadge status={info.getValue()} />,\n    enableColumnFilter: true,\n    size: 110,\n  }),\n  columnHelper.accessor('region', {\n    header: 'Region',\n    enableColumnFilter: true,\n    size: 140,\n  }),\n  columnHelper.accessor('salesRep', {\n    header: 'Sales Rep',\n    enableColumnFilter: true,\n    size: 140,\n  }),\n];\n\n/* --------------------------------------------------------------------------\n   Mobile Priority Columns (hidden on small screens)\n   These column IDs will be hidden on mobile viewports.\n   -------------------------------------------------------------------------- */\n\nexport const transactionColumnsMobile: string[] = [\n  'category',\n  'quantity',\n  'region',\n  'salesRep',\n];\n","import React, { useState, useCallback } from 'react';\nimport { useDashboard } from '../../context/DashboardContext';\nimport type { DatePreset, FilterPreset } from '../../types/dashboard';\n\n/* ==========================================================================\n   AdvancedFilterPanel\n   Full-featured filter panel with DateRangePicker, MultiSelect category\n   filter, SearchInput, and FilterPresets. Coordinates all widgets through\n   the DashboardContext.\n   ========================================================================== */\n\n/* --------------------------------------------------------------------------\n   Preset configuration\n   -------------------------------------------------------------------------- */\n\nconst DATE_PRESETS: { label: string; value: DatePreset }[] = [\n  { label: 'Today', value: 'today' },\n  { label: '7 Days', value: '7d' },\n  { label: '30 Days', value: '30d' },\n  { label: '90 Days', value: '90d' },\n  { label: 'Quarter', value: 'quarter' },\n  { label: 'Year', value: 'year' },\n  { label: 'Custom', value: 'custom' },\n];\n\nconst CATEGORY_OPTIONS = [\n  { label: 'Electronics', value: 'electronics' },\n  { label: 'Clothing', value: 'clothing' },\n  { label: 'Home & Garden', value: 'home' },\n  { label: 'Sports', value: 'sports' },\n  { label: 'Books', value: 'books' },\n];\n\nconst DEFAULT_FILTER_PRESETS: FilterPreset[] = [\n  {\n    id: 'last-week',\n    name: 'Last Week',\n    filters: { dateRange: { start: new Date(Date.now() - 7 * 86400000), end: new Date(), preset: '7d' } },\n  },\n  {\n    id: 'this-month',\n    name: 'This Month',\n    filters: { dateRange: { start: new Date(Date.now() - 30 * 86400000), end: new Date(), preset: '30d' } },\n    isDefault: true,\n  },\n  {\n    id: 'this-quarter',\n    name: 'This Quarter',\n    filters: { dateRange: { start: new Date(Date.now() - 90 * 86400000), end: new Date(), preset: '90d' } },\n  },\n];\n\n/* --------------------------------------------------------------------------\n   Component Props\n   -------------------------------------------------------------------------- */\n\nexport interface AdvancedFilterPanelProps {\n  /** Override category options */\n  categories?: { label: string; value: string }[];\n  /** Override filter presets */\n  presets?: FilterPreset[];\n  /** Called when the user clicks \"Apply\" */\n  onApply?: () => void;\n}\n\n/* --------------------------------------------------------------------------\n   AdvancedFilterPanel\n   -------------------------------------------------------------------------- */\n\nexport function AdvancedFilterPanel({\n  categories = CATEGORY_OPTIONS,\n  presets = DEFAULT_FILTER_PRESETS,\n  onApply,\n}: AdvancedFilterPanelProps) {\n  const {\n    filters,\n    setDatePreset,\n    setDateRange,\n    setCategories,\n    toggleCategory,\n    setSearch,\n    resetFilters,\n    activeFilterCount,\n    triggerRefresh,\n  } = useDashboard();\n\n  const [showCustomDates, setShowCustomDates] = useState(\n    filters.dateRange.preset === 'custom',\n  );\n  const [showCategoryDropdown, setShowCategoryDropdown] = useState(false);\n  const [showPresets, setShowPresets] = useState(false);\n\n  /* -- Date preset handler -- */\n  const handleDatePreset = useCallback(\n    (preset: DatePreset) => {\n      if (preset === 'custom') {\n        setShowCustomDates(true);\n      } else {\n        setShowCustomDates(false);\n        setDatePreset(preset);\n      }\n    },\n    [setDatePreset],\n  );\n\n  /* -- Custom date handler -- */\n  const handleCustomDate = useCallback(\n    (field: 'start' | 'end', value: string) => {\n      const date = new Date(value);\n      if (isNaN(date.getTime())) return;\n      setDateRange({\n        ...filters.dateRange,\n        [field]: date,\n        preset: 'custom',\n      });\n    },\n    [filters.dateRange, setDateRange],\n  );\n\n  /* -- Filter presets -- */\n  const handleLoadPreset = useCallback(\n    (preset: FilterPreset) => {\n      if (preset.filters.dateRange) {\n        setDateRange(preset.filters.dateRange);\n      }\n      if (preset.filters.categories) {\n        setCategories(preset.filters.categories);\n      }\n      setShowPresets(false);\n    },\n    [setDateRange, setCategories],\n  );\n\n  /* -- Apply -- */\n  const handleApply = useCallback(() => {\n    triggerRefresh();\n    onApply?.();\n  }, [triggerRefresh, onApply]);\n\n  return (\n    <div className=\"filter-panel\" role=\"search\" aria-label=\"Dashboard filters\">\n      {/* Search input */}\n      <div className=\"filter-panel__group\">\n        <label className=\"filter-panel__label\" htmlFor=\"filter-search\">\n          Search\n        </label>\n        <div className=\"filter-panel__search-wrapper\">\n          <SearchIcon />\n          <input\n            id=\"filter-search\"\n            type=\"search\"\n            className=\"filter-panel__search-input\"\n            placeholder=\"Search transactions...\"\n            value={filters.search}\n            onChange={(e) => setSearch(e.target.value)}\n          />\n        </div>\n      </div>\n\n      {/* Date range */}\n      <div className=\"filter-panel__group\">\n        <label className=\"filter-panel__label\">Date Range</label>\n        <div className=\"filter-panel__date-presets\" role=\"radiogroup\" aria-label=\"Date range presets\">\n          {DATE_PRESETS.map((p) => (\n            <button\n              key={p.value}\n              className={`filter-panel__preset-btn ${filters.dateRange.preset === p.value ? 'filter-panel__preset-btn--active' : ''}`}\n              onClick={() => handleDatePreset(p.value)}\n              role=\"radio\"\n              aria-checked={filters.dateRange.preset === p.value}\n            >\n              {p.label}\n            </button>\n          ))}\n        </div>\n\n        {showCustomDates && (\n          <div className=\"filter-panel__custom-dates\">\n            <input\n              type=\"date\"\n              className=\"filter-panel__date-input\"\n              value={toISODate(filters.dateRange.start)}\n              onChange={(e) => handleCustomDate('start', e.target.value)}\n              aria-label=\"Start date\"\n            />\n            <span className=\"filter-panel__date-separator\">to</span>\n            <input\n              type=\"date\"\n              className=\"filter-panel__date-input\"\n              value={toISODate(filters.dateRange.end)}\n              onChange={(e) => handleCustomDate('end', e.target.value)}\n              aria-label=\"End date\"\n            />\n          </div>\n        )}\n      </div>\n\n      {/* Category multi-select */}\n      <div className=\"filter-panel__group\">\n        <label className=\"filter-panel__label\">Category</label>\n        <div className=\"filter-panel__multiselect\">\n          <button\n            className=\"filter-panel__multiselect-trigger\"\n            onClick={() => setShowCategoryDropdown(!showCategoryDropdown)}\n            aria-haspopup=\"listbox\"\n            aria-expanded={showCategoryDropdown}\n          >\n            {filters.categories.length === 0\n              ? 'All Categories'\n              : `${filters.categories.length} selected`}\n            <span className=\"filter-panel__chevron\" aria-hidden=\"true\">\n              {showCategoryDropdown ? '\\u25B2' : '\\u25BC'}\n            </span>\n          </button>\n\n          {showCategoryDropdown && (\n            <div className=\"filter-panel__dropdown\" role=\"listbox\" aria-multiselectable=\"true\">\n              {categories.map((cat) => (\n                <label\n                  key={cat.value}\n                  className=\"filter-panel__dropdown-item\"\n                  role=\"option\"\n                  aria-selected={filters.categories.includes(cat.value)}\n                >\n                  <input\n                    type=\"checkbox\"\n                    checked={filters.categories.includes(cat.value)}\n                    onChange={() => toggleCategory(cat.value)}\n                  />\n                  <span>{cat.label}</span>\n                </label>\n              ))}\n            </div>\n          )}\n        </div>\n\n        {/* Active category chips */}\n        {filters.categories.length > 0 && (\n          <div className=\"filter-panel__chips\">\n            {filters.categories.map((cat) => {\n              const option = categories.find((c) => c.value === cat);\n              return (\n                <span key={cat} className=\"filter-panel__chip\">\n                  {option?.label ?? cat}\n                  <button\n                    className=\"filter-panel__chip-remove\"\n                    onClick={() => toggleCategory(cat)}\n                    aria-label={`Remove ${option?.label ?? cat} filter`}\n                  >\n                    &times;\n                  </button>\n                </span>\n              );\n            })}\n          </div>\n        )}\n      </div>\n\n      {/* Filter Presets */}\n      <div className=\"filter-panel__group filter-panel__group--presets\">\n        <button\n          className=\"filter-panel__presets-btn\"\n          onClick={() => setShowPresets(!showPresets)}\n          aria-haspopup=\"menu\"\n          aria-expanded={showPresets}\n        >\n          FilterPresets ({presets.length})\n        </button>\n        {showPresets && (\n          <div className=\"filter-panel__presets-menu\" role=\"menu\">\n            {presets.map((p) => (\n              <button\n                key={p.id}\n                role=\"menuitem\"\n                className=\"filter-panel__preset-item\"\n                onClick={() => handleLoadPreset(p)}\n              >\n                {p.name}\n                {p.isDefault && <span className=\"filter-panel__default-badge\">Default</span>}\n              </button>\n            ))}\n          </div>\n        )}\n      </div>\n\n      {/* Actions */}\n      <div className=\"filter-panel__actions\">\n        <button\n          className=\"filter-panel__apply-btn\"\n          onClick={handleApply}\n        >\n          Apply Filters\n        </button>\n        <button\n          className=\"filter-panel__reset-btn\"\n          onClick={resetFilters}\n          disabled={activeFilterCount === 0}\n        >\n          Reset{activeFilterCount > 0 ? ` (${activeFilterCount})` : ''}\n        </button>\n      </div>\n    </div>\n  );\n}\n\n/* --------------------------------------------------------------------------\n   Utilities\n   -------------------------------------------------------------------------- */\n\nfunction toISODate(date: Date): string {\n  return date.toISOString().split('T')[0];\n}\n\nfunction SearchIcon() {\n  return (\n    <svg\n      className=\"filter-panel__search-icon\"\n      width=\"16\"\n      height=\"16\"\n      viewBox=\"0 0 16 16\"\n      fill=\"none\"\n      aria-hidden=\"true\"\n    >\n      <path\n        d=\"M7 12A5 5 0 107 2a5 5 0 000 10zM14 14l-3.5-3.5\"\n        stroke=\"currentColor\"\n        strokeWidth=\"1.5\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n      />\n    </svg>\n  );\n}\n\nexport default AdvancedFilterPanel;\n","import React, { useState, useCallback } from 'react';\nimport type { WidgetConfig, WidgetType } from '../../types/dashboard';\n\n/* ==========================================================================\n   WidgetCatalog\n   A panel listing available widgets that users can add to or remove from\n   their customizable dashboard grid.\n   ========================================================================== */\n\n/* --------------------------------------------------------------------------\n   Available Widget Definitions\n   -------------------------------------------------------------------------- */\n\nexport interface WidgetDefinition {\n  id: string;\n  type: WidgetType;\n  title: string;\n  description: string;\n  /** Default grid dimensions */\n  defaultW: number;\n  defaultH: number;\n  /** Preview icon / label */\n  icon: string;\n  /** Whether widget can appear multiple times */\n  allowMultiple?: boolean;\n}\n\nexport const AVAILABLE_WIDGETS: WidgetDefinition[] = [\n  {\n    id: 'kpi-revenue',\n    type: 'kpi',\n    title: 'Revenue',\n    description: 'Total revenue with trend and sparkline',\n    defaultW: 3,\n    defaultH: 2,\n    icon: '$',\n  },\n  {\n    id: 'kpi-orders',\n    type: 'kpi',\n    title: 'Orders',\n    description: 'Total order count with trend',\n    defaultW: 3,\n    defaultH: 2,\n    icon: '#',\n  },\n  {\n    id: 'kpi-conversion',\n    type: 'kpi',\n    title: 'Conversion Rate',\n    description: 'Conversion rate with trend indicator',\n    defaultW: 3,\n    defaultH: 2,\n    icon: '%',\n  },\n  {\n    id: 'kpi-aov',\n    type: 'kpi',\n    title: 'Average Order Value',\n    description: 'AOV with sparkline and comparison',\n    defaultW: 3,\n    defaultH: 2,\n    icon: '\\u00F8', // avg symbol\n  },\n  {\n    id: 'chart-revenue-trend',\n    type: 'chart',\n    title: 'Revenue Trend',\n    description: 'Line/area chart of daily revenue over time',\n    defaultW: 8,\n    defaultH: 4,\n    icon: '\\u2571',\n  },\n  {\n    id: 'chart-comparison',\n    type: 'chart',\n    title: 'Product Comparison',\n    description: 'Bar chart comparing product performance',\n    defaultW: 6,\n    defaultH: 4,\n    icon: '\\u2503',\n  },\n  {\n    id: 'chart-category',\n    type: 'chart',\n    title: 'Category Breakdown',\n    description: 'Pie/donut chart of sales by category',\n    defaultW: 4,\n    defaultH: 4,\n    icon: '\\u25CB',\n  },\n  {\n    id: 'chart-distribution',\n    type: 'chart',\n    title: 'Regional Distribution',\n    description: 'Pie chart of sales distribution by region',\n    defaultW: 6,\n    defaultH: 4,\n    icon: '\\u25CB',\n  },\n  {\n    id: 'table-transactions',\n    type: 'table',\n    title: 'Transactions Table',\n    description: 'Sortable, filterable data table of recent transactions',\n    defaultW: 12,\n    defaultH: 5,\n    icon: '\\u2261',\n  },\n];\n\n/* --------------------------------------------------------------------------\n   Props\n   -------------------------------------------------------------------------- */\n\nexport interface WidgetCatalogProps {\n  /** IDs of widgets currently on the dashboard */\n  activeWidgetIds: string[];\n  /** Called when user wants to add a widget */\n  onAddWidget: (widget: WidgetDefinition) => void;\n  /** Called when user wants to remove a widget */\n  onRemoveWidget: (widgetId: string) => void;\n  /** Whether the catalog panel is open */\n  isOpen?: boolean;\n  /** Close handler */\n  onClose?: () => void;\n}\n\n/* --------------------------------------------------------------------------\n   Component\n   -------------------------------------------------------------------------- */\n\nexport function WidgetCatalog({\n  activeWidgetIds,\n  onAddWidget,\n  onRemoveWidget,\n  isOpen = true,\n  onClose,\n}: WidgetCatalogProps) {\n  const [filterType, setFilterType] = useState<WidgetType | 'all'>('all');\n  const [searchQuery, setSearchQuery] = useState('');\n\n  const filteredWidgets = AVAILABLE_WIDGETS.filter((w) => {\n    if (filterType !== 'all' && w.type !== filterType) return false;\n    if (searchQuery) {\n      const q = searchQuery.toLowerCase();\n      return (\n        w.title.toLowerCase().includes(q) ||\n        w.description.toLowerCase().includes(q)\n      );\n    }\n    return true;\n  });\n\n  const addWidget = useCallback(\n    (widget: WidgetDefinition) => {\n      onAddWidget(widget);\n    },\n    [onAddWidget],\n  );\n\n  const removeWidget = useCallback(\n    (widgetId: string) => {\n      onRemoveWidget(widgetId);\n    },\n    [onRemoveWidget],\n  );\n\n  if (!isOpen) return null;\n\n  return (\n    <aside className=\"widget-catalog\" role=\"complementary\" aria-label=\"Widget catalog\">\n      <div className=\"widget-catalog__header\">\n        <h3 className=\"widget-catalog__title\">Widget Catalog</h3>\n        {onClose && (\n          <button\n            className=\"widget-catalog__close-btn\"\n            onClick={onClose}\n            aria-label=\"Close widget catalog\"\n          >\n            &times;\n          </button>\n        )}\n      </div>\n\n      {/* Search */}\n      <div className=\"widget-catalog__search\">\n        <input\n          type=\"search\"\n          placeholder=\"Search widgets...\"\n          value={searchQuery}\n          onChange={(e) => setSearchQuery(e.target.value)}\n          className=\"widget-catalog__search-input\"\n          aria-label=\"Search widgets\"\n        />\n      </div>\n\n      {/* Type filter */}\n      <div className=\"widget-catalog__type-filter\" role=\"tablist\" aria-label=\"Filter by type\">\n        {(['all', 'kpi', 'chart', 'table'] as const).map((type) => (\n          <button\n            key={type}\n            className={`widget-catalog__type-btn ${filterType === type ? 'widget-catalog__type-btn--active' : ''}`}\n            onClick={() => setFilterType(type)}\n            role=\"tab\"\n            aria-selected={filterType === type}\n          >\n            {type === 'all' ? 'All' : type.charAt(0).toUpperCase() + type.slice(1)}\n          </button>\n        ))}\n      </div>\n\n      {/* Widget list */}\n      <ul className=\"widget-catalog__list\" role=\"list\">\n        {filteredWidgets.map((widget) => {\n          const isActive = activeWidgetIds.includes(widget.id);\n          return (\n            <li key={widget.id} className=\"widget-catalog__item\">\n              <div className=\"widget-catalog__item-icon\" aria-hidden=\"true\">\n                {widget.icon}\n              </div>\n              <div className=\"widget-catalog__item-info\">\n                <span className=\"widget-catalog__item-title\">{widget.title}</span>\n                <span className=\"widget-catalog__item-description\">\n                  {widget.description}\n                </span>\n              </div>\n              <button\n                className={`widget-catalog__item-action ${isActive ? 'widget-catalog__item-action--remove' : ''}`}\n                onClick={() => (isActive ? removeWidget(widget.id) : addWidget(widget))}\n                aria-label={isActive ? `Remove ${widget.title}` : `Add ${widget.title}`}\n              >\n                {isActive ? '\\u2212' : '+'}\n              </button>\n            </li>\n          );\n        })}\n      </ul>\n\n      {filteredWidgets.length === 0 && (\n        <p className=\"widget-catalog__empty\">No widgets match your search.</p>\n      )}\n    </aside>\n  );\n}\n\nexport default WidgetCatalog;\n","import { useState, useEffect, useRef, useCallback } from 'react';\n\n/* ==========================================================================\n   useSmartPolling\n   Periodic data fetching with tab visibility detection, exponential backoff\n   on errors, and manual pause/resume control.\n   ========================================================================== */\n\nexport interface SmartPollingOptions {\n  /** Polling interval in milliseconds (default: 30000) */\n  interval?: number;\n  /** Whether polling is initially enabled (default: true) */\n  enabled?: boolean;\n  /** Pause polling when the browser tab is hidden (default: true) */\n  pauseOnHidden?: boolean;\n  /** Maximum back-off interval on consecutive errors (default: 60000) */\n  maxBackoff?: number;\n  /** Whether to fetch immediately on mount (default: true) */\n  immediate?: boolean;\n}\n\nexport interface SmartPollingResult<T> {\n  data: T | null;\n  error: Error | null;\n  isPolling: boolean;\n  lastFetched: number | null;\n  /** Resume polling */\n  start: () => void;\n  /** Pause polling */\n  pause: () => void;\n  /** Trigger an immediate fetch regardless of timer */\n  refetch: () => void;\n}\n\nexport function useSmartPolling<T>(\n  fetchFn: () => Promise<T>,\n  options: SmartPollingOptions = {},\n): SmartPollingResult<T> {\n  const {\n    interval = 30_000,\n    enabled = true,\n    pauseOnHidden = true,\n    maxBackoff = 60_000,\n    immediate = true,\n  } = options;\n\n  const [data, setData] = useState<T | null>(null);\n  const [error, setError] = useState<Error | null>(null);\n  const [isPolling, setIsPolling] = useState(enabled);\n  const [lastFetched, setLastFetched] = useState<number | null>(null);\n\n  const errorCountRef = useRef(0);\n  const timerRef = useRef<ReturnType<typeof setInterval> | null>(null);\n  const fetchFnRef = useRef(fetchFn);\n  fetchFnRef.current = fetchFn;\n\n  // Core fetch logic\n  const doFetch = useCallback(async () => {\n    try {\n      const result = await fetchFnRef.current();\n      setData(result);\n      setError(null);\n      setLastFetched(Date.now());\n      errorCountRef.current = 0;\n    } catch (err) {\n      setError(err instanceof Error ? err : new Error(String(err)));\n      errorCountRef.current++;\n    }\n  }, []);\n\n  // Start / stop polling\n  useEffect(() => {\n    if (!isPolling) {\n      if (timerRef.current) {\n        clearInterval(timerRef.current);\n        timerRef.current = null;\n      }\n      return;\n    }\n\n    if (immediate) {\n      doFetch();\n    }\n\n    const currentInterval = Math.min(\n      interval * Math.pow(2, errorCountRef.current),\n      maxBackoff,\n    );\n\n    timerRef.current = setInterval(doFetch, currentInterval);\n\n    return () => {\n      if (timerRef.current) {\n        clearInterval(timerRef.current);\n        timerRef.current = null;\n      }\n    };\n  }, [isPolling, interval, maxBackoff, immediate, doFetch]);\n\n  // Pause when tab hidden\n  useEffect(() => {\n    if (!pauseOnHidden) return;\n\n    const handleVisibilityChange = () => {\n      if (document.hidden) {\n        if (timerRef.current) {\n          clearInterval(timerRef.current);\n          timerRef.current = null;\n        }\n      } else if (isPolling) {\n        // Tab became visible again -- immediate fetch + restart timer\n        doFetch();\n        timerRef.current = setInterval(doFetch, interval);\n      }\n    };\n\n    document.addEventListener('visibilitychange', handleVisibilityChange);\n    return () => {\n      document.removeEventListener('visibilitychange', handleVisibilityChange);\n    };\n  }, [pauseOnHidden, isPolling, interval, doFetch]);\n\n  const start = useCallback(() => setIsPolling(true), []);\n  const pause = useCallback(() => setIsPolling(false), []);\n  const refetch = useCallback(() => {\n    doFetch();\n  }, [doFetch]);\n\n  return { data, error, isPolling, lastFetched, start, pause, refetch };\n}\n","/* ==========================================================================\n   Dashboard Export Utilities\n   Export dashboard content to PDF, CSV, and Image formats.\n   ========================================================================== */\n\nimport type { ExportFormat, ExportOptions, Transaction } from '../types/dashboard';\n\n/* --------------------------------------------------------------------------\n   CSV Export\n   -------------------------------------------------------------------------- */\n\n/**\n * Export an array of objects to a CSV file and trigger a download.\n */\nexport function exportToCSV<T extends Record<string, any>>(\n  data: T[],\n  options: ExportOptions = { format: 'csv' },\n): void {\n  if (!data || data.length === 0) {\n    console.warn('exportToCSV: No data to export');\n    return;\n  }\n\n  const filename = options.filename || `dashboard-export-${getTimestamp()}`;\n\n  // Build CSV header from object keys\n  const headers = Object.keys(data[0]);\n  const csvRows: string[] = [];\n\n  // Header row\n  csvRows.push(headers.map(escapeCSV).join(','));\n\n  // Data rows\n  for (const row of data) {\n    const values = headers.map((header) => escapeCSV(String(row[header] ?? '')));\n    csvRows.push(values.join(','));\n  }\n\n  const csvContent = csvRows.join('\\n');\n  downloadBlob(csvContent, `${filename}.csv`, 'text/csv;charset=utf-8;');\n}\n\nfunction escapeCSV(value: string): string {\n  if (value.includes(',') || value.includes('\"') || value.includes('\\n')) {\n    return `\"${value.replace(/\"/g, '\"\"')}\"`;\n  }\n  return value;\n}\n\n/* --------------------------------------------------------------------------\n   Image Export\n   -------------------------------------------------------------------------- */\n\n/**\n * Export a DOM element as a PNG image using html2canvas-like approach.\n * Falls back to an SVG-based capture if html2canvas is not available.\n */\nexport async function exportToImage(\n  element: HTMLElement | null,\n  options: ExportOptions = { format: 'image' },\n): Promise<void> {\n  if (!element) {\n    console.warn('exportToImage: No element provided');\n    return;\n  }\n\n  const filename = options.filename || `dashboard-export-${getTimestamp()}`;\n\n  try {\n    // Attempt to use html2canvas if available\n    const html2canvas = (window as any).html2canvas;\n    if (typeof html2canvas === 'function') {\n      const canvas = await html2canvas(element, {\n        backgroundColor: '#ffffff',\n        scale: 2,\n        useCORS: true,\n      });\n      const dataUrl = canvas.toDataURL('image/png');\n      downloadDataUrl(dataUrl, `${filename}.png`);\n      return;\n    }\n\n    // Fallback: use SVG foreignObject\n    const { width, height } = element.getBoundingClientRect();\n    const serializer = new XMLSerializer();\n    const clone = element.cloneNode(true) as HTMLElement;\n\n    const svg = `\n      <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"${width}\" height=\"${height}\">\n        <foreignObject width=\"100%\" height=\"100%\">\n          ${serializer.serializeToString(clone)}\n        </foreignObject>\n      </svg>\n    `;\n\n    const svgBlob = new Blob([svg], { type: 'image/svg+xml;charset=utf-8' });\n    const url = URL.createObjectURL(svgBlob);\n    downloadDataUrl(url, `${filename}.svg`);\n    URL.revokeObjectURL(url);\n  } catch (err) {\n    console.error('exportToImage failed:', err);\n  }\n}\n\n/* --------------------------------------------------------------------------\n   PDF Export\n   -------------------------------------------------------------------------- */\n\n/**\n * Export a DOM element as a PDF.\n * Uses the browser's built-in print functionality as a reliable fallback.\n * For production, integrate with jsPDF or similar.\n */\nexport async function exportToPDF(\n  element: HTMLElement | null,\n  options: ExportOptions = { format: 'pdf' },\n): Promise<void> {\n  if (!element) {\n    console.warn('exportToPDF: No element provided');\n    return;\n  }\n\n  const filename = options.filename || `dashboard-export-${getTimestamp()}`;\n\n  try {\n    // Check for jsPDF\n    const jsPDF = (window as any).jspdf?.jsPDF;\n    if (jsPDF) {\n      const doc = new jsPDF('l', 'mm', 'a4');\n      const { width, height } = element.getBoundingClientRect();\n      const imgData = await elementToDataUrl(element);\n\n      if (imgData) {\n        const pdfWidth = doc.internal.pageSize.getWidth();\n        const pdfHeight = (height / width) * pdfWidth;\n\n        if (options.includeTimestamp) {\n          doc.setFontSize(8);\n          doc.text(`Generated: ${new Date().toLocaleString()}`, 10, 8);\n        }\n\n        doc.addImage(imgData, 'PNG', 0, 10, pdfWidth, pdfHeight);\n        doc.save(`${filename}.pdf`);\n        return;\n      }\n    }\n\n    // Fallback: use window.print()\n    const printWindow = window.open('', '_blank');\n    if (printWindow) {\n      printWindow.document.write(`\n        <!DOCTYPE html>\n        <html>\n        <head>\n          <title>${filename}</title>\n          <style>\n            body { margin: 0; padding: 20px; font-family: -apple-system, sans-serif; }\n            @media print { body { padding: 0; } }\n          </style>\n        </head>\n        <body>${element.outerHTML}</body>\n        </html>\n      `);\n      printWindow.document.close();\n      printWindow.print();\n    }\n  } catch (err) {\n    console.error('exportToPDF failed:', err);\n  }\n}\n\n/* --------------------------------------------------------------------------\n   Unified Export Handler\n   -------------------------------------------------------------------------- */\n\n/**\n * Route export to the appropriate handler based on format.\n */\nexport async function exportDashboard(\n  format: ExportFormat,\n  options: {\n    element?: HTMLElement | null;\n    data?: Record<string, any>[];\n    filename?: string;\n    includeTimestamp?: boolean;\n  } = {},\n): Promise<void> {\n  const exportOptions: ExportOptions = {\n    format,\n    filename: options.filename,\n    includeTimestamp: options.includeTimestamp,\n  };\n\n  switch (format) {\n    case 'csv':\n      if (options.data) {\n        exportToCSV(options.data, exportOptions);\n      }\n      break;\n    case 'image':\n      await exportToImage(options.element ?? null, exportOptions);\n      break;\n    case 'pdf':\n      await exportToPDF(options.element ?? null, exportOptions);\n      break;\n    default:\n      console.warn(`Unsupported export format: ${format}`);\n  }\n}\n\n/* --------------------------------------------------------------------------\n   Internal Helpers\n   -------------------------------------------------------------------------- */\n\nfunction getTimestamp(): string {\n  return new Date().toISOString().replace(/[:.]/g, '-').slice(0, 19);\n}\n\nfunction downloadBlob(content: string, filename: string, mimeType: string): void {\n  const blob = new Blob([content], { type: mimeType });\n  const url = URL.createObjectURL(blob);\n  downloadDataUrl(url, filename);\n  URL.revokeObjectURL(url);\n}\n\nfunction downloadDataUrl(url: string, filename: string): void {\n  const link = document.createElement('a');\n  link.href = url;\n  link.download = filename;\n  link.style.display = 'none';\n  document.body.appendChild(link);\n  link.click();\n  document.body.removeChild(link);\n}\n\nasync function elementToDataUrl(element: HTMLElement): Promise<string | null> {\n  try {\n    const html2canvas = (window as any).html2canvas;\n    if (typeof html2canvas === 'function') {\n      const canvas = await html2canvas(element, {\n        backgroundColor: '#ffffff',\n        scale: 2,\n      });\n      return canvas.toDataURL('image/png');\n    }\n  } catch {}\n  return null;\n}\n","import { useState, useCallback, useRef } from 'react';\nimport { useToast } from '../components/feedback/ToastProvider';\nimport type { ExportFormat } from '../types/dashboard';\n\n/* ==========================================================================\n   useDashboardFeedback\n   Integration hook that connects toast notifications and progress tracking\n   with dashboard actions: export, refresh, bulk operations, and errors.\n   ========================================================================== */\n\nexport interface ExportProgress {\n  isExporting: boolean;\n  progress: number;\n  format: ExportFormat | null;\n}\n\nexport function useDashboardFeedback() {\n  const toast = useToast();\n\n  // --- Export Progress ---\n  const [exportProgress, setExportProgress] = useState<ExportProgress>({\n    isExporting: false,\n    progress: 0,\n    format: null,\n  });\n\n  const exportInterval = useRef<ReturnType<typeof setInterval> | null>(null);\n\n  /**\n   * Wrap an export operation with progress simulation and toast feedback.\n   */\n  const handleExportWithFeedback = useCallback(\n    async (\n      format: string,\n      exportFn: () => Promise<void>,\n    ) => {\n      setExportProgress({ isExporting: true, progress: 0, format: format as ExportFormat });\n\n      // Simulate progress for better UX\n      let progress = 0;\n      exportInterval.current = setInterval(() => {\n        progress = Math.min(progress + Math.random() * 15, 90);\n        setExportProgress((prev) => ({ ...prev, progress }));\n      }, 200);\n\n      try {\n        await exportFn();\n\n        // Complete progress\n        if (exportInterval.current) clearInterval(exportInterval.current);\n        setExportProgress({ isExporting: true, progress: 100, format: format as ExportFormat });\n\n        // Short delay to show completion\n        setTimeout(() => {\n          setExportProgress({ isExporting: false, progress: 0, format: null });\n        }, 500);\n\n        toast.success(\n          'Export complete',\n          `Your ${format.toUpperCase()} file has been downloaded.`,\n        );\n      } catch (err) {\n        if (exportInterval.current) clearInterval(exportInterval.current);\n        setExportProgress({ isExporting: false, progress: 0, format: null });\n\n        toast.error(\n          'Export failed',\n          err instanceof Error ? err.message : 'An unexpected error occurred.',\n        );\n      }\n    },\n    [toast],\n  );\n\n  // --- Refresh Feedback ---\n  const handleRefreshWithFeedback = useCallback(\n    (refreshFn: () => void) => {\n      refreshFn();\n      toast.success('Dashboard refreshed', 'All widgets have been updated with the latest data.');\n    },\n    [toast],\n  );\n\n  // --- Filter Applied Feedback ---\n  const handleFilterApplied = useCallback(\n    (filterCount: number) => {\n      if (filterCount > 0) {\n        toast.info(\n          'Filters applied',\n          `${filterCount} filter${filterCount > 1 ? 's' : ''} active. Showing filtered results.`,\n        );\n      } else {\n        toast.info('Filters cleared', 'Showing all data.');\n      }\n    },\n    [toast],\n  );\n\n  // --- Bulk Action Feedback ---\n  const handleBulkAction = useCallback(\n    (action: string, count: number) => {\n      toast.success(\n        `${action} complete`,\n        `${count} item${count > 1 ? 's' : ''} ${action.toLowerCase()}.`,\n      );\n    },\n    [toast],\n  );\n\n  // --- Error Feedback ---\n  const handleError = useCallback(\n    (title: string, message?: string) => {\n      toast.error(title, message);\n    },\n    [toast],\n  );\n\n  // --- Connection Status ---\n  const handleConnectionChange = useCallback(\n    (isOnline: boolean) => {\n      if (isOnline) {\n        toast.success('Connection restored', 'Auto-refresh has resumed.');\n      } else {\n        toast.warning(\n          'Connection lost',\n          'You are offline. Dashboard data may be stale.',\n        );\n      }\n    },\n    [toast],\n  );\n\n  // --- Confirmation Helper ---\n  const [confirmDialog, setConfirmDialog] = useState<{\n    isOpen: boolean;\n    title: string;\n    description: string;\n    variant: 'danger' | 'warning' | 'info';\n    confirmLabel: string;\n    onConfirm: () => void | Promise<void>;\n  }>({\n    isOpen: false,\n    title: '',\n    description: '',\n    variant: 'danger',\n    confirmLabel: 'Confirm',\n    onConfirm: () => {},\n  });\n\n  const showConfirmation = useCallback(\n    (config: {\n      title: string;\n      description: string;\n      variant?: 'danger' | 'warning' | 'info';\n      confirmLabel?: string;\n      onConfirm: () => void | Promise<void>;\n    }) => {\n      setConfirmDialog({\n        isOpen: true,\n        title: config.title,\n        description: config.description,\n        variant: config.variant || 'danger',\n        confirmLabel: config.confirmLabel || 'Confirm',\n        onConfirm: config.onConfirm,\n      });\n    },\n    [],\n  );\n\n  const closeConfirmation = useCallback(() => {\n    setConfirmDialog((prev) => ({ ...prev, isOpen: false }));\n  }, []);\n\n  return {\n    toast,\n    exportProgress,\n    handleExportWithFeedback,\n    handleRefreshWithFeedback,\n    handleFilterApplied,\n    handleBulkAction,\n    handleError,\n    handleConnectionChange,\n    confirmDialog,\n    showConfirmation,\n    closeConfirmation,\n  };\n}\n\nexport default useDashboardFeedback;\n","/**\n * Mock Data Generator for Sales Dashboard\n *\n * Generates realistic mock data for KPIs, charts, and tables.\n * In production, replace these with API calls.\n */\n\nimport type { KPIData, ChartDataPoint, Transaction, DashboardFilters, SalesData } from '../types/dashboard';\n\n/* --------------------------------------------------------------------------\n   Main Data Generator\n   -------------------------------------------------------------------------- */\n\nexport async function generateMockSalesData(\n  filters: DashboardFilters,\n): Promise<SalesData & { regionData: ChartDataPoint[] }> {\n  // Simulate network delay\n  await new Promise((resolve) => setTimeout(resolve, 300));\n\n  const kpis = generateKPIs();\n  const revenueHistory = generateRevenueHistory(filters);\n  const productPerformance = generateProductPerformance();\n  const categoryBreakdown = generateCategoryBreakdown();\n  const transactions = generateTransactions(filters);\n  const regionData = generateRegionData();\n\n  return {\n    kpis,\n    revenueHistory,\n    productPerformance,\n    categoryBreakdown,\n    transactions,\n    regionData,\n  };\n}\n\n/* --------------------------------------------------------------------------\n   KPI Data\n   -------------------------------------------------------------------------- */\n\nfunction generateKPIs(): KPIData[] {\n  return [\n    {\n      id: 'revenue',\n      label: 'Revenue',\n      value: 1_245_832,\n      previousValue: 1_080_500,\n      trend: 15.3,\n      trendDirection: 'up',\n      status: 'positive',\n      format: 'currency',\n      icon: '$',\n      comparisonLabel: 'vs last month',\n      sparkline: [100, 120, 115, 140, 155, 145, 160, 180, 175, 190, 210, 205],\n    },\n    {\n      id: 'orders',\n      label: 'Orders',\n      value: 3_421,\n      previousValue: 3_148,\n      trend: 8.7,\n      trendDirection: 'up',\n      status: 'positive',\n      format: 'number',\n      icon: '#',\n      comparisonLabel: 'vs last month',\n      sparkline: [80, 95, 88, 105, 110, 102, 115, 120, 118, 125, 130, 128],\n    },\n    {\n      id: 'conversion',\n      label: 'Conversion Rate',\n      value: 3.8,\n      previousValue: 3.3,\n      trend: 0.5,\n      trendDirection: 'up',\n      status: 'positive',\n      format: 'percentage',\n      icon: '%',\n      comparisonLabel: 'vs last month',\n      target: 5.0,\n      sparkline: [2.8, 3.0, 3.1, 3.4, 3.2, 3.5, 3.6, 3.4, 3.7, 3.8, 3.9, 3.8],\n    },\n    {\n      id: 'aov',\n      label: 'Average Order Value',\n      value: 364.27,\n      previousValue: 343.14,\n      trend: 6.2,\n      trendDirection: 'up',\n      status: 'positive',\n      format: 'currency',\n      icon: '\\u00F8',\n      comparisonLabel: 'vs last month',\n      sparkline: [320, 335, 340, 330, 345, 350, 348, 355, 360, 358, 365, 364],\n    },\n  ];\n}\n\n/* --------------------------------------------------------------------------\n   Chart Data Generators\n   -------------------------------------------------------------------------- */\n\nfunction generateRevenueHistory(filters: DashboardFilters): ChartDataPoint[] {\n  const data: ChartDataPoint[] = [];\n  const days = Math.max(\n    7,\n    Math.ceil(\n      (filters.dateRange.end.getTime() - filters.dateRange.start.getTime()) /\n        (1000 * 60 * 60 * 24),\n    ),\n  );\n\n  for (let i = 0; i < days; i++) {\n    const date = new Date(filters.dateRange.start);\n    date.setDate(date.getDate() + i);\n\n    const base = 35000 + Math.sin(i * 0.3) * 8000;\n    const noise = (Math.random() - 0.5) * 10000;\n\n    data.push({\n      date: date.toISOString().split('T')[0],\n      revenue: Math.round(base + noise),\n      target: 40000,\n    });\n  }\n\n  return data;\n}\n\nfunction generateProductPerformance(): ChartDataPoint[] {\n  return [\n    { product: 'Premium Widget', revenue: 234000, units: 1250 },\n    { product: 'Standard Widget', revenue: 189000, units: 2100 },\n    { product: 'Basic Widget', revenue: 145000, units: 3500 },\n    { product: 'Deluxe Widget', revenue: 98000, units: 450 },\n    { product: 'Compact Widget', revenue: 87000, units: 1800 },\n  ];\n}\n\nfunction generateCategoryBreakdown(): ChartDataPoint[] {\n  return [\n    { category: 'Electronics', sales: 425000 },\n    { category: 'Clothing', sales: 380000 },\n    { category: 'Home & Garden', sales: 290000 },\n    { category: 'Sports', sales: 150832 },\n    { category: 'Books', sales: 95000 },\n  ];\n}\n\nfunction generateRegionData(): ChartDataPoint[] {\n  return [\n    { region: 'North America', revenue: 520000 },\n    { region: 'Europe', revenue: 380000 },\n    { region: 'Asia Pacific', revenue: 245000 },\n    { region: 'Latin America', revenue: 100832 },\n  ];\n}\n\n/* --------------------------------------------------------------------------\n   Transaction Data Generator\n   -------------------------------------------------------------------------- */\n\nfunction generateTransactions(filters: DashboardFilters): Transaction[] {\n  const products = ['Premium Widget', 'Standard Widget', 'Basic Widget', 'Deluxe Widget', 'Compact Widget'];\n  const customers = ['Acme Corp', 'GlobalTech', 'MegaCorp', 'TechStart', 'Enterprise Inc', 'DataDriven Ltd', 'CloudFirst', 'InnovateCo'];\n  const categories = ['Electronics', 'Clothing', 'Home & Garden', 'Sports', 'Books'];\n  const regions = ['North America', 'Europe', 'Asia Pacific', 'Latin America'];\n  const statuses: Transaction['status'][] = ['completed', 'pending', 'completed', 'completed', 'refunded'];\n  const reps = ['John Smith', 'Jane Doe', 'Mike Johnson', 'Sarah Williams', 'Tom Brown'];\n\n  const transactions: Transaction[] = [];\n  const dayRange =\n    (filters.dateRange.end.getTime() - filters.dateRange.start.getTime()) /\n    (1000 * 60 * 60 * 24);\n\n  for (let i = 0; i < 50; i++) {\n    const date = new Date(\n      filters.dateRange.start.getTime() + Math.random() * dayRange * 86400000,\n    );\n\n    const product = products[Math.floor(Math.random() * products.length)];\n    const category = categories[Math.floor(Math.random() * categories.length)];\n\n    // Apply category filter if set\n    if (\n      filters.categories.length > 0 &&\n      !filters.categories.includes(category.toLowerCase().replace(/\\s&\\s/g, ''))\n    ) {\n      continue;\n    }\n\n    transactions.push({\n      id: `TRX-${(1000 + i).toString()}`,\n      date: date.toISOString().split('T')[0],\n      customer: customers[Math.floor(Math.random() * customers.length)],\n      product,\n      category,\n      amount: Math.floor(Math.random() * 5000) + 200,\n      quantity: Math.floor(Math.random() * 10) + 1,\n      status: statuses[Math.floor(Math.random() * statuses.length)],\n      region: regions[Math.floor(Math.random() * regions.length)],\n      salesRep: reps[Math.floor(Math.random() * reps.length)],\n    });\n  }\n\n  return transactions.sort(\n    (a, b) => new Date(b.date).getTime() - new Date(a.date).getTime(),\n  );\n}\n","import React, { useState, useCallback, useRef, useMemo } from 'react';\nimport { DashboardLayout, DashboardContent, SectionHeader } from '../layouts';\nimport { DashboardAppProvider } from '../components/DashboardProvider';\nimport { useDashboard } from '../hooks/useDashboard';\nimport { KPICard } from '../components/widgets/KPICard';\nimport { ChartWidget } from '../components/widgets/ChartWidget';\nimport { DataTable } from '../components/table/DataTable';\nimport {\n  transactionColumns,\n  transactionColumnsMobile,\n} from '../components/table/transactionColumns';\nimport { AdvancedFilterPanel } from '../components/filters/AdvancedFilterPanel';\nimport { CustomizableGrid, SALES_DASHBOARD_LAYOUTS } from '../components/layouts/CustomizableGrid';\nimport { WidgetCatalog, AVAILABLE_WIDGETS } from '../components/layouts/WidgetCatalog';\nimport { WidgetContainer } from '../components/common/WidgetContainer';\nimport { useSmartPolling } from '../hooks/useSmartPolling';\nimport { useCachedWidget } from '../hooks/useCachedWidget';\nimport { exportDashboard } from '../utils/exportDashboard';\nimport { formatCurrency, formatDate } from '../utils/formatters';\nimport { useTheme } from '../theme';\nimport {\n  ConfirmDialog,\n  ProgressBar,\n  CircularProgress,\n  EmptyState,\n  DashboardSkeleton,\n} from '../components/feedback';\nimport { useDashboardFeedback } from '../hooks/useDashboardFeedback';\nimport type {\n  KPIData,\n  ChartConfig,\n  Transaction,\n  ExportFormat,\n} from '../types/dashboard';\nimport { generateMockSalesData } from './mockData';\n\n/* ==========================================================================\n   Sales Dashboard Page\n   The main dashboard page that assembles all widgets, filters, and layouts.\n   ========================================================================== */\n\nexport function SalesDashboardPage() {\n  return (\n    <DashboardAppProvider defaultAutoRefresh defaultRefreshInterval={30_000}>\n      <SalesDashboardInner />\n    </DashboardAppProvider>\n  );\n}\n\n/* --------------------------------------------------------------------------\n   Navigation Items\n   -------------------------------------------------------------------------- */\n\nconst NAV_ITEMS = [\n  { id: 'overview', label: 'Overview', href: '/', icon: '\\u25A0' },\n  { id: 'revenue', label: 'Revenue', href: '/revenue', icon: '$' },\n  { id: 'orders', label: 'Orders', href: '/orders', icon: '#' },\n  { id: 'products', label: 'Products', href: '/products', icon: '\\u25CB' },\n  { id: 'customers', label: 'Customers', href: '/customers', icon: '\\u263A' },\n  {\n    id: 'reports',\n    label: 'Reports',\n    href: '/reports',\n    icon: '\\u2261',\n    children: [\n      { id: 'daily', label: 'Daily Report', href: '/reports/daily' },\n      { id: 'weekly', label: 'Weekly Report', href: '/reports/weekly' },\n      { id: 'monthly', label: 'Monthly Report', href: '/reports/monthly' },\n    ],\n  },\n  { id: 'settings', label: 'Settings', href: '/settings', icon: '\\u2699' },\n];\n\n/* --------------------------------------------------------------------------\n   Inner Dashboard (consumes context)\n   -------------------------------------------------------------------------- */\n\nfunction SalesDashboardInner() {\n  const { filters, autoRefresh, refreshInterval, triggerRefresh } = useDashboard();\n  const { toggleTheme, isDark } = useTheme();\n  const {\n    exportProgress,\n    handleExportWithFeedback,\n    handleRefreshWithFeedback,\n    handleBulkAction,\n    confirmDialog,\n    showConfirmation,\n    closeConfirmation,\n  } = useDashboardFeedback();\n\n  const dashboardRef = useRef<HTMLDivElement>(null);\n  const [activePath, setActivePath] = useState('/');\n  const [isCustomizing, setIsCustomizing] = useState(false);\n  const [showWidgetCatalog, setShowWidgetCatalog] = useState(false);\n  const [activeWidgetIds, setActiveWidgetIds] = useState(\n    AVAILABLE_WIDGETS.map((w) => w.id),\n  );\n\n  // Fetch data with smart polling (tab visibility aware)\n  const { data: salesData } = useSmartPolling(\n    () => generateMockSalesData(filters),\n    {\n      interval: refreshInterval,\n      enabled: autoRefresh,\n      pauseOnHidden: true,\n      immediate: true,\n    },\n  );\n\n  // Extract data\n  const kpis = salesData?.kpis ?? [];\n  const revenueHistory = salesData?.revenueHistory ?? [];\n  const productPerformance = salesData?.productPerformance ?? [];\n  const categoryBreakdown = salesData?.categoryBreakdown ?? [];\n  const transactions = salesData?.transactions ?? [];\n\n  // Chart configs\n  const revenueTrendConfig: ChartConfig = {\n    id: 'chart-revenue-trend',\n    title: 'Revenue Trend',\n    subtitle: 'Daily revenue over selected period',\n    type: 'line',\n    data: revenueHistory,\n    series: [\n      { name: 'Revenue', dataKey: 'revenue' },\n      { name: 'Target', dataKey: 'target', color: 'var(--chart-color-4)' },\n    ],\n    xAxisKey: 'date',\n    showLegend: true,\n    showGrid: true,\n  };\n\n  const comparisonConfig: ChartConfig = {\n    id: 'chart-comparison',\n    title: 'Product Comparison',\n    subtitle: 'Revenue by product',\n    type: 'bar',\n    data: productPerformance,\n    series: [\n      { name: 'Revenue', dataKey: 'revenue' },\n      { name: 'Units', dataKey: 'units' },\n    ],\n    xAxisKey: 'product',\n    showLegend: true,\n  };\n\n  const categoryConfig: ChartConfig = {\n    id: 'chart-category',\n    title: 'Category Breakdown',\n    subtitle: 'Sales distribution by category',\n    type: 'pie',\n    data: categoryBreakdown,\n    series: [{ name: 'Sales', dataKey: 'sales' }],\n    xAxisKey: 'category',\n    showLegend: true,\n  };\n\n  const distributionConfig: ChartConfig = {\n    id: 'chart-distribution',\n    title: 'Regional Distribution',\n    subtitle: 'Sales by region',\n    type: 'pie',\n    data: salesData?.regionData ?? [],\n    series: [{ name: 'Revenue', dataKey: 'revenue' }],\n    xAxisKey: 'region',\n    showLegend: true,\n  };\n\n  // Batch action handler for selected table rows with feedback\n  const handleTableBatchAction = useCallback(\n    (action: string, rows: Transaction[]) => {\n      if (action === 'delete') {\n        showConfirmation({\n          title: 'Delete selected transactions',\n          description: `Are you sure you want to delete ${rows.length} transaction${rows.length > 1 ? 's' : ''}? This action cannot be undone.`,\n          variant: 'danger',\n          confirmLabel: 'Delete',\n          onConfirm: () => {\n            // In production, this would trigger API calls\n            console.log(`Deleting ${rows.length} rows`, rows);\n            handleBulkAction('Deleted', rows.length);\n          },\n        });\n      } else {\n        // Non-destructive actions proceed immediately\n        console.log(`Batch action \"${action}\" on ${rows.length} rows`, rows);\n        handleBulkAction(action, rows.length);\n      }\n    },\n    [showConfirmation, handleBulkAction],\n  );\n\n  // Export handler with progress feedback\n  const handleExport = useCallback(\n    async (format: ExportFormat) => {\n      await handleExportWithFeedback(format, async () => {\n        await exportDashboard(format, {\n          element: dashboardRef.current,\n          data: transactions,\n          filename: 'sales-dashboard',\n          includeTimestamp: true,\n        });\n      });\n    },\n    [transactions, handleExportWithFeedback],\n  );\n\n  // Widget catalog handlers\n  const handleAddWidget = useCallback(\n    (widget: { id: string }) => {\n      if (!activeWidgetIds.includes(widget.id)) {\n        setActiveWidgetIds((prev) => [...prev, widget.id]);\n      }\n    },\n    [activeWidgetIds],\n  );\n\n  const handleRemoveWidget = useCallback((widgetId: string) => {\n    setActiveWidgetIds((prev) => prev.filter((id) => id !== widgetId));\n  }, []);\n\n  // Header right section\n  const headerRight = (\n    <div className=\"layout-row layout-row--sm\">\n      <button\n        className=\"chart-widget__action-btn\"\n        onClick={toggleTheme}\n        title={isDark ? 'Switch to light mode' : 'Switch to dark mode'}\n        aria-label=\"Toggle theme\"\n      >\n        {isDark ? '\\u2600' : '\\u263D'}\n      </button>\n      <button\n        className=\"chart-widget__action-btn\"\n        onClick={() => setIsCustomizing(!isCustomizing)}\n        title={isCustomizing ? 'Exit customization' : 'Customize dashboard'}\n        aria-label=\"Toggle customization mode\"\n      >\n        {isCustomizing ? '\\u2713' : '\\u270E'}\n      </button>\n      <button\n        className=\"chart-widget__action-btn\"\n        onClick={() => setShowWidgetCatalog(!showWidgetCatalog)}\n        title=\"Widget catalog\"\n        aria-label=\"Open widget catalog\"\n      >\n        +\n      </button>\n      <button\n        className=\"filter-panel__apply-btn\"\n        onClick={() => handleRefreshWithFeedback(triggerRefresh)}\n        title=\"Refresh data\"\n      >\n        Refresh\n      </button>\n    </div>\n  );\n\n  return (\n    <DashboardLayout\n      navItems={NAV_ITEMS}\n      headerRight={headerRight}\n      title=\"Sales Dashboard\"\n      activePath={activePath}\n      onNavigate={setActivePath}\n    >\n      <div ref={dashboardRef}>\n        <DashboardContent\n          filterBar={<AdvancedFilterPanel />}\n          kpiCards={\n            <>\n              {kpis.map((kpi) =>\n                activeWidgetIds.includes(`kpi-${kpi.id}`) ? (\n                  <KPICard key={kpi.id} data={kpi} />\n                ) : null,\n              )}\n            </>\n          }\n          charts={\n            <>\n              {activeWidgetIds.includes('chart-revenue-trend') && (\n                <ChartWidget\n                  config={revenueTrendConfig}\n                  onExport={handleExport}\n                  fullWidth\n                  allowedTypes={['line', 'area']}\n                  formatType=\"currency\"\n                  height={320}\n                />\n              )}\n              {activeWidgetIds.includes('chart-comparison') && (\n                <ChartWidget\n                  config={comparisonConfig}\n                  onExport={handleExport}\n                  allowedTypes={['bar']}\n                  formatType=\"currency\"\n                  height={320}\n                />\n              )}\n              {activeWidgetIds.includes('chart-category') && (\n                <ChartWidget\n                  config={categoryConfig}\n                  onExport={handleExport}\n                  allowedTypes={['pie']}\n                  formatType=\"currency\"\n                  height={320}\n                />\n              )}\n              {activeWidgetIds.includes('chart-distribution') && (\n                <ChartWidget\n                  config={distributionConfig}\n                  onExport={handleExport}\n                  allowedTypes={['pie']}\n                  formatType=\"currency\"\n                  height={320}\n                />\n              )}\n            </>\n          }\n          dataTable={\n            activeWidgetIds.includes('table-transactions') ? (\n              <DataTable<Transaction>\n                title=\"Recent Transactions\"\n                subtitle={`${transactions.length} transactions in selected period`}\n                columns={transactionColumns}\n                data={transactions}\n                enableSorting\n                enableMultiSort\n                enableColumnFilters\n                enableGlobalFilter\n                enableRowSelection\n                enableExport\n                enablePagination\n                initialPageSize={10}\n                pageSizeOptions={[10, 25, 50, 100]}\n                getRowId={(row) => row.id}\n                onRowClick={(row) => console.log('Row clicked:', row)}\n                onBatchAction={handleTableBatchAction}\n                batchActions={[\n                  { id: 'export-selected', label: 'Export Selected' },\n                  { id: 'mark-reviewed', label: 'Mark Reviewed' },\n                  { id: 'delete', label: 'Delete', variant: 'danger' },\n                ]}\n                exportFilename=\"sales-transactions\"\n                mobileHiddenColumns={transactionColumnsMobile}\n                striped\n              />\n            ) : null\n          }\n        />\n      </div>\n\n      {/* Export Progress Indicator */}\n      {exportProgress.isExporting && (\n        <div style={{\n          position: 'fixed',\n          bottom: 24,\n          right: 24,\n          zIndex: 1080,\n          display: 'flex',\n          alignItems: 'center',\n          gap: 'var(--spacing-sm)',\n          background: 'var(--card-bg)',\n          border: '1px solid var(--card-border-color)',\n          borderRadius: 'var(--radius-lg)',\n          padding: 'var(--spacing-md)',\n          boxShadow: 'var(--shadow-lg)',\n          minWidth: 240,\n        }}>\n          <CircularProgress\n            value={exportProgress.progress}\n            size=\"sm\"\n            indeterminate={exportProgress.progress < 5}\n            showLabel={false}\n          />\n          <ProgressBar\n            value={exportProgress.progress}\n            size=\"sm\"\n            label={`Exporting ${exportProgress.format?.toUpperCase() ?? ''}...`}\n            showValue\n          />\n        </div>\n      )}\n\n      {/* Confirmation Dialog (for destructive actions) */}\n      <ConfirmDialog\n        isOpen={confirmDialog.isOpen}\n        onClose={closeConfirmation}\n        title={confirmDialog.title}\n        description={confirmDialog.description}\n        variant={confirmDialog.variant}\n        confirmLabel={confirmDialog.confirmLabel}\n        onConfirm={confirmDialog.onConfirm}\n      />\n\n      {/* Widget Catalog Overlay */}\n      {showWidgetCatalog && (\n        <div style={{ position: 'fixed', top: 80, right: 24, zIndex: 1060 }}>\n          <WidgetCatalog\n            activeWidgetIds={activeWidgetIds}\n            onAddWidget={handleAddWidget}\n            onRemoveWidget={handleRemoveWidget}\n            isOpen={showWidgetCatalog}\n            onClose={() => setShowWidgetCatalog(false)}\n          />\n        </div>\n      )}\n    </DashboardLayout>\n  );\n}\n\nexport default SalesDashboardPage;\n"],"names":["ProgressBar","value","max","variant","size","indeterminate","label","showValue","description","ariaLabel","percentage","roundedPercentage","hasHeader","hasWrapper","bar","jsx","jsxs","SIZE_MAP","CircularProgress","showLabel","pixelSize","radius","circumference","offset","variantClass","DIALOG_ICONS","ConfirmDialog","isOpen","onClose","title","confirmLabel","cancelLabel","onConfirm","onCancel","isExiting","setIsExiting","useState","isConfirming","setIsConfirming","dialogRef","useRef","previousFocusRef","useEffect","handleClose","useCallback","handleConfirm","handleCancel","handleKeyDown","e","focusable","first","last","useMediaQuery","query","matches","setMatches","mediaQuery","handler","event","BREAKPOINT_LG","BREAKPOINT_MD","DashboardLayout","children","navItems","headerRight","activePath","onNavigate","controlledCollapsed","onSidebarCollapsedChange","isDesktop","isTablet","internalCollapsed","setInternalCollapsed","mobileSidebarOpen","setMobileSidebarOpen","expandedGroups","setExpandedGroups","isCollapsed","setCollapsed","collapsed","handleToggleSidebar","prev","toggleGroup","id","next","handleNavClick","item","sidebarClasses","shellClasses","SidebarNavItem","onNavClick","depth","isActive","hasChildren","isExpanded","itemClasses","child","DashboardContent","filterBar","kpiCards","charts","dataTable","getDefaultDateRange","end","start","DEFAULT_FILTERS","calculateDateRange","preset","filterReducer","state","action","cat","categories","c","DashboardContext","createContext","DashboardProvider","defaultFilters","defaultAutoRefresh","defaultRefreshInterval","initialFilters","filters","dispatch","useReducer","autoRefresh","setAutoRefresh","refreshInterval","setRefreshInterval","lastRefreshed","setLastRefreshed","activeFilterCount","useMemo","count","setDateRange","range","setDatePreset","setCategories","toggleCategory","category","setSearch","search","resetFilters","triggerRefresh","serializable","useDashboard","context","useContext","STORAGE_KEY","THEME_ATTRIBUTE","VALID_THEMES","ThemeContext","getSystemPreference","getSavedTheme","saved","ThemeProvider","defaultTheme","theme","setThemeState","handleChange","setTheme","newTheme","toggleTheme","isDark","useTheme","getTokenValue","tokenName","getChartColors","colors","i","SidebarContext","SidebarProvider","defaultCollapsed","setIsCollapsed","isMobileOpen","setIsMobileOpen","toggleCollapsed","toggleMobileOpen","setMobileOpen","open","DashboardAppProvider","FilterProvider","ToastProvider","formatLargeNumber","decimals","absValue","sign","formatCurrency","options","currency","compact","formatPercentage","showSign","formatted","formatNumber","formatDecimal","formatDate","dateString","format","date","formatKPIValue","STATUS_ICON_MAP","TREND_ARROW","Sparkline","data","status","width","height","min","points","index","x","y","colorVar","KPICard","onClick","loading","trend","trendDirection","sparkline","icon","comparisonLabel","target","KPICardSkeleton","trendClass","iconClass","cardClass","formattedValue","formattedTrend","progressPercent","FALLBACK_COLORS","useChartColors","colorSet","setColorSet","buildColorSet","observer","resolved","ChartTooltip","active","payload","formatType","valueFormatter","labelFormatter","formattedLabel","entry","formatByType","type","AccessibleChartWrapper","columns","dataKeys","formatters","className","showTableToggle","useId","labelId","descId","tableId","liveId","showTable","setShowTable","prefersReducedMotion","setPrefersReducedMotion","mq","toggleTable","formatValue","key","col","row","rowIdx","colIdx","getSeriesPattern","patterns","getStrokeDasharray","pattern","LineChartRenderer","series","xAxisKey","showGrid","showLegend","usePatterns","animate","referenceLine","onDataPointClick","chartColors","handleClick","s","ResponsiveContainer","LineChart","CartesianGrid","XAxis","YAxis","Tooltip","Legend","ReferenceLine","color","dashArray","Line","AreaChartRenderer","stacked","fillOpacity","gradientId","AreaChart","gid","Area","BarChartRenderer","horizontal","barRadius","barGap","onBarClick","activeBarIndex","setActiveBarIndex","handleBarClick","seriesKey","ChartComponent","BarChart","categoryAxis","valueAxis","Bar","_","idx","Cell","PieChartRenderer","labelKey","donut","showLabels","showPercentage","onSliceClick","activeIndex","setActiveIndex","dataKey","chartData","top","otherValue","sum","d","total","handleSliceClick","onPieEnter","onPieLeave","renderLabel","props","cx","cy","midAngle","outerRadius","RADIAN","percent","labelName","renderActiveShape","innerRadius","startAngle","endAngle","fill","Sector","Fragment","accessDataKeys","accessData","PieChart","Pie","val","pct","ChartWidget","config","error","allowedTypes","onExport","onRetry","fullWidth","onDataClick","activeType","setActiveType","showExportMenu","setShowExportMenu","handleExport","ExportIcon","ChartSkeleton","ChartRenderer","commonProps","chartTypeIcon","globalFilterFn","columnId","filterValue","cell","useDataTable","enableSorting","enableMultiSort","enableColumnFilters","enableGlobalFilter","enableRowSelection","enablePagination","initialPageSize","pageSizeOptions","getRowId","sorting","setSorting","columnFilters","setColumnFilters","globalFilter","setGlobalFilter","rowSelection","setRowSelection","pagination","setPagination","table","useReactTable","getCoreRowModel","getSortedRowModel","getFilteredRowModel","getPaginationRowModel","selectedRows","filteredRowCount","totalRowCount","hasActiveFilters","clearSelection","clearAllFilters","getCellValue","accessor","escapeCSV","str","generateCSV","header","rows","downloadCSV","filename","includeTimestamp","includeBOM","csv","timestamp","fullFilename","bom","blob","url","link","useVirtualScroll","estimateSize","overscan","containerHeight","enabled","containerRef","scrollTop","setScrollTop","totalHeight","handleScroll","container","startIndex","visibleCount","endIndex","items","DataTable","subtitle","enableExport","enableVirtualScrolling","virtualScrollHeight","onRowClick","onBatchAction","batchActions","exportFilename","mobileHiddenColumns","striped","emptyMessage","scrollContainerRef","tableColumns","el","resolvedPageSizeOptions","allRows","virtualRows","rowHeight","handleCSVExport","exportColumns","exportData","r","handleBatchAction","actionId","j","headerGroups","headerGroup","HeaderCell","virtualRow","DataRow","Pagination","isSortable","sortDirection","isHiddenMobile","flexRender","style","pageIndex","pageSize","pageCount","startRow","endRow","getPageNumbers","pages","pageNum","columnHelper","createColumnHelper","StatusBadge","transactionColumns","info","transactionColumnsMobile","DATE_PRESETS","CATEGORY_OPTIONS","DEFAULT_FILTER_PRESETS","AdvancedFilterPanel","presets","onApply","showCustomDates","setShowCustomDates","showCategoryDropdown","setShowCategoryDropdown","showPresets","setShowPresets","handleDatePreset","handleCustomDate","field","handleLoadPreset","handleApply","SearchIcon","p","toISODate","option","AVAILABLE_WIDGETS","WidgetCatalog","activeWidgetIds","onAddWidget","onRemoveWidget","filterType","setFilterType","searchQuery","setSearchQuery","filteredWidgets","w","q","addWidget","widget","removeWidget","widgetId","useSmartPolling","fetchFn","interval","pauseOnHidden","maxBackoff","immediate","setData","setError","isPolling","setIsPolling","lastFetched","setLastFetched","errorCountRef","timerRef","fetchFnRef","doFetch","result","err","currentInterval","handleVisibilityChange","pause","refetch","exportToCSV","getTimestamp","headers","csvRows","values","csvContent","downloadBlob","exportToImage","element","html2canvas","dataUrl","downloadDataUrl","serializer","clone","svg","svgBlob","exportToPDF","jsPDF","doc","imgData","elementToDataUrl","pdfWidth","pdfHeight","printWindow","exportDashboard","exportOptions","content","mimeType","useDashboardFeedback","toast","useToast","exportProgress","setExportProgress","exportInterval","handleExportWithFeedback","exportFn","progress","handleRefreshWithFeedback","refreshFn","handleFilterApplied","filterCount","handleBulkAction","handleError","message","handleConnectionChange","isOnline","confirmDialog","setConfirmDialog","showConfirmation","closeConfirmation","generateMockSalesData","resolve","kpis","generateKPIs","revenueHistory","generateRevenueHistory","productPerformance","generateProductPerformance","categoryBreakdown","generateCategoryBreakdown","transactions","generateTransactions","regionData","generateRegionData","days","base","noise","products","customers","regions","statuses","reps","dayRange","product","a","b","SalesDashboardPage","SalesDashboardInner","NAV_ITEMS","dashboardRef","setActivePath","isCustomizing","setIsCustomizing","showWidgetCatalog","setShowWidgetCatalog","setActiveWidgetIds","salesData","revenueTrendConfig","comparisonConfig","categoryConfig","distributionConfig","handleTableBatchAction","handleAddWidget","handleRemoveWidget","kpi"],"mappings":"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"}